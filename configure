#! /bin/sh







#  +----------------------------------------------------------------------+
#  | PHP version 4.0                                                      |
#  +----------------------------------------------------------------------+
#  | Copyright (c) 1997, 1998, 1999, 2000 The PHP Group                   |
#  +----------------------------------------------------------------------+
#  | This source file is subject to version 2.02 of the PHP license,      |
#  | that is bundled with this package in the file LICENSE, and is        |
#  | available at through the world-wide-web at                           |
#  | http://www.php.net/license/2_02.txt.                                 |
#  | If you did not receive a copy of the PHP license and are unable to   |
#  | obtain it through the world-wide-web, please send a note to          |
#  | license@php.net so we can mail you a copy immediately.               |
#  +----------------------------------------------------------------------+
#  | Authors: Sascha Schumann <sascha@schumann.cx>                        |
#  +----------------------------------------------------------------------+
#
# $Id: dynlib.m4,v 1.4 2000/08/20 05:36:06 sas Exp $ 
#















	





	















 







































































  PHP_VAR_SUBST="$PHP_VAR_SUBST EXT_SUBDIRS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST EXT_STATIC"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST EXT_SHARED"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST EXT_LIBS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST EXT_LTLIBS"
  




















# Do all the work for Automake.  This macro actually does too much --
# some checks are only needed if your package does certain things.
# But this isn't really a big deal.

# serial 1




#
# Check to make sure that the build environment is sane.
#





# Like AC_CONFIG_HEADER, but automatically create stamp file.



# Add --enable-maintainer-mode option to configure.
# From Jim Meyering

# serial 1



# Define a conditional.




# serial 1

# @defmac AC_PROG_CC_STDC
# @maindex PROG_CC_STDC
# @ovindex CC
# If the C compiler in not in ANSI C mode by default, try to add an option
# to output variable @code{CC} to make it so.  This macro tries various
# options that select ANSI C on some system or another.  It considers the
# compiler to be in ANSI C mode if it handles function prototypes correctly.
#
# If you use this macro, you should check after calling it whether the C
# compiler has been set to accept ANSI C; if not, the shell variable
# @code{am_cv_prog_cc_stdc} is set to @samp{no}.  If you wrote your source
# code in ANSI C, you can make an un-ANSIfied copy of it by using the
# program @code{ansi2knr}, which comes with Ghostscript.
# @end defmac







# serial 40 AC_PROG_LIBTOOL




# AC_LIBTOOL_DLOPEN - enable checks for dlopen support


# AC_LIBTOOL_WIN32_DLL - declare package support for building win32 dll's


# AC_ENABLE_SHARED - implement the --enable-shared flag
# Usage: AC_ENABLE_SHARED[(DEFAULT)]
#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to
#   `yes'.


# AC_DISABLE_SHARED - set the default shared flag to --disable-shared


# AC_ENABLE_STATIC - implement the --enable-static flag
# Usage: AC_ENABLE_STATIC[(DEFAULT)]
#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to
#   `yes'.


# AC_DISABLE_STATIC - set the default static flag to --disable-static



# AC_ENABLE_FAST_INSTALL - implement the --enable-fast-install flag
# Usage: AC_ENABLE_FAST_INSTALL[(DEFAULT)]
#   Where DEFAULT is either `yes' or `no'.  If omitted, it defaults to
#   `yes'.


# AC_ENABLE_FAST_INSTALL - set the default to --disable-fast-install


# AC_PROG_LD - find the path to the GNU or non-GNU linker




# AC_PROG_NM - find the path to a BSD-compatible name lister


# AC_CHECK_LIBM - check for math library


# AC_LIBLTDL_CONVENIENCE[(dir)] - sets LIBLTDL to the link flags for
# the libltdl convenience library, adds --enable-ltdl-convenience to
# the configure arguments.  Note that LIBLTDL is not AC_SUBSTed, nor
# is AC_CONFIG_SUBDIRS called.  If DIR is not provided, it is assumed
# to be `${top_builddir}/libltdl'.  Make sure you start DIR with
# '${top_builddir}/' (note the single quotes!) if your package is not
# flat, and, if you're not using automake, define top_builddir as
# appropriate in the Makefiles.


# AC_LIBLTDL_INSTALLABLE[(dir)] - sets LIBLTDL to the link flags for
# the libltdl installable library, and adds --enable-ltdl-install to
# the configure arguments.  Note that LIBLTDL is not AC_SUBSTed, nor
# is AC_CONFIG_SUBDIRS called.  If DIR is not provided, it is assumed
# to be `${top_builddir}/libltdl'.  Make sure you start DIR with
# '${top_builddir}/' (note the single quotes!) if your package is not
# flat, and, if you're not using automake, define top_builddir as
# appropriate in the Makefiles.
# In the future, this macro may have to be called after AC_PROG_LIBTOOL.




# Guess values for system-dependent variables and create Makefiles.
# Generated automatically using autoconf version 2.13 
# Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
#
# This configure script is free software; the Free Software Foundation
# gives unlimited permission to copy, distribute and modify it.

# Defaults:
ac_help=
ac_default_prefix=/usr/local
# Any additions from configure.in:
ac_help="$ac_help
  --enable-maintainer-mode enable make rules and dependencies not useful
                          (and sometimes confusing) to the casual installer"
ac_help="$ac_help
  --with-aolserver-src=DIR         Specify path to the source distribution of 
                                   AOLserver"
ac_help="$ac_help
  --with-aolserver=DIR             Specify path to the installed AOLserver"
ac_help="$ac_help
  --with-apxs[=FILE]      Build shared Apache module. FILE is the optional
                          pathname to the Apache apxs tool; defaults to "apxs"."
ac_help="$ac_help
  --with-apache[=DIR]     Build Apache module. DIR is the top-level Apache
                          build directory, defaults to /usr/local/etc/httpd."
ac_help="$ac_help
  --with-mod_charset      Enable transfer tables for mod_charset (Rus Apache)."
ac_help="$ac_help
  --enable-force-cgi-redirect
                          Enable the security check for internal server
                          redirects.  You should use this if you are
                          running the CGI version with Apache. "
ac_help="$ac_help
  --enable-discard-path   If this is enabled, the PHP CGI binary
                          can safely be placed outside of the
                          web tree and people will not be able
                          to circumvent .htaccess security. "
ac_help="$ac_help
  --with-fhttpd[=DIR]     Build fhttpd module.  DIR is the fhttpd sources
                          directory, defaults to /usr/local/src/fhttpd."
ac_help="$ac_help
  --with-zeus=DIR         Build PHP as an ISAPI module for use with Zeus."
ac_help="$ac_help
  --with-nsapi=DIR        Specify path to the installed Netscape"
ac_help="$ac_help
  --with-phttpd=DIR"
ac_help="$ac_help
  --with-pi3web=DIR       Build PHP as a module for use with Pi3Web."
ac_help="$ac_help
  --with-roxen=DIR        Build PHP as a Pike module. DIR is the base Roxen
                          directory, normally /usr/local/roxen/server."
ac_help="$ac_help
  --enable-roxen-zts      Build the Roxen module using Zend Thread Safety."
ac_help="$ac_help
  --with-servlet[=DIR]	  Include servlet support. DIR is the base install
			  directory for the JSDK.  This SAPI prereqs the
			  java extension must be built as a shared dl."
ac_help="$ac_help
  --with-thttpd=SRCDIR"
ac_help="$ac_help
  --with-config-file-path=PATH  
                          Sets the path in which to look for php.ini.
                          defaults to /usr/local/lib"
ac_help="$ac_help
  --enable-debug         Compile with debugging symbols."
ac_help="$ac_help
  --enable-safe-mode      Enable safe mode by default."
ac_help="$ac_help
  --with-exec-dir[=DIR]   Only allow executables in DIR when in safe mode
                          defaults to /usr/local/php/bin"
ac_help="$ac_help
  --enable-sigchild       Enable PHP's own SIGCHLD handler."
ac_help="$ac_help
  --enable-magic-quotes   Enable magic quotes by default."
ac_help="$ac_help
  --disable-rpath         Disable passing additional runtime library
                          search paths"
ac_help="$ac_help
  --enable-libgcc         Enable explicitly linking against libgcc"
ac_help="$ac_help
  --disable-short-tags    Disable the short-form <? start tag by default."
ac_help="$ac_help
  --disable-url-fopen-wrapper 
                          Disable the URL-aware fopen wrapper that allows
                          accessing files via http or ftp."
ac_help="$ac_help
  --disable-pic           Disable PIC for shared objects"
ac_help="$ac_help
  --enable-dmalloc        Enable dmalloc"
ac_help="$ac_help
  --disable-pear          Do not install PEAR"
ac_help="$ac_help
  --with-aspell[=DIR]     Include ASPELL support."
ac_help="$ac_help
  --enable-bcmath         Compile with bc style precision math functions.
                          Read README-BCMATH for instructions on how to
                          get this module installed. "
ac_help="$ac_help
  --enable-calendar       Enable support for calendar conversion"
ac_help="$ac_help
  --with-ccvs[=DIR]  Compile CCVS support into PHP4. 
					  Please specify your CCVS base install directory as DIR.
"
ac_help="$ac_help
  --with-cpdflib[=DIR]    Include cpdflib support (requires cpdflib >= 2).
                          DIR is the cpdfllib install directory,
                          defaults to /usr."
ac_help="$ac_help
  --with-jpeg-dir[=DIR]   jpeg dir for cpdflib 2.x"
ac_help="$ac_help
  --with-tiff-dir[=DIR]   tiff dir for cpdflib 2.x"
ac_help="$ac_help
  --with-curl[=DIR]        Include CURL support"
ac_help="$ac_help
  --with-cybercash[=DIR]  Include CyberCash support.  DIR is the CyberCash MCK 
			  install directory."
ac_help="$ac_help
  --with-mod-dav=DIR      Include DAV support through Apache's mod_dav,
                          DIR is mod_dav's installation directory (Apache
                          module version only!)"
ac_help="$ac_help
  --enable-dba=shared     Build DBA as a shared module"
ac_help="$ac_help
  --with-gdbm[=DIR]       Include GDBM support"
ac_help="$ac_help
  --with-ndbm[=DIR]       Include NDBM support"
ac_help="$ac_help
  --with-db2[=DIR]        Include Berkeley DB2 support"
ac_help="$ac_help
  --with-db3[=DIR]        Include Berkeley DB3 support"
ac_help="$ac_help
  --with-dbm[=DIR]        Include DBM support"
ac_help="$ac_help
  --with-cdb[=DIR]        Include CDB support"
ac_help="$ac_help
"
ac_help="$ac_help
  --enable-dbase          Enable the bundled dbase library"
ac_help="$ac_help
  --with-dom[=DIR]        Include DOM support (requires libxml >= 2.0).
                          DIR is the libxml install directory,
                          defaults to /usr."
ac_help="$ac_help
  --with-zlib-dir[=DIR]   zlib dir for pdflib 3.0 or include zlib support"
ac_help="$ac_help
  --enable-exif           Enable exif support"
ac_help="$ac_help
  --with-fdftk[=DIR]      Include fdftk support.
                          DIR is the fdftk install directory,
                          defaults to /usr/local."
ac_help="$ac_help
"
ac_help="$ac_help
  --enable-filepro        Enable the bundled read-only filePro support"
ac_help="$ac_help
  --enable-ftp            Enable FTP support"
ac_help="$ac_help
  --without-gd            Disable GD support.
  --with-gd[=DIR]         Include GD support (DIR is GD's install dir).
                          Set DIR to "shared" to build as a dl, or 
                          "shared,DIR" to build as a dl and still specify DIR."
ac_help="$ac_help
  --with-jpeg-dir[=DIR]   jpeg dir for gd-1.8+"
ac_help="$ac_help
  --with-xpm-dir[=DIR]    xpm dir for gd-1.8+"
ac_help="$ac_help
  --with-jpeg-dir[=DIR]   jpeg dir for gd-1.8+"
ac_help="$ac_help
  --with-xpm-dir[=DIR]    xpm dir for gd-1.8+"
ac_help="$ac_help
  --with-ttf[=DIR]        Include Freetype support"
ac_help="$ac_help
  --with-t1lib[=DIR]      Include T1lib support."
ac_help="$ac_help
  --enable-freetype-4bit-antialias-hack  
                          Include support for FreeType2 (experimental)."
ac_help="$ac_help
  --with-gettext[=DIR]    Include GNU gettext support.  DIR is the gettext
                          install directory, defaults to /usr/local"
ac_help="$ac_help
  --with-hyperwave        Include Hyperwave support"
ac_help="$ac_help
  --with-icap[=DIR]       Include ICAP support."
ac_help="$ac_help
  --with-kerberos[=DIR]   Include Kerberos support in IMAP."
ac_help="$ac_help
  --with-imap[=DIR]       Include IMAP support.  DIR is the IMAP include
                          and c-client.a directory."
ac_help="$ac_help
  --with-informix[=DIR]   Include Informix support.  DIR is the Informix base
                          install directory, defaults to ${INFORMIXDIR:-nothing}."
ac_help="$ac_help
  --with-ingres[=DIR]     Include Ingres II support. DIR is the Ingres
                          base directory (default $II_SYSTEM/II/ingres)"
ac_help="$ac_help
  --with-interbase[=DIR]  Include InterBase support.  DIR is the InterBase base
                          install directory, defaults to /usr/interbase"
ac_help="$ac_help
  --with-java[=DIR]	  Include Java support. DIR is the base install
			  directory for the JDK.  This extension can only
			  be built as a shared dl."
ac_help="$ac_help
  --with-ldap[=DIR]       Include LDAP support.  DIR is the LDAP base
                          install directory."
ac_help="$ac_help
  --with-mcal[=DIR]       Include MCAL support."
ac_help="$ac_help
  --with-mcrypt[=DIR]     Include mcrypt support.  DIR is the mcrypt
                          install directory."
ac_help="$ac_help
  --with-mhash[=DIR]      Include mhash support.  DIR is the mhash
                          install directory."
ac_help="$ac_help
  --with-msql[=DIR]       Include mSQL support.  DIR is the mSQL base
                          install directory, defaults to /usr/local/Hughes."
ac_help="$ac_help
  --with-mysql[=DIR]      Include MySQL support. DIR is the MySQL base
                          directory. If unspecified, the bundled MySQL library
                          will be used."
ac_help="$ac_help
  --with-oci8[=DIR]       Include Oracle-oci8 support. Default DIR is ORACLE_HOME."
ac_help="$ac_help
  --with-adabas[=DIR]     Include Adabas D support.  DIR is the Adabas base
                          install directory, defaults to /usr/local."
ac_help="$ac_help
  --with-solid[=DIR]      Include Solid support.  DIR is the Solid base
                          install directory, defaults to /usr/local/solid"
ac_help="$ac_help
  --with-ibm-db2[=DIR]    Include IBM DB2 support.  DIR is the DB2 base
                          install directory, defaults to /home/db2inst1/sqllib"
ac_help="$ac_help
  --with-empress[=DIR]    Include Empress support.  DIR is the Empress base
                          install directory, defaults to \$EMPRESSPATH"
ac_help="$ac_help
  --with-velocis[=DIR]    Include Velocis support.  DIR is the Velocis base
                          install directory, defaults to /usr/local/velocis."
ac_help="$ac_help
  --with-custom-odbc[=DIR]      
                          Include a user defined ODBC support.
                          The DIR is ODBC install base directory, 
                          which defaults to /usr/local.
                          Make sure to define CUSTOM_ODBC_LIBS and
                          have some odbc.h in your include dirs.
                          E.g., you should define following for 
                          Sybase SQL Anywhere 5.5.00 on QNX, prior to
                          run configure script:
                              CFLAGS=\"-DODBC_QNX -DSQLANY_BUG\"
                              LDFLAGS=-lunix
                              CUSTOM_ODBC_LIBS=\"-ldblib -lodbc\"."
ac_help="$ac_help
  --with-iodbc[=DIR]      Include iODBC support.  DIR is the iODBC base
                          install directory, defaults to /usr/local."
ac_help="$ac_help
  --with-esoob[=DIR]      Include Easysoft OOB support. DIR is the OOB base
                          install directory,
                          defaults to /usr/local/easysoft/oob/client."
ac_help="$ac_help
  --with-unixODBC[=DIR]   Include unixODBC support.  DIR is the unixODBC base
                          install directory, defaults to /usr/local."
ac_help="$ac_help
  --with-openlink[=DIR]   Include OpenLink ODBC support.  DIR is the
                          OpenLink base install directory, defaults to
                          /usr/local/openlink."
ac_help="$ac_help
  --with-dbmaker[=DIR]    Include DBMaker support.  DIR is the DBMaker base
                          install directory, defaults to where the latest 
                          version of DBMaker is installed (such as
                          /home/dbmaker/3.6)."
ac_help="$ac_help
  --with-oracle[=DIR]     Include Oracle-oci7 support. Default DIR is ORACLE_HOME."
ac_help="$ac_help
  --without-pcre-regex    Do not include Perl Compatible Regular Expressions 
                          support. Use --with-pcre-regex=DIR to specify DIR
                          where PCRE's include and library files are located,
                          if not using bundled library."
ac_help="$ac_help
  --with-pdflib[=DIR]     Include pdflib 3.x support.
                          DIR is the pdflib install directory,
                          defaults to /usr/local."
ac_help="$ac_help
  --with-zlib-dir[=DIR]   zlib dir for pdflib 3.x or include zlib support"
ac_help="$ac_help
  --with-jpeg-dir[=DIR]   jpeg dir for pdflib 3.x"
ac_help="$ac_help
  --with-png-dir[=DIR]    png dir for pdflib 3.x"
ac_help="$ac_help
  --with-tiff-dir[=DIR]   tiff dir for pdflib 3.x"
ac_help="$ac_help
  --with-pfpro[=DIR]       Include Verisign Payflow Pro support"
ac_help="$ac_help
  --with-pgsql[=DIR]      Include PostgreSQL support.  DIR is the PostgreSQL
                          base install directory, defaults to /usr/local/pgsql.
			  Set DIR to "shared" to build as a dl, or "shared,DIR" 
                          to build as a dl and still specify DIR."
ac_help="$ac_help
  --disable-posix         Disable POSIX-like functions"
ac_help="$ac_help
  --with-pspell[=DIR]     Include PSPELL support."
ac_help="$ac_help
  --with-readline[=DIR]   Include readline support.  DIR is the readline
                          install directory."
ac_help="$ac_help
  --with-recode[=DIR]     Include recode support. DIR is the recode install
                          directory."
ac_help="$ac_help
  --with-mm[=DIR]         Include mm support for session storage"
ac_help="$ac_help
  --enable-trans-sid      Enable transparent session id propagation"
ac_help="$ac_help
  --disable-session       Disable session support"
ac_help="$ac_help
  --with-openssl[=DIR]    Include OpenSSL support in SNMP."
ac_help="$ac_help
  --with-snmp[=DIR]       Include SNMP support.  DIR is the SNMP base
                          install directory, defaults to searching through
                          a number of common locations for the snmp install.
                          Set DIR to "shared" to build as a dl, or "shared,DIR"
                          to build as a dl and still specify DIR."
ac_help="$ac_help
  --enable-ucd-snmp-hack  Enable UCD SNMP hack"
ac_help="$ac_help
  --enable-sockets           Enable sockets support"
ac_help="$ac_help
  --with-regex=TYPE       regex library type: system, apache, php"
ac_help="$ac_help
  --with-system-regex     (deprecated) Use system regex library"
ac_help="$ac_help
  --with-swf[=DIR]        Include swf support"
ac_help="$ac_help
  --with-sybase[=DIR]     Include Sybase-DB support.  DIR is the Sybase home
                          directory, defaults to /home/sybase."
ac_help="$ac_help
  --with-sybase-ct[=DIR]  Include Sybase-CT support.  DIR is the Sybase home
                          directory, defaults to /home/sybase."
ac_help="$ac_help
  --enable-sysvsem        Enable System V semaphore support."
ac_help="$ac_help
  --enable-sysvshm        Enable the System V shared memory support"
ac_help="$ac_help
  --enable-wddx           Enable WDDX support"
ac_help="$ac_help
"
ac_help="$ac_help
  --disable-xml           Disable XML support using bundled expat lib"
ac_help="$ac_help
  --with-yaz[=DIR]        Include YAZ support (ANSI/NISO Z39.50). DIR is
                          the YAZ bin install directory"
ac_help="$ac_help
  --enable-yp             Include YP support"
ac_help="$ac_help
  --with-zlib[=DIR]       Include zlib support (requires zlib >= 1.0.9).
                          DIR is the zlib install directory,
                          defaults to /usr."
ac_help="$ac_help
  --enable-versioning     Export only required symbols.
                          See INSTALL for more information"
ac_help="$ac_help
  --enable-c9x-inline     Enable C9x-inline semantics"
ac_help="$ac_help
  --enable-experimental-zts   This will most likely break your build"
ac_help="$ac_help
  --enable-inline-optimization   If you have much memory and are using
                                 gcc, you might try this."
ac_help="$ac_help
  --enable-memory-limit   Compile with memory limit support. "
ac_help="$ac_help
  --with-tsrm-pth[=pth-config]    Use GNU Pth."
ac_help="$ac_help
  --with-tsrm-pthreads    Use POSIX threads (default)"
ac_help="$ac_help
  --enable-shared[=PKGS]  build shared libraries [default=yes]"
ac_help="$ac_help
  --enable-static[=PKGS]  build static libraries [default=yes]"
ac_help="$ac_help
  --enable-fast-install[=PKGS]  optimize for fast installation [default=yes]"
ac_help="$ac_help
  --with-gnu-ld           assume the C compiler uses GNU ld [default=no]"
ac_help="$ac_help
  --disable-libtool-lock  avoid locking (might break parallel builds)"

# Initialize some variables set by options.
# The variables have the same names as the options, with
# dashes changed to underlines.
build=NONE
cache_file=./config.cache
exec_prefix=NONE
host=NONE
no_create=
nonopt=NONE
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
target=NONE
verbose=
x_includes=NONE
x_libraries=NONE
bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datadir='${prefix}/share'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
libdir='${exec_prefix}/lib'
includedir='${prefix}/include'
oldincludedir='/usr/include'
infodir='${prefix}/info'
mandir='${prefix}/man'

# Initialize some other variables.
subdirs=
MFLAGS= MAKEFLAGS=
SHELL=${CONFIG_SHELL-/bin/sh}
# Maximum number of lines to put in a shell here document.
ac_max_here_lines=12

ac_prev=
for ac_option
do

  # If the previous option needs an argument, assign it.
  if test -n "$ac_prev"; then
    eval "$ac_prev=\$ac_option"
    ac_prev=
    continue
  fi

  case "$ac_option" in
  -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) ac_optarg= ;;
  esac

  # Accept the important Cygnus configure options, so we can diagnose typos.

  case "$ac_option" in

  -bindir | --bindir | --bindi | --bind | --bin | --bi)
    ac_prev=bindir ;;
  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
    bindir="$ac_optarg" ;;

  -build | --build | --buil | --bui | --bu)
    ac_prev=build ;;
  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
    build="$ac_optarg" ;;

  -cache-file | --cache-file | --cache-fil | --cache-fi \
  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
    ac_prev=cache_file ;;
  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
    cache_file="$ac_optarg" ;;

  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
    ac_prev=datadir ;;
  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
  | --da=*)
    datadir="$ac_optarg" ;;

  -disable-* | --disable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    eval "enable_${ac_feature}=no" ;;

  -enable-* | --enable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "enable_${ac_feature}='$ac_optarg'" ;;

  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
  | --exec | --exe | --ex)
    ac_prev=exec_prefix ;;
  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
  | --exec=* | --exe=* | --ex=*)
    exec_prefix="$ac_optarg" ;;

  -gas | --gas | --ga | --g)
    # Obsolete; use --with-gas.
    with_gas=yes ;;

  -help | --help | --hel | --he)
    # Omit some internal or obsolete options to make the list less imposing.
    # This message is too long to be a string in the A/UX 3.1 sh.
    cat << EOF
Usage: configure [options] [host]
Options: [defaults in brackets after descriptions]
Configuration:
  --cache-file=FILE       cache test results in FILE
  --help                  print this message
  --no-create             do not create output files
  --quiet, --silent       do not print \`checking...' messages
  --version               print the version of autoconf that created configure
Directory and file names:
  --prefix=PREFIX         install architecture-independent files in PREFIX
                          [$ac_default_prefix]
  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                          [same as prefix]
  --bindir=DIR            user executables in DIR [EPREFIX/bin]
  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
  --datadir=DIR           read-only architecture-independent data in DIR
                          [PREFIX/share]
  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
  --sharedstatedir=DIR    modifiable architecture-independent data in DIR
                          [PREFIX/com]
  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
  --includedir=DIR        C header files in DIR [PREFIX/include]
  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
  --infodir=DIR           info documentation in DIR [PREFIX/info]
  --mandir=DIR            man documentation in DIR [PREFIX/man]
  --srcdir=DIR            find the sources in DIR [configure dir or ..]
  --program-prefix=PREFIX prepend PREFIX to installed program names
  --program-suffix=SUFFIX append SUFFIX to installed program names
  --program-transform-name=PROGRAM
                          run sed PROGRAM on installed program names
EOF
    cat << EOF
Host type:
  --build=BUILD           configure for building on BUILD [BUILD=HOST]
  --host=HOST             configure for HOST [guessed]
  --target=TARGET         configure for TARGET [TARGET=HOST]
Features and packages:
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
  --x-includes=DIR        X include files are in DIR
  --x-libraries=DIR       X library files are in DIR
EOF
    if test -n "$ac_help"; then
      echo "--enable and --with options recognized:$ac_help"
    fi
    exit 0 ;;

  -host | --host | --hos | --ho)
    ac_prev=host ;;
  -host=* | --host=* | --hos=* | --ho=*)
    host="$ac_optarg" ;;

  -includedir | --includedir | --includedi | --included | --include \
  | --includ | --inclu | --incl | --inc)
    ac_prev=includedir ;;
  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
  | --includ=* | --inclu=* | --incl=* | --inc=*)
    includedir="$ac_optarg" ;;

  -infodir | --infodir | --infodi | --infod | --info | --inf)
    ac_prev=infodir ;;
  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
    infodir="$ac_optarg" ;;

  -libdir | --libdir | --libdi | --libd)
    ac_prev=libdir ;;
  -libdir=* | --libdir=* | --libdi=* | --libd=*)
    libdir="$ac_optarg" ;;

  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
  | --libexe | --libex | --libe)
    ac_prev=libexecdir ;;
  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
  | --libexe=* | --libex=* | --libe=*)
    libexecdir="$ac_optarg" ;;

  -localstatedir | --localstatedir | --localstatedi | --localstated \
  | --localstate | --localstat | --localsta | --localst \
  | --locals | --local | --loca | --loc | --lo)
    ac_prev=localstatedir ;;
  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
    localstatedir="$ac_optarg" ;;

  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
    ac_prev=mandir ;;
  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
    mandir="$ac_optarg" ;;

  -nfp | --nfp | --nf)
    # Obsolete; use --without-fp.
    with_fp=no ;;

  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c)
    no_create=yes ;;

  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
    no_recursion=yes ;;

  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
  | --oldin | --oldi | --old | --ol | --o)
    ac_prev=oldincludedir ;;
  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
    oldincludedir="$ac_optarg" ;;

  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
    ac_prev=prefix ;;
  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
    prefix="$ac_optarg" ;;

  -program-prefix | --program-prefix | --program-prefi | --program-pref \
  | --program-pre | --program-pr | --program-p)
    ac_prev=program_prefix ;;
  -program-prefix=* | --program-prefix=* | --program-prefi=* \
  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
    program_prefix="$ac_optarg" ;;

  -program-suffix | --program-suffix | --program-suffi | --program-suff \
  | --program-suf | --program-su | --program-s)
    ac_prev=program_suffix ;;
  -program-suffix=* | --program-suffix=* | --program-suffi=* \
  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
    program_suffix="$ac_optarg" ;;

  -program-transform-name | --program-transform-name \
  | --program-transform-nam | --program-transform-na \
  | --program-transform-n | --program-transform- \
  | --program-transform | --program-transfor \
  | --program-transfo | --program-transf \
  | --program-trans | --program-tran \
  | --progr-tra | --program-tr | --program-t)
    ac_prev=program_transform_name ;;
  -program-transform-name=* | --program-transform-name=* \
  | --program-transform-nam=* | --program-transform-na=* \
  | --program-transform-n=* | --program-transform-=* \
  | --program-transform=* | --program-transfor=* \
  | --program-transfo=* | --program-transf=* \
  | --program-trans=* | --program-tran=* \
  | --progr-tra=* | --program-tr=* | --program-t=*)
    program_transform_name="$ac_optarg" ;;

  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
  | -silent | --silent | --silen | --sile | --sil)
    silent=yes ;;

  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
    ac_prev=sbindir ;;
  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
  | --sbi=* | --sb=*)
    sbindir="$ac_optarg" ;;

  -sharedstatedir | --sharedstatedir | --sharedstatedi \
  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
  | --sharedst | --shareds | --shared | --share | --shar \
  | --sha | --sh)
    ac_prev=sharedstatedir ;;
  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
  | --sha=* | --sh=*)
    sharedstatedir="$ac_optarg" ;;

  -site | --site | --sit)
    ac_prev=site ;;
  -site=* | --site=* | --sit=*)
    site="$ac_optarg" ;;

  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
    ac_prev=srcdir ;;
  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
    srcdir="$ac_optarg" ;;

  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
  | --syscon | --sysco | --sysc | --sys | --sy)
    ac_prev=sysconfdir ;;
  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
    sysconfdir="$ac_optarg" ;;

  -target | --target | --targe | --targ | --tar | --ta | --t)
    ac_prev=target ;;
  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
    target="$ac_optarg" ;;

  -v | -verbose | --verbose | --verbos | --verbo | --verb)
    verbose=yes ;;

  -version | --version | --versio | --versi | --vers)
    echo "configure generated by autoconf version 2.13"
    exit 0 ;;

  -with-* | --with-*)
    ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "with_${ac_package}='$ac_optarg'" ;;

  -without-* | --without-*)
    ac_package=`echo $ac_option|sed -e 's/-*without-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    eval "with_${ac_package}=no" ;;

  --x)
    # Obsolete; use --with-x.
    with_x=yes ;;

  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
  | --x-incl | --x-inc | --x-in | --x-i)
    ac_prev=x_includes ;;
  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
    x_includes="$ac_optarg" ;;

  -x-libraries | --x-libraries | --x-librarie | --x-librari \
  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
    ac_prev=x_libraries ;;
  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
    x_libraries="$ac_optarg" ;;

  -*) { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; exit 1; }
    ;;

  *)
    if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
      echo "configure: warning: $ac_option: invalid host type" 1>&2
    fi
    if test "x$nonopt" != xNONE; then
      { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; }
    fi
    nonopt="$ac_option"
    ;;

  esac
done

if test -n "$ac_prev"; then
  { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; exit 1; }
fi

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 6 checking for... messages and results
# 5 compiler messages saved in config.log
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi
exec 5>./config.log

echo "\
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.
" 1>&5

# Strip out --no-create and --no-recursion so they do not pile up.
# Also quote any args containing shell metacharacters.
ac_configure_args=
for ac_arg
do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# Only set these to C if already set.  These must not be set unconditionally
# because not all systems understand e.g. LANG=C (notably SCO).
# Fixing LC_MESSAGES prevents Solaris sh from translating var values in `set'!
# Non-C LC_CTYPE values break the ctype check.
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LC_MESSAGES+set}" = set; then LC_MESSAGES=C; export LC_MESSAGES; fi
if test "${LC_CTYPE+set}"    = set; then LC_CTYPE=C;    export LC_CTYPE;    fi

# confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf conftest* confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=README.CVS-RULES

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then its parent.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test "$ac_srcdir_defaulted" = yes; then
    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
  else
    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
  fi
fi
srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`

# Prefer explicitly selected file to automatically selected ones.
if test -z "$CONFIG_SITE"; then
  if test "x$prefix" != xNONE; then
    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
  else
    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
  fi
fi
for ac_site_file in $CONFIG_SITE; do
  if test -r "$ac_site_file"; then
    echo "loading site script $ac_site_file"
    . "$ac_site_file"
  fi
done

if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

ac_exeext=
ac_objext=o
if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi






  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES sapi/Makefile ext/Makefile Makefile pear/Makefile main/Makefile"


if test "$with_shared_apache" != "no" && test -n "$with_shared_apache" ; then
  { echo "configure: error: --with-shared-apache is not supported. Please refer to the documentation for using APXS" 1>&2; exit 1; }
fi

if test -n "$with_apache" && test -n "$with_apxs"; then
  { echo "configure: error: --with-apache and --with-apxs cannot be used together" 1>&2; exit 1; }
fi

cwd=`pwd`


  rm -f config.nice
  cat >config.nice<<EOF
#! /bin/sh
#
# Created by configure

EOF

  for arg in $0 "$@"; do
    echo "\"$arg\" \\" >> config.nice
  done
  echo '"$@"' >> config.nice
  chmod +x config.nice


for arg in $0 "$@"; do
    CONFIGURE_COMMAND="$CONFIGURE_COMMAND '$arg'"
done

php_shtool="$srcdir/build/shtool"
T_MD=`$php_shtool echo -n -e %B`
T_ME=`$php_shtool echo -n -e %b`


$php_shtool mkdir -p libs
rm -f libs/*





ac_aux_dir=
for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
  if test -f $ac_dir/install-sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f $ac_dir/install.sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  { echo "configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." 1>&2; exit 1; }
fi
ac_config_guess=$ac_aux_dir/config.guess
ac_config_sub=$ac_aux_dir/config.sub
ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.

# Find a good install program.  We prefer a C program (faster),
# so one script is as good as another.  But avoid the broken or
# incompatible versions:
# SysV /etc/install, /usr/sbin/install
# SunOS /usr/etc/install
# IRIX /sbin/install
# AIX /bin/install
# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
# AFS /usr/afsws/bin/install, which mishandles nonexistent args
# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
# ./install, which can be erroneously created by make from ./install.sh.
echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
echo "configure:1273: checking for a BSD compatible install" >&5
if test -z "$INSTALL"; then
if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
  for ac_dir in $PATH; do
    # Account for people who put trailing slashes in PATH elements.
    case "$ac_dir/" in
    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
    *)
      # OSF1 and SCO ODT 3.0 have their own names for install.
      # Don't use installbsd from OSF since it installs stuff as root
      # by default.
      for ac_prog in ginstall scoinst install; do
        if test -f $ac_dir/$ac_prog; then
	  if test $ac_prog = install &&
            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
	    # AIX install.  It has an incompatible calling convention.
	    :
	  else
	    ac_cv_path_install="$ac_dir/$ac_prog -c"
	    break 2
	  fi
	fi
      done
      ;;
    esac
  done
  IFS="$ac_save_IFS"

fi
  if test "${ac_cv_path_install+set}" = set; then
    INSTALL="$ac_cv_path_install"
  else
    # As a last resort, use the slow shell script.  We don't cache a
    # path for INSTALL within a source directory, because that will
    # break other packages using the cache if that directory is
    # removed, or if the path is relative.
    INSTALL="$ac_install_sh"
  fi
fi
echo "$ac_t""$INSTALL" 1>&6

# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
# It thinks the first close brace ends the variable substitution.
test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'

test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'

test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'

echo $ac_n "checking whether build environment is sane""... $ac_c" 1>&6
echo "configure:1326: checking whether build environment is sane" >&5
# Just in case
sleep 1
echo timestamp > conftestfile
# Do `set' in a subshell so we don't clobber the current shell's
# arguments.  Must try -L first in case configure is actually a
# symlink; some systems play weird games with the mod time of symlinks
# (eg FreeBSD returns the mod time of the symlink's containing
# directory).
if (
   set X `ls -Lt $srcdir/configure conftestfile 2> /dev/null`
   if test "$*" = "X"; then
      # -L didn't work.
      set X `ls -t $srcdir/configure conftestfile`
   fi
   if test "$*" != "X $srcdir/configure conftestfile" \
      && test "$*" != "X conftestfile $srcdir/configure"; then

      # If neither matched, then we have a broken ls.  This can happen
      # if, for instance, CONFIG_SHELL is bash and it inherits a
      # broken ls alias from the environment.  This has actually
      # happened.  Such a system could not be considered "sane".
      { echo "configure: error: ls -t appears to fail.  Make sure there is not a broken
alias in your environment" 1>&2; exit 1; }
   fi

   test "$2" = conftestfile
   )
then
   # Ok.
   :
else
   { echo "configure: error: newly created file is older than distributed files!
Check your system clock" 1>&2; exit 1; }
fi
rm -f conftest*
echo "$ac_t""yes" 1>&6
if test "$program_transform_name" = s,x,x,; then
  program_transform_name=
else
  # Double any \ or $.  echo might interpret backslashes.
  cat <<\EOF_SED > conftestsed
s,\\,\\\\,g; s,\$,$$,g
EOF_SED
  program_transform_name="`echo $program_transform_name|sed -f conftestsed`"
  rm -f conftestsed
fi
test "$program_prefix" != NONE &&
  program_transform_name="s,^,${program_prefix},; $program_transform_name"
# Use a double $ so make ignores it.
test "$program_suffix" != NONE &&
  program_transform_name="s,\$\$,${program_suffix},; $program_transform_name"

# sed with no file args requires a program.
test "$program_transform_name" = "" && program_transform_name="s,x,x,"

echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
echo "configure:1383: checking whether ${MAKE-make} sets \${MAKE}" >&5
set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftestmake <<\EOF
all:
	@echo 'ac_maketemp="${MAKE}"'
EOF
# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
eval `${MAKE-make} -f conftestmake 2>/dev/null | grep temp=`
if test -n "$ac_maketemp"; then
  eval ac_cv_prog_make_${ac_make}_set=yes
else
  eval ac_cv_prog_make_${ac_make}_set=no
fi
rm -f conftestmake
fi
if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  SET_MAKE=
else
  echo "$ac_t""no" 1>&6
  SET_MAKE="MAKE=${MAKE-make}"
fi


PACKAGE=php

VERSION=4.0.2

if test "`cd $srcdir && pwd`" != "`pwd`" && test -f $srcdir/config.status; then
  { echo "configure: error: source directory already configured; run "make distclean" there first" 1>&2; exit 1; }
fi
cat >> confdefs.h <<EOF
#define PACKAGE "$PACKAGE"
EOF

cat >> confdefs.h <<EOF
#define VERSION "$VERSION"
EOF



missing_dir=`cd $ac_aux_dir && pwd`
echo $ac_n "checking for working aclocal""... $ac_c" 1>&6
echo "configure:1429: checking for working aclocal" >&5
# Run test in a subshell; some versions of sh will print an error if
# an executable is not found, even if stderr is redirected.
# Redirect stdin to placate older versions of autoconf.  Sigh.
if (aclocal --version) < /dev/null > /dev/null 2>&1; then
   ACLOCAL=aclocal
   echo "$ac_t""found" 1>&6
else
   ACLOCAL="$missing_dir/missing aclocal"
   echo "$ac_t""missing" 1>&6
fi

echo $ac_n "checking for working autoconf""... $ac_c" 1>&6
echo "configure:1442: checking for working autoconf" >&5
# Run test in a subshell; some versions of sh will print an error if
# an executable is not found, even if stderr is redirected.
# Redirect stdin to placate older versions of autoconf.  Sigh.
if (autoconf --version) < /dev/null > /dev/null 2>&1; then
   AUTOCONF=autoconf
   echo "$ac_t""found" 1>&6
else
   AUTOCONF="$missing_dir/missing autoconf"
   echo "$ac_t""missing" 1>&6
fi

echo $ac_n "checking for working automake""... $ac_c" 1>&6
echo "configure:1455: checking for working automake" >&5
# Run test in a subshell; some versions of sh will print an error if
# an executable is not found, even if stderr is redirected.
# Redirect stdin to placate older versions of autoconf.  Sigh.
if (automake --version) < /dev/null > /dev/null 2>&1; then
   AUTOMAKE=automake
   echo "$ac_t""found" 1>&6
else
   AUTOMAKE="$missing_dir/missing automake"
   echo "$ac_t""missing" 1>&6
fi

echo $ac_n "checking for working autoheader""... $ac_c" 1>&6
echo "configure:1468: checking for working autoheader" >&5
# Run test in a subshell; some versions of sh will print an error if
# an executable is not found, even if stderr is redirected.
# Redirect stdin to placate older versions of autoconf.  Sigh.
if (autoheader --version) < /dev/null > /dev/null 2>&1; then
   AUTOHEADER=autoheader
   echo "$ac_t""found" 1>&6
else
   AUTOHEADER="$missing_dir/missing autoheader"
   echo "$ac_t""missing" 1>&6
fi

echo $ac_n "checking for working makeinfo""... $ac_c" 1>&6
echo "configure:1481: checking for working makeinfo" >&5
# Run test in a subshell; some versions of sh will print an error if
# an executable is not found, even if stderr is redirected.
# Redirect stdin to placate older versions of autoconf.  Sigh.
if (makeinfo --version) < /dev/null > /dev/null 2>&1; then
   MAKEINFO=makeinfo
   echo "$ac_t""found" 1>&6
else
   MAKEINFO="$missing_dir/missing makeinfo"
   echo "$ac_t""missing" 1>&6
fi



PHP_VERSION=$VERSION
echo "/* automatically generated by configure */" > php_version.h.new
echo "/* edit configure.in to change version number */" >> php_version.h.new
echo "#define PHP_VERSION \"$PHP_VERSION\"" >> php_version.h.new
cmp php_version.h.new php_version.h >/dev/null 2>&1
if test $? -ne 0 ; then
    rm -f php_version.h && mv php_version.h.new php_version.h && \
    echo 'Updated php_version.h'
else
	rm -f php_version.h.new
fi




echo $ac_n "checking whether to enable maintainer-specific portions of Makefiles""... $ac_c" 1>&6
echo "configure:1511: checking whether to enable maintainer-specific portions of Makefiles" >&5
    # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.
if test "${enable_maintainer_mode+set}" = set; then
  enableval="$enable_maintainer_mode"
  USE_MAINTAINER_MODE=$enableval
else
  USE_MAINTAINER_MODE=no
fi

  echo "$ac_t""$USE_MAINTAINER_MODE" 1>&6
  

if test $USE_MAINTAINER_MODE = yes; then
  MAINTAINER_MODE_TRUE=
  MAINTAINER_MODE_FALSE='#'
else
  MAINTAINER_MODE_TRUE='#'
  MAINTAINER_MODE_FALSE=
fi
  MAINT=$MAINTAINER_MODE_TRUE
  


# Make sure we can run config.sub.
if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
fi

echo $ac_n "checking host system type""... $ac_c" 1>&6
echo "configure:1540: checking host system type" >&5

host_alias=$host
case "$host_alias" in
NONE)
  case $nonopt in
  NONE)
    if host_alias=`${CONFIG_SHELL-/bin/sh} $ac_config_guess`; then :
    else { echo "configure: error: can not guess host type; you must specify one" 1>&2; exit 1; }
    fi ;;
  *) host_alias=$nonopt ;;
  esac ;;
esac

host=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $host_alias`
host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$host" 1>&6


test -z "$CFLAGS" && auto_cflags=1

for ac_prog in gawk mawk nawk awk
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1568: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_AWK'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$AWK"; then
  ac_cv_prog_AWK="$AWK" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_AWK="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
AWK="$ac_cv_prog_AWK"
if test -n "$AWK"; then
  echo "$ac_t""$AWK" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$AWK" && break
done

for ac_prog in 'bison -y' byacc
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1602: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_YACC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$YACC"; then
  ac_cv_prog_YACC="$YACC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_YACC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
YACC="$ac_cv_prog_YACC"
if test -n "$YACC"; then
  echo "$ac_t""$YACC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$YACC" && break
done
test -n "$YACC" || YACC="yacc"

if test "$YACC" != "bison -y"; then
    echo "configure: warning: You will need bison if you want to regenerate the PHP parsers." 1>&2
else
    echo $ac_n "checking bison version""... $ac_c" 1>&6
echo "configure:1636: checking bison version" >&5
    oldIFS=$IFS; IFS=.
    set `bison -V | sed -e 's/^GNU Bison version //'`
    IFS=$oldIFS
    if test "$1" = "1" -a "$2" -lt "25"; then
        echo "configure: warning: Bison 1.25 or newer needed to regenerate parsers (found $1.$2)." 1>&2
    fi
    echo "$ac_t""$1.$2 (ok)" 1>&6
fi

# Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1649: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1679: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_prog_rejected=no
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  if test -z "$CC"; then
    case "`uname -s`" in
    *win32* | *WIN32*)
      # Extract the first word of "cl", so it can be a program name with args.
set dummy cl; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:1730: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="cl"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
 ;;
    esac
  fi
  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:1762: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

cat > conftest.$ac_ext << EOF

#line 1773 "configure"
#include "confdefs.h"

main(){return(0);}
EOF
if { (eval echo configure:1778: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cc_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cc_cross=no
  else
    ac_cv_prog_cc_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cc_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
if test $ac_cv_prog_cc_works = no; then
  { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:1804: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
cross_compiling=$ac_cv_prog_cc_cross

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
echo "configure:1809: checking whether we are using GNU C" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1818: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6

if test $ac_cv_prog_gcc = yes; then
  GCC=yes
else
  GCC=
fi

ac_test_CFLAGS="${CFLAGS+set}"
ac_save_CFLAGS="$CFLAGS"
CFLAGS=
echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
echo "configure:1837: checking whether ${CC-cc} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.c
if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
  ac_cv_prog_cc_g=yes
else
  ac_cv_prog_cc_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cc_g" 1>&6
if test "$ac_test_CFLAGS" = set; then
  CFLAGS="$ac_save_CFLAGS"
elif test $ac_cv_prog_cc_g = yes; then
  if test "$GCC" = yes; then
    CFLAGS="-g -O2"
  else
    CFLAGS="-g"
  fi
else
  if test "$GCC" = yes; then
    CFLAGS="-O2"
  else
    CFLAGS=
  fi
fi

echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
echo "configure:1869: checking how to run the C preprocessor" >&5
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > conftest.$ac_ext <<EOF
#line 1884 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:1890: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > conftest.$ac_ext <<EOF
#line 1901 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:1907: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP="${CC-cc} -nologo -E"
  cat > conftest.$ac_ext <<EOF
#line 1918 "configure"
#include "confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:1924: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CPP=/lib/cpp
fi
rm -f conftest*
fi
rm -f conftest*
fi
rm -f conftest*
  ac_cv_prog_CPP="$CPP"
fi
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6

echo $ac_n "checking for AIX""... $ac_c" 1>&6
echo "configure:1949: checking for AIX" >&5
cat > conftest.$ac_ext <<EOF
#line 1951 "configure"
#include "confdefs.h"
#ifdef _AIX
  yes
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf conftest*
  echo "$ac_t""yes" 1>&6; cat >> confdefs.h <<\EOF
#define _ALL_SOURCE 1
EOF

else
  rm -rf conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f conftest*



case "$host_alias" in
*solaris*)
    CPPFLAGS="$CPPFLAGS -D_POSIX_PTHREAD_SEMANTICS";;
*dgux*)
    CPPFLAGS="$CPPFLAGS -D_BSD_TIMEOFDAY_FLAVOR";;
*darwin*|*rhapsody*)
    CPPFLAGS="$CPPFLAGS -traditional-cpp";;
esac




echo $ac_n "checking for ${CC-cc} option to accept ANSI C""... $ac_c" 1>&6
echo "configure:1986: checking for ${CC-cc} option to accept ANSI C" >&5
if eval "test \"`echo '$''{'am_cv_prog_cc_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  am_cv_prog_cc_stdc=no
ac_save_CC="$CC"
# Don't try gcc -ansi; that turns off useful extensions and
# breaks some systems' header files.
# AIX			-qlanglvl=ansi
# Ultrix and OSF/1	-std1
# HP-UX			-Aa -D_HPUX_SOURCE
# SVR4			-Xc -D__EXTENSIONS__
for ac_arg in "" -qlanglvl=ansi -std1 "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
do
  CC="$ac_save_CC $ac_arg"
  cat > conftest.$ac_ext <<EOF
#line 2002 "configure"
#include "confdefs.h"
#include <stdarg.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
struct buf { int x; };
FILE * (*rcsopen) (struct buf *, struct stat *, int);
static char *e (p, i)
     char **p;
     int i;
{
  return p[i];
}
static char *f (char * (*g) (char **, int), char **p, ...)
{
  char *s;
  va_list v;
  va_start (v,p);
  s = g (p, va_arg (v,int));
  va_end (v);
  return s;
}
int test (int i, double x);
struct s1 {int (*f) (int a);};
struct s2 {int (*f) (double a);};
int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
int argc;
char **argv;

int main() {

return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];

; return 0; }
EOF
if { (eval echo configure:2039: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  am_cv_prog_cc_stdc="$ac_arg"; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done
CC="$ac_save_CC"

fi

if test -z "$am_cv_prog_cc_stdc"; then
  echo "$ac_t""none needed" 1>&6
else
  echo "$ac_t""$am_cv_prog_cc_stdc" 1>&6
fi
case "x$am_cv_prog_cc_stdc" in
  x|xno) ;;
  *) CC="$CC $am_cv_prog_cc_stdc" ;;
esac


# Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2066: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test "x$CC" != xcc; then
  echo $ac_n "checking whether $CC and cc understand -c and -o together""... $ac_c" 1>&6
echo "configure:2095: checking whether $CC and cc understand -c and -o together" >&5
else
  echo $ac_n "checking whether cc understands -c and -o together""... $ac_c" 1>&6
echo "configure:2098: checking whether cc understands -c and -o together" >&5
fi
set dummy $CC; ac_cc="`echo $2 |
		       sed -e 's/[^a-zA-Z0-9_]/_/g' -e 's/^[0-9]/_/'`"
if eval "test \"`echo '$''{'ac_cv_prog_cc_${ac_cc}_c_o'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'foo(){}' > conftest.c
# Make sure it works both with $CC and with simple cc.
# We do the test twice because some compilers refuse to overwrite an
# existing .o file with -o, though they will create one.
ac_try='${CC-cc} -c conftest.c -o conftest.o 1>&5'
if { (eval echo configure:2110: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
   test -f conftest.o && { (eval echo configure:2111: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
then
  eval ac_cv_prog_cc_${ac_cc}_c_o=yes
  if test "x$CC" != xcc; then
    # Test first that cc exists at all.
    if { ac_try='cc -c conftest.c 1>&5'; { (eval echo configure:2116: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; }; then
      ac_try='cc -c conftest.c -o conftest.o 1>&5'
      if { (eval echo configure:2118: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; } &&
	 test -f conftest.o && { (eval echo configure:2119: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; };
      then
        # cc works too.
        :
      else
        # cc exists but doesn't like -o.
        eval ac_cv_prog_cc_${ac_cc}_c_o=no
      fi
    fi
  fi
else
  eval ac_cv_prog_cc_${ac_cc}_c_o=no
fi
rm -f conftest*

fi
if eval "test \"`echo '$ac_cv_prog_cc_'${ac_cc}_c_o`\" = yes"; then
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
  cat >> confdefs.h <<\EOF
#define NO_MINUS_C_MINUS_O 1
EOF

fi

echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
echo "configure:2146: checking whether ln -s works" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  rm -f conftestdata
if ln -s X conftestdata 2>/dev/null
then
  rm -f conftestdata
  ac_cv_prog_LN_S="ln -s"
else
  ac_cv_prog_LN_S=ln
fi
fi
LN_S="$ac_cv_prog_LN_S"
if test "$ac_cv_prog_LN_S" = "ln -s"; then
  echo "$ac_t""yes" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


missing_dir=`cd $ac_aux_dir && pwd`
for ac_prog in flex lex
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2173: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LEX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LEX"; then
  ac_cv_prog_LEX="$LEX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LEX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
LEX="$ac_cv_prog_LEX"
if test -n "$LEX"; then
  echo "$ac_t""$LEX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$LEX" && break
done
test -n "$LEX" || LEX=""$missing_dir/missing flex""

# Extract the first word of "flex", so it can be a program name with args.
set dummy flex; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:2206: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_LEX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$LEX"; then
  ac_cv_prog_LEX="$LEX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_LEX="flex"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_LEX" && ac_cv_prog_LEX="lex"
fi
fi
LEX="$ac_cv_prog_LEX"
if test -n "$LEX"; then
  echo "$ac_t""$LEX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$LEXLIB"
then
  case "$LEX" in
  flex*) ac_lib=fl ;;
  *) ac_lib=l ;;
  esac
  echo $ac_n "checking for yywrap in -l$ac_lib""... $ac_c" 1>&6
echo "configure:2240: checking for yywrap in -l$ac_lib" >&5
ac_lib_var=`echo $ac_lib'_'yywrap | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$ac_lib  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 2248 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char yywrap();

int main() {
yywrap()
; return 0; }
EOF
if { (eval echo configure:2259: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LEXLIB="-l$ac_lib"
else
  echo "$ac_t""no" 1>&6
fi

fi

echo $ac_n "checking lex output file root""... $ac_c" 1>&6
echo "configure:2282: checking lex output file root" >&5
if eval "test \"`echo '$''{'ac_cv_prog_lex_root'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # The minimal lex program is just a single line: %%.  But some broken lexes
# (Solaris, I think it was) want two %% lines, so accommodate them.
echo '%%
%%' | $LEX
if test -f lex.yy.c; then
  ac_cv_prog_lex_root=lex.yy
elif test -f lexyy.c; then
  ac_cv_prog_lex_root=lexyy
else
  { echo "configure: error: cannot find output from $LEX; giving up" 1>&2; exit 1; }
fi
fi

echo "$ac_t""$ac_cv_prog_lex_root" 1>&6
LEX_OUTPUT_ROOT=$ac_cv_prog_lex_root

echo $ac_n "checking whether yytext is a pointer""... $ac_c" 1>&6
echo "configure:2303: checking whether yytext is a pointer" >&5
if eval "test \"`echo '$''{'ac_cv_prog_lex_yytext_pointer'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # POSIX says lex can declare yytext either as a pointer or an array; the
# default is implementation-dependent. Figure out which it is, since
# not all implementations provide the %pointer and %array declarations.
ac_cv_prog_lex_yytext_pointer=no
echo 'extern char *yytext;' >>$LEX_OUTPUT_ROOT.c
ac_save_LIBS="$LIBS"
LIBS="$LIBS $LEXLIB"
cat > conftest.$ac_ext <<EOF
#line 2315 "configure"
#include "confdefs.h"
`cat $LEX_OUTPUT_ROOT.c`
int main() {

; return 0; }
EOF
if { (eval echo configure:2322: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_prog_lex_yytext_pointer=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
LIBS="$ac_save_LIBS"
rm -f "${LEX_OUTPUT_ROOT}.c"

fi

echo "$ac_t""$ac_cv_prog_lex_yytext_pointer" 1>&6
if test $ac_cv_prog_lex_yytext_pointer = yes; then
  cat >> confdefs.h <<\EOF
#define YYTEXT_POINTER 1
EOF

fi


echo $ac_n "checking for working const""... $ac_c" 1>&6
echo "configure:2345: checking for working const" >&5
if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 2350 "configure"
#include "confdefs.h"

int main() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:2399: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_const=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_const=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  cat >> confdefs.h <<\EOF
#define const 
EOF

fi

if test "$ac_cv_c_const" = "yes" ; then
  LEX_CFLAGS="-DYY_USE_CONST"
fi

abs_srcdir=`(cd $srcdir; pwd)`
abs_builddir=`pwd`

























































save_CFLAGS="$CFLAGS"
save_LIBS="$LIBS"

if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi


if test "$cross_compiling" = yes; then
  pthreads_working="no" 
else
  cat > conftest.$ac_ext <<EOF
#line 2498 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:2516: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
   
  pthreads_working="yes"
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working="no"
  
fi
rm -fr conftest*
fi
  
LIBS="$save_LIBS"
CFLAGS="$save_CFLAGS"

echo $ac_n "checking for pthreads_cflags""... $ac_c" 1>&6
echo "configure:2536: checking for pthreads_cflags" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_cflags'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_cv_pthreads_cflags=""
if test "$pthreads_working" != "yes"; then
  for flag in -kthread -pthread -pthreads -mthreads -Kthread -threads -mt -qthreaded; do 
    ac_save="$CFLAGS"
    CFLAGS="$CFLAGS $flag"
    
if test "$cross_compiling" = yes; then
  pthreads_working="no" 
else
  cat > conftest.$ac_ext <<EOF
#line 2551 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:2569: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
   
  pthreads_working="yes"
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working="no"
  
fi
rm -fr conftest*
fi
  
    CFLAGS="$ac_save"
    if test "$pthreads_working" = "yes"; then
      ac_cv_pthreads_cflags="$flag"
      break
    fi
  done
fi

fi

echo "$ac_t""$ac_cv_pthreads_cflags" 1>&6

echo $ac_n "checking for pthreads_lib""... $ac_c" 1>&6
echo "configure:2598: checking for pthreads_lib" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_lib'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_cv_pthreads_lib=""
if test "$pthreads_working" != "yes"; then
  for lib in pthread pthreads c_r; do
    ac_save="$LIBS"
    LIBS="$LIBS -l$lib"
    
if test "$cross_compiling" = yes; then
  pthreads_working="no" 
else
  cat > conftest.$ac_ext <<EOF
#line 2613 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:2631: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
   
  pthreads_working="yes"
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working="no"
  
fi
rm -fr conftest*
fi
  
    LIBS="$ac_save"
    if test "$pthreads_working" = "yes"; then
      ac_cv_pthreads_lib="$lib"
      break
    fi
  done
fi

fi

echo "$ac_t""$ac_cv_pthreads_lib" 1>&6

if test "$pthreads_working" = "yes"; then
  threads_result="POSIX Threads found"
else
  threads_result="POSIX Threads not found"
fi



  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SHLIB_SUFFIX_NAME"
  

  SHLIB_SUFFIX_NAME=so
  case "$host_alias" in
  *hpux*)
	SHLIB_SUFFIX_NAME=sl
	;;
  esac


PHP_SAPI=cgi

  php_build_target=program

SAPI_PROGRAM=php
SAPI_SHARED=libs/libphp4.$SHLIB_SUFFIX_NAME
SAPI_STATIC=libs/libphp4.a


  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring SAPI modules${T_ME}" 1>&6



# Check whether --with-aolserver-src or --without-aolserver-src was given.
if test "${with_aolserver_src+set}" = set; then
  withval="$with_aolserver_src"
  
  PHP_AOLSERVER_SRC=$withval

fi


echo $ac_n "checking for AOLserver support""... $ac_c" 1>&6
echo "configure:2703: checking for AOLserver support" >&5
# Check whether --with-aolserver or --without-aolserver was given.
if test "${with_aolserver+set}" = set; then
  withval="$with_aolserver"
  
  PHP_AOLSERVER=$withval

else
  
  PHP_AOLSERVER=no

fi

echo "$ac_t""$PHP_AOLSERVER" 1>&6

if test "$PHP_AOLSERVER" != "no"; then
  if test -d "$PHP_AOLSERVER/include"; then
    PHP_AOLSERVER_SRC="$PHP_AOLSERVER"
  fi
  if test -z "$PHP_AOLSERVER_SRC" || test ! -d $PHP_AOLSERVER_SRC/include; then
    { echo "configure: error: Please specify the path to the source distribution of AOLserver using --with-aolserver-src=DIR" 1>&2; exit 1; }
  fi
  if test ! -d $PHP_AOLSERVER/bin ; then
    { echo "configure: error: Please specify the path to the root of AOLserver using --with-aolserver=DIR" 1>&2; exit 1; }
  fi
  
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. Your system does not support this." 1>&2; exit 1; }
  fi

  
  if test "$PHP_AOLSERVER_SRC/include" != "/usr/include"; then
    
  if test -z "$PHP_AOLSERVER_SRC/include" || echo "$PHP_AOLSERVER_SRC/include" | grep '^/' >/dev/null ; then
    ai_p="$PHP_AOLSERVER_SRC/include"
  else
    
    ep_dir="`echo $PHP_AOLSERVER_SRC/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_AOLSERVER_SRC/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_AOLSERVER 1
EOF

  PHP_SAPI=aolserver
  
  php_build_target=shared

  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PHP_AOLSERVER/bin/"
fi





echo $ac_n "checking for Apache module support via DSO through APXS""... $ac_c" 1>&6
echo "configure:2777: checking for Apache module support via DSO through APXS" >&5
# Check whether --with-apxs or --without-apxs was given.
if test "${with_apxs+set}" = set; then
  withval="$with_apxs"
  
	if test "$withval" = "yes"; then
		APXS=apxs
                if $APXS -q CFLAGS >/dev/null 2>&1; then
                  :
                else
                  if test -x /usr/sbin/apxs ; then #SUSE 6.x 
                    APXS=/usr/sbin/apxs
                  fi
                fi
	else
		
  if test -z "$withval" || echo "$withval" | grep '^/' >/dev/null ; then
    APXS="$withval"
  else
    
    ep_dir="`echo $withval|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    APXS="$ep_realdir/`basename \"$withval\"`"
  fi

	fi

    if $APXS -q CFLAGS >/dev/null 2>&1; then
      :
    else
      echo "$ac_t""" 1>&6
      $APXS
      { echo "configure: error: Sorry, I cannot run apxs. Either you need to install Perl or you need to pass the absolute path of apxs by using --with-apxs=/absolute/path/to/apxs" 1>&2; exit 1; }
    fi 

	APXS_LDFLAGS="@SYBASE_LFLAGS@ @SYBASE_LIBS@ @SYBASE_CT_LFLAGS@ @SYBASE_CT_LIBS@"
	APXS_INCLUDEDIR=`$APXS -q INCLUDEDIR`
	APXS_CFLAGS=`$APXS -q CFLAGS`
	
  if test "$APXS_INCLUDEDIR" != "/usr/include"; then
    
  if test -z "$APXS_INCLUDEDIR" || echo "$APXS_INCLUDEDIR" | grep '^/' >/dev/null ; then
    ai_p="$APXS_INCLUDEDIR"
  else
    
    ep_dir="`echo $APXS_INCLUDEDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$APXS_INCLUDEDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

	if `echo $APXS_CFLAGS|grep USE_HSREGEX>/dev/null`; then
		APACHE_HAS_REGEX=yes
	fi
	if `echo $APXS_CFLAGS|grep EAPI>/dev/null`; then
	   CPPFLAGS="$CPPFLAGS -DEAPI=1"
	fi
	PHP_SAPI=apache
	APACHE_INSTALL="$APXS -i -a -n php4 $SAPI_SHARED"
	
  php_build_target=shared

	if test -z "`$APXS -q LD_SHLIB`" || test "`$APXS -q LIBEXECDIR`" = "modules"; then
		PHP_APXS_BROKEN=yes
	fi
	STRONGHOLD=
	cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

	cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

	echo "$ac_t""yes" 1>&6

else
  
	echo "$ac_t""no" 1>&6

fi


APACHE_INSTALL_FILES="\$(srcdir)/sapi/apache/mod_php4.* sapi/apache/libphp4.module"

if test "$PHP_SAPI" != "apache"; then
echo $ac_n "checking for Apache module support""... $ac_c" 1>&6
echo "configure:2879: checking for Apache module support" >&5
# Check whether --with-apache or --without-apache was given.
if test "${with_apache+set}" = set; then
  withval="$with_apache"
  
	if test "$withval" = "yes"; then
	  # Apache's default directory
	  withval=/usr/local/apache
	fi
	if test "$withval" != "no"; then
		APACHE_MODULE=yes
		
  if test -z "$withval" || echo "$withval" | grep '^/' >/dev/null ; then
    withval="$withval"
  else
    
    ep_dir="`echo $withval|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    withval="$ep_realdir/`basename \"$withval\"`"
  fi

		# For Apache 1.2.x
		if test -f $withval/src/httpd.h; then 
			APACHE_INCLUDE=-I$withval/src
			APACHE_TARGET=$withval/src
			PHP_SAPI=apache
			APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_INSTALL_FILES $APACHE_TARGET"
			PHP_LIBS="-L. -lphp3"
			echo "$ac_t""yes - Apache 1.2.x" 1>&6
			STRONGHOLD=
			if test -f $withval/src/ap_config.h; then
				cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

			fi
		# For Apache 2.0.x
		elif test -f $withval/src/include/httpd.h &&
		     test -f $withval/src/lib/apr/include/apr_general.h ; then
			APACHE_HAS_REGEX=1
			APACHE_INCLUDE="-I$withval/src/include -I$withval/src/os/unix -I$withval/src/lib/apr/include"
			APACHE_TARGET=$withval/src/modules/php4
			if test ! -d $APACHE_TARGET; then
				mkdir $APACHE_TARGET
			fi
			PHP_SAPI=apache
			APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp4.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
			PHP_LIBS="-Lmodules/php4 -L../modules/php4 -L../../modules/php4 -lmodphp4"
			echo "$ac_t""yes - Apache 2.0.X" 1>&6
			STRONGHOLD=
			if test -f $withval/src/include/ap_config.h; then
				cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

			fi
			if test -f $withval/src/include/ap_compat.h; then
				cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

				if test ! -f $withval/src/include/ap_config_auto.h; then
					{ echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
				fi
			else
				if test -f $withval/src/include/compat.h; then
					cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

				fi
			fi
		# For Apache 1.3.x
		elif test -f $withval/src/main/httpd.h; then
			APACHE_HAS_REGEX=1
			APACHE_INCLUDE="-I$withval/src/main -I$withval/src/os/unix -I$withval/src/ap"
			APACHE_TARGET=$withval/src/modules/php4
			if test ! -d $APACHE_TARGET; then
				mkdir $APACHE_TARGET
			fi
			PHP_SAPI=apache
			APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp4.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
			PHP_LIBS="-Lmodules/php4 -L../modules/php4 -L../../modules/php4 -lmodphp4"
			echo "$ac_t""yes - Apache 1.3.x" 1>&6
			STRONGHOLD=
			if test -f $withval/src/include/ap_config.h; then
				cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

			fi
			if test -f $withval/src/include/ap_compat.h; then
				cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

				if test ! -f $withval/src/include/ap_config_auto.h; then
					{ echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
				fi
			else
				if test -f $withval/src/include/compat.h; then
					cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

				fi
			fi
		# Also for Apache 1.3.x
		elif test -f $withval/src/include/httpd.h; then
			APACHE_HAS_REGEX=1
			APACHE_INCLUDE="-I$withval/src/include -I$withval/src/os/unix"
			APACHE_TARGET=$withval/src/modules/php4
			if test ! -d $APACHE_TARGET; then
				mkdir $APACHE_TARGET
			fi
			PHP_SAPI=apache
			PHP_LIBS="-Lmodules/php4 -L../modules/php4 -L../../modules/php4 -lmodphp4"
			APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp4.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET; cp $srcdir/sapi/apache/apMakefile.tmpl $APACHE_TARGET/Makefile.tmpl; cp $srcdir/sapi/apache/apMakefile.libdir $APACHE_TARGET/Makefile.libdir"
			echo "$ac_t""yes - Apache 1.3.x" 1>&6
			STRONGHOLD=
			if test -f $withval/src/include/ap_config.h; then
				cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

			fi
			if test -f $withval/src/include/ap_compat.h; then
				cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

				if test ! -f $withval/src/include/ap_config_auto.h; then
					{ echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
				fi
			else
				if test -f $withval/src/include/compat.h; then
					cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

				fi
			fi
		# For StrongHold 2.2
		elif test -f $withval/apache/httpd.h; then
			APACHE_INCLUDE=-"I$withval/apache -I$withval/ssl/include"
			APACHE_TARGET=$withval/apache
			PHP_SAPI=apache
			PHP_LIBS="-Lmodules/php4 -L../modules/php4 -L../../modules/php4 -lmodphp4"
			APACHE_INSTALL="mkdir -p $APACHE_TARGET; cp $SAPI_STATIC $APACHE_TARGET/libmodphp4.a; cp $APACHE_INSTALL_FILES $APACHE_TARGET"
			STRONGHOLD=-DSTRONGHOLD=1
			echo "$ac_t""yes - StrongHold" 1>&6
			if test -f $withval/apache/ap_config.h; then
				cat >> confdefs.h <<\EOF
#define HAVE_AP_CONFIG_H 1
EOF

			fi
			if test -f $withval/src/ap_compat.h; then
				cat >> confdefs.h <<\EOF
#define HAVE_AP_COMPAT_H 1
EOF

				if test ! -f $withval/src/include/ap_config_auto.h; then
					{ echo "configure: error: Please run Apache\'s configure or src/Configure program once and try again" 1>&2; exit 1; }
				fi
			else
				if test -f $withval/src/compat.h; then
					cat >> confdefs.h <<\EOF
#define HAVE_OLD_COMPAT_H 1
EOF

				fi
			fi
		else
			echo "$ac_t""no" 1>&6
			{ echo "configure: error: Invalid Apache directory - unable to find httpd.h under $withval" 1>&2; exit 1; }
		fi
	else
		echo "$ac_t""no" 1>&6
	fi

else
  
	echo "$ac_t""no" 1>&6

fi


INCLUDES="$INCLUDES $APACHE_INCLUDE"
fi

if test "x$APXS" != "x" -a "`uname -sv`" = "AIX 4" -a "$GCC" != "yes"; then
	APXS_EXP="-bE:sapi/apache/mod_php4.exp"
fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_EXP"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_INCLUDE"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_TARGET"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST APXS_LDFLAGS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST APACHE_INSTALL"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST STRONGHOLD"
  


echo $ac_n "checking for mod_charset compatibility option""... $ac_c" 1>&6
echo "configure:3105: checking for mod_charset compatibility option" >&5
# Check whether --with-mod_charset or --without-mod_charset was given.
if test "${with_mod_charset+set}" = set; then
  withval="$with_mod_charset"
  
	echo "$ac_t""yes" 1>&6
    cat >> confdefs.h <<\EOF
#define USE_TRANSFER_TABLES 1
EOF


else
  
	echo "$ac_t""no" 1>&6

fi


if test -n "$APACHE_MODULE"; then
  
  if test -n "$GCC"; then
        
  gcc_arg_name=ac_cv_gcc_arg_rdynamic
  echo $ac_n "checking whether $CC supports -rdynamic""... $ac_c" 1>&6
echo "configure:3129: checking whether $CC supports -rdynamic" >&5
if eval "test \"`echo '$''{'ac_cv_gcc_arg_rdynamic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  echo 'void somefunc() { };' > conftest.c
  cmd='$CC -rdynamic -c conftest.c'
  if eval $cmd 2>&1 | egrep -e -rdynamic >/dev/null ; then
    ac_result=no
  else
    ac_result=yes
  fi
  eval $gcc_arg_name=$ac_result
  rm -f conftest.*
  
fi

echo "$ac_t""$ac_cv_gcc_arg_rdynamic" 1>&6
  if eval test "\$$gcc_arg_name" = "yes"; then
    gcc_rdynamic=yes
  else
    :
    
  fi

    if test "$gcc_rdynamic" = "yes"; then
      PHP_LDFLAGS="$PHP_LDFLAGS -rdynamic"
    fi
  fi

  $php_shtool mkdir -p sapi/apache
  
  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES sapi/apache/libphp4.module"

  
  php_build_target=static

fi

if test -n "$APACHE_INSTALL"; then
  INSTALL_IT=$APACHE_INSTALL
fi



if test "$PHP_SAPI" = "cgi"; then

  

echo $ac_n "checking whether to force Apache CGI redirect""... $ac_c" 1>&6
echo "configure:3179: checking whether to force Apache CGI redirect" >&5
# Check whether --enable-force-cgi-redirect or --disable-force-cgi-redirect was given.
if test "${enable_force_cgi_redirect+set}" = set; then
  enableval="$enable_force_cgi_redirect"
  PHP_FORCE_CGI_REDIRECT=$enableval
else
  PHP_FORCE_CGI_REDIRECT=no
fi


case "$PHP_FORCE_CGI_REDIRECT" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_FORCE_CGI_REDIRECT=`echo $ac_n "$PHP_FORCE_CGI_REDIRECT$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_FORCE_CGI_REDIRECT=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_FORCE_CGI_REDIRECT" = "no" && PHP_FORCE_CGI_REDIRECT=yes
fi

echo "$ac_t""$ext_output" 1>&6




  if test "$PHP_FORCE_CGI_REDIRECT" = "yes"; then
    cat >> confdefs.h <<\EOF
#define FORCE_CGI_REDIRECT 1
EOF

    REDIRECT=1
  else
    cat >> confdefs.h <<\EOF
#define FORCE_CGI_REDIRECT 0
EOF

    REDIRECT=0
  fi

  

echo $ac_n "checking whether to discard path_info + path_translated""... $ac_c" 1>&6
echo "configure:3238: checking whether to discard path_info + path_translated" >&5
# Check whether --enable-discard-path or --disable-discard-path was given.
if test "${enable_discard_path+set}" = set; then
  enableval="$enable_discard_path"
  PHP_DISCARD_PATH=$enableval
else
  PHP_DISCARD_PATH=no
fi


case "$PHP_DISCARD_PATH" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_DISCARD_PATH=`echo $ac_n "$PHP_DISCARD_PATH$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_DISCARD_PATH=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_DISCARD_PATH" = "no" && PHP_DISCARD_PATH=yes
fi

echo "$ac_t""$ext_output" 1>&6




  if test "$PHP_DISCARD_PATH" = "yes"; then
    cat >> confdefs.h <<\EOF
#define DISCARD_PATH 1
EOF

    DISCARD_PATH=1
  else
    cat >> confdefs.h <<\EOF
#define DISCARD_PATH 0
EOF

    DISCARD_PATH=0
  fi

fi

if test "$PHP_SAPI" = "cgi" ; then
  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_PROGRAM \$(bindir)/$SAPI_CGI"
fi

echo $ac_n "checking for fhttpd module support""... $ac_c" 1>&6
echo "configure:3301: checking for fhttpd module support" >&5
# Check whether --with-fhttpd or --without-fhttpd was given.
if test "${with_fhttpd+set}" = set; then
  withval="$with_fhttpd"
  
    if test "$withval" = "yes"; then
      # fhttpd source directory
      withval=/usr/local/src/fhttpd
    fi
    if test "$withval" != "no"; then
# For fhttpd 0.3.x
      if test -f $withval/servproc.h; then 
        FHTTPD_INCLUDE=-I$withval/
        FHTTPD_LIB=$withval/servproc.o
        FHTTPD_TARGET=$withval/
        
  php_build_target=static

		PHP_SAPI=cgi
        cat >> confdefs.h <<\EOF
#define FHTTPD 1
EOF

        echo "$ac_t""yes - fhttpd 0.3.x" 1>&6
      else
        echo "$ac_t""no" 1>&6
        { echo "configure: error: Invalid fhttpd directory - unable to find servproc.h under $withval" 1>&2; exit 1; }
      fi
    else
      echo "$ac_t""no" 1>&6
    fi

else
  
    echo "$ac_t""no" 1>&6

fi

INCLUDES="$INCLUDES $FHTTPD_INCLUDE"




RESULT=no
echo $ac_n "checking for Zeus ISAPI support""... $ac_c" 1>&6
echo "configure:3346: checking for Zeus ISAPI support" >&5
# Check whether --with-zeus or --without-zeus was given.
if test "${with_zeus+set}" = set; then
  withval="$with_zeus"
  
	if test "$withval" = "yes"; then
		ZEUSPATH=/usr/local/zeus # the default
	else
		ZEUSPATH=$withval
	fi
	test -f "$ZEUSPATH/web/include/httpext.h" || { echo "configure: error: Unable to find httpext.h in $ZEUSPATH/web/include" 1>&2; exit 1; }
	
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. Your system does not support this." 1>&2; exit 1; }
  fi

	cat >> confdefs.h <<\EOF
#define WITH_ZEUS 1
EOF

	
  if test "$ZEUSPATH/web/include" != "/usr/include"; then
    
  if test -z "$ZEUSPATH/web/include" || echo "$ZEUSPATH/web/include" | grep '^/' >/dev/null ; then
    ai_p="$ZEUSPATH/web/include"
  else
    
    ep_dir="`echo $ZEUSPATH/web/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZEUSPATH/web/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

	PHP_SAPI=isapi
	
  php_build_target=shared

	INSTALL_IT="\$(SHELL) \$(srcdir)/install-sh -m 0755 $SAPI_SHARED $ZEUSPATH/web/bin/"
	RESULT=yes

fi

echo "$ac_t""$RESULT" 1>&6



echo $ac_n "checking for NSAPI support""... $ac_c" 1>&6
echo "configure:3408: checking for NSAPI support" >&5
# Check whether --with-nsapi or --without-nsapi was given.
if test "${with_nsapi+set}" = set; then
  withval="$with_nsapi"
  
  PHP_NSAPI=$withval

else
  
  PHP_NSAPI=no

fi

echo "$ac_t""$PHP_NSAPI" 1>&6

if test "$PHP_NSAPI" != "no"; then
  if test ! -d $PHP_NSAPI/bin ; then
    { echo "configure: error: Please specify the path to the root of your Netscape server using --with-nsapi=DIR" 1>&2; exit 1; }
  fi
  echo $ac_n "checking for NSAPI include files""... $ac_c" 1>&6
echo "configure:3428: checking for NSAPI include files" >&5
  if test -d $PHP_NSAPI/include ; then
    NSAPI_INCLUDE=$PHP_NSAPI/include
    echo "$ac_t""Netscape-Enterprise/3.x style" 1>&6
  elif test -d $PHP_NSAPI/plugins/include ; then
    NSAPI_INCLUDE=$PHP_NSAPI/plugins/include
    echo "$ac_t""iPlanet/4.x style" 1>&6
  else
    { echo "configure: error: Please check you have nsapi.h in either DIR/include or DIR/plugins/include" 1>&2; exit 1; }
  fi
  
  if test "$NSAPI_INCLUDE" != "/usr/include"; then
    
  if test -z "$NSAPI_INCLUDE" || echo "$NSAPI_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$NSAPI_INCLUDE"
  else
    
    ep_dir="`echo $NSAPI_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$NSAPI_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. Your system does not support this." 1>&2; exit 1; }
  fi

  cat >> confdefs.h <<\EOF
#define HAVE_NSAPI 1
EOF

  PHP_SAPI=nsapi
  
  php_build_target=shared

  INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PHP_NSAPI/bin/"
fi




RESULT=no
echo $ac_n "checking for PHTTPD support""... $ac_c" 1>&6
echo "configure:3487: checking for PHTTPD support" >&5
# Check whether --with-phttpd or --without-phttpd was given.
if test "${with_phttpd+set}" = set; then
  withval="$with_phttpd"
  
	if test ! -d $withval ; then
		{ echo "configure: error: You did not specify a directory" 1>&2; exit 1; }
	fi
	
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. Your system does not support this." 1>&2; exit 1; }
  fi

	PHTTPD_DIR=$withval
	
  if test "$PHTTPD_DIR/include" != "/usr/include"; then
    
  if test -z "$PHTTPD_DIR/include" || echo "$PHTTPD_DIR/include" | grep '^/' >/dev/null ; then
    ai_p="$PHTTPD_DIR/include"
  else
    
    ep_dir="`echo $PHTTPD_DIR/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHTTPD_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

	cat >> confdefs.h <<\EOF
#define HAVE_PHTTPD 1
EOF

	PHP_SAPI=phttpd
	
  php_build_target=shared

	INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PHTTPD_DIR/modules/"
	RESULT=yes

fi

echo "$ac_t""$RESULT" 1>&6




echo $ac_n "checking for Pi3Web Support""... $ac_c" 1>&6
echo "configure:3548: checking for Pi3Web Support" >&5
# Check whether --with-pi3web or --without-pi3web was given.
if test "${with_pi3web+set}" = set; then
  withval="$with_pi3web"
  PHP_PI3WEB=$withval
else
  PHP_PI3WEB=no
fi


case "$PHP_PI3WEB" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PI3WEB=`echo $ac_n "$PHP_PI3WEB$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PI3WEB=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_PI3WEB" = "no" && PHP_PI3WEB=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PI3WEB" != "no"; then
	if test "$PHP_PI3WEB" = "yes"; then
		PI3PATH=../.. # the default
	else
		PI3PATH=$PHP_PI3WEB
	fi
	test -f "$PI3PATH/PiAPI/PiAPI.h" || { echo "configure: error: Unable to find PiAPI.h in $PI3PATH/PiAPI" 1>&2; exit 1; }
	
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. Your system does not support this." 1>&2; exit 1; }
  fi

	cat >> confdefs.h <<\EOF
#define WITH_PI3WEB 1
EOF

	
  if test "$PI3PATH/PiAPI" != "/usr/include"; then
    
  if test -z "$PI3PATH/PiAPI" || echo "$PI3PATH/PiAPI" | grep '^/' >/dev/null ; then
    ai_p="$PI3PATH/PiAPI"
  else
    
    ep_dir="`echo $PI3PATH/PiAPI|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/PiAPI\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

	
  if test "$PI3PATH/Pi2API" != "/usr/include"; then
    
  if test -z "$PI3PATH/Pi2API" || echo "$PI3PATH/Pi2API" | grep '^/' >/dev/null ; then
    ai_p="$PI3PATH/Pi2API"
  else
    
    ep_dir="`echo $PI3PATH/Pi2API|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/Pi2API\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

	
  if test "$PI3PATH/Pi3API" != "/usr/include"; then
    
  if test -z "$PI3PATH/Pi3API" || echo "$PI3PATH/Pi3API" | grep '^/' >/dev/null ; then
    ai_p="$PI3PATH/Pi3API"
  else
    
    ep_dir="`echo $PI3PATH/Pi3API|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/Pi3API\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

	
  if test "$PI3PATH/PHP4" != "/usr/include"; then
    
  if test -z "$PI3PATH/PHP4" || echo "$PI3PATH/PHP4" | grep '^/' >/dev/null ; then
    ai_p="$PI3PATH/PHP4"
  else
    
    ep_dir="`echo $PI3PATH/PHP4|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PI3PATH/PHP4\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

	PHP_SAPI=pi3web
	
  php_build_target=shared

	INSTALL_IT="\$(SHELL) \$(srcdir)/install-sh -m 0755 $SAPI_SHARED $PI3PATH/bin/"
fi



RESULT=no
echo $ac_n "checking for Roxen/Pike support""... $ac_c" 1>&6
echo "configure:3726: checking for Roxen/Pike support" >&5
# Check whether --with-roxen or --without-roxen was given.
if test "${with_roxen+set}" = set; then
  withval="$with_roxen"
  
	if test ! -d $withval ; then
		{ echo "configure: error: You did not specify a directory" 1>&2; exit 1; }
	fi
	if test -f $withval/bin/roxen; then
		PIKE="$withval/bin/roxen"
	elif test -f $withval/bin/pike; then
		PIKE="$withval/bin/pike"
	else
		{ echo "configure: error: Couldn't find a pike in $withval/bin/" 1>&2; exit 1; }
	fi
    if $PIKE -e 'float v; catch(v = __VERSION__ + (__BUILD__/10000.0)); if(v < 0.7079) exit(1); exit(0);'; then
		PIKE_MODULE_DIR="`$PIKE --show-paths 2>&1| grep lib/modules | sed -e 's/.*: //'`"
	    PIKE_INCLUDE_DIR="`echo $PIKE_MODULE_DIR | sed -e 's,lib/pike/modules,include/pike,' -e 's,lib/modules,include/pike,'`"
		if test -z "$PIKE_INCLUDE_DIR" -o -z "$PIKE_MODULE_DIR"; then
			{ echo "configure: error: Failed to figure out Pike module and include directories" 1>&2; exit 1; }
		fi
	else
		{ echo "configure: error: Roxen/PHP requires Pike 0.7.79 or newer" 1>&2; exit 1; }
	fi
   
	
  if test "$PIKE_INCLUDE_DIR" != "/usr/include"; then
    
  if test -z "$PIKE_INCLUDE_DIR" || echo "$PIKE_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p="$PIKE_INCLUDE_DIR"
  else
    
    ep_dir="`echo $PIKE_INCLUDE_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PIKE_INCLUDE_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

	cat >> confdefs.h <<\EOF
#define HAVE_ROXEN 1
EOF

	PHP_SAPI=roxen
	
  php_build_target=shared

	INSTALL_IT="\$(INSTALL) -m 0755 $SAPI_SHARED $PIKE_MODULE_DIR/PHP4.so"
	RESULT="yes
	Pike binary used:      $PIKE
	Pike include dir:      $PIKE_INCLUDE_DIR
	Pike module directory: $PIKE_MODULE_DIR"
	PIKE_INCLUDE_DIR=" -I$PIKE_INCLUDE_DIR "

fi

echo "$ac_t""$RESULT" 1>&6

if test "$RESULT" != "no" ; then 
 RESULT=no
 echo $ac_n "checking if Roxen should use ZTS""... $ac_c" 1>&6
echo "configure:3800: checking if Roxen should use ZTS" >&5
 # Check whether --enable-roxen-zts or --disable-roxen-zts was given.
if test "${enable_roxen_zts+set}" = set; then
  enableval="$enable_roxen_zts"
  
 	
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. Your system does not support this." 1>&2; exit 1; }
  fi

	cat >> confdefs.h <<\EOF
#define ROXEN_USE_ZTS 1
EOF

	RESULT="yes"

 
fi

 echo "$ac_t""$RESULT" 1>&6
fi
	

# $Id: config.m4,v 1.9 2000/05/11 10:39:27 rubys Exp $
# config.m4 for servlet sapi

echo $ac_n "checking for Servlet support""... $ac_c" 1>&6
echo "configure:3828: checking for Servlet support" >&5
# Check whether --with-servlet or --without-servlet was given.
if test "${with_servlet+set}" = set; then
  withval="$with_servlet"
  
  if test "$withval" != "no"; then

    if test "$withval" = "yes"; then
      SERVLET_CLASSPATH=.
    else
      if test -f $withval/lib/servlet.jar; then
	SERVLET_CLASSPATH=$withval/lib/servlet.jar
      fi

      if test -f $withval/lib/jsdk.jar; then
	SERVLET_CLASSPATH=$withval/lib/jsdk.jar
      fi

      if test -d $withval/javax; then
	SERVLET_CLASSPATH=$withval
      fi

      if test -z "$SERVLET_CLASSPATH"; then
	echo "$ac_t""no" 1>&6
	{ echo "configure: error: unable to find servlet libraries" 1>&2; exit 1; }
      fi
    fi

    cat >> confdefs.h <<\EOF
#define SAPI_SERVLET 1
EOF


    INSTALL_IT="\$(INSTALL) -m 0755 \$(srcdir)/sapi/servlet/phpsrvlt.jar \$(libdir)"
    INSTALL_IT="$INSTALL_IT; \$(INSTALL) -m 0755 $SAPI_SHARED \$(libdir)"
    PHP_SAPI=servlet
    
  php_build_target=shared

    
  enable_experimental_zts=yes
  if test "$pthreads_working" != "yes"; then
    { echo "configure: error: ZTS currently requires working POSIX threads. Your system does not support this." 1>&2; exit 1; }
  fi

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST SERVLET_CLASSPATH"
  


# Check whether --with-thttpd or --without-thttpd was given.
if test "${with_thttpd+set}" = set; then
  withval="$with_thttpd"
  
  test -d $withval || echo "$ac_t""thttpd directory does not exist ($withval)" 1>&6
  
  if test -z "$withval" || echo "$withval" | grep '^/' >/dev/null ; then
    THTTPD="$withval"
  else
    
    ep_dir="`echo $withval|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    THTTPD="$ep_realdir/`basename \"$withval\"`"
  fi

  INSTALL_IT="\
    echo 'PHP_LIBS = -L. -lphp4 \$(PHP_LIBS) \$(EXTRA_LIBS)' > $THTTPD/php_makefile; \
    echo 'PHP_LDFLAGS = \$(NATIVE_RPATHS) \$(PHP_LDFLAGS)' >> $THTTPD/php_makefile; \
    echo 'PHP_CFLAGS = \$(COMMON_FLAGS) \$(CFLAGS) \$(EXTRA_CFLAGS)' >> $THTTPD/php_makefile; \
    \$(LN_S) $abs_srcdir/sapi/thttpd/thttpd.c $THTTPD/php_thttpd.c; \
    cp $abs_srcdir/sapi/thttpd/php_thttpd.h $SAPI_STATIC $THTTPD;\
    test -f $THTTPD/php_patched || \
    (cd $THTTPD && patch < $abs_srcdir/sapi/thttpd/thttpd_patch && touch php_patched)"
  PHP_THTTPD="yes, using $THTTPD"
  
  if test "$THTTPD" != "/usr/include"; then
    
  if test -z "$THTTPD" || echo "$THTTPD" | grep '^/' >/dev/null ; then
    ai_p="$THTTPD"
  else
    
    ep_dir="`echo $THTTPD|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THTTPD\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  
  php_build_target=static

  PHP_SAPI=thttpd

else
  
  PHP_THTTPD="no"

fi


echo $ac_n "checking for thttpd""... $ac_c" 1>&6
echo "configure:3955: checking for thttpd" >&5
echo "$ac_t""$PHP_THTTPD" 1>&6



echo $ac_n "checking for chosen SAPI module""... $ac_c" 1>&6
echo "configure:3961: checking for chosen SAPI module" >&5
echo "$ac_t""$PHP_SAPI" 1>&6

if test "$enable_experimental_zts" = "yes"; then
  
if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi

  
  if test -z "$host_alias"; then
    { echo "configure: error: host_alias is not set. Make sure to run config.guess" 1>&2; exit 1; }
  fi
  case "$host_alias" in
  *solaris*)
    PTHREAD_FLAGS="-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT";;
  *freebsd*)
    PTHREAD_FLAGS="-D_REENTRANT -D_THREAD_SAFE";;
  *linux*)
    PTHREAD_FLAGS="-D_REENTRANT";;
  *aix*)
    PTHREAD_FLAGS="-D_THREAD_SAFE";;
  *irix*)
    PTHREAD_FLAGS="-D_POSIX_THREAD_SAFE_FUNCTIONS";;
  *hpux*)
    PTHREAD_FLAGS="-D_REENTRANT";;
  *sco*)
    PTHREAD_FLAGS="-D_REENTRANT";;
  esac

  if test -n "$PTHREAD_FLAGS"; then
    CPPFLAGS="$CPPFLAGS $PTHREAD_FLAGS"
  fi

fi




  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Running system checks${T_ME}" 1>&6



  echo $ac_n "checking for missing declarations of reentrant functions""... $ac_c" 1>&6
echo "configure:4010: checking for missing declarations of reentrant functions" >&5
  cat > conftest.$ac_ext <<EOF
#line 4012 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
struct tm *(*func)() = localtime_r
; return 0; }
EOF
if { (eval echo configure:4019: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_LOCALTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 4037 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
struct tm *(*func)() = gmtime_r
; return 0; }
EOF
if { (eval echo configure:4044: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_GMTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 4062 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
char *(*func)() = asctime_r
; return 0; }
EOF
if { (eval echo configure:4069: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_ASCTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 4087 "configure"
#include "confdefs.h"
#include <time.h>
int main() {
char *(*func)() = ctime_r
; return 0; }
EOF
if { (eval echo configure:4094: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_CTIME_R_DECL 1
EOF

  
fi
rm -f conftest*
  cat > conftest.$ac_ext <<EOF
#line 4112 "configure"
#include "confdefs.h"
#include <string.h>
int main() {
char *(*func)() = strtok_r
; return 0; }
EOF
if { (eval echo configure:4119: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    :
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_STRTOK_R_DECL 1
EOF

  
fi
rm -f conftest*
  echo "$ac_t""done" 1>&6


echo $ac_n "checking whether compiler supports -R""... $ac_c" 1>&6
echo "configure:4140: checking whether compiler supports -R" >&5
if eval "test \"`echo '$''{'php_cv_cc_dashr'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
	SAVE_LIBS="${LIBS}"
	LIBS="-R /usr/lib ${LIBS}"
	cat > conftest.$ac_ext <<EOF
#line 4148 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4155: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  php_cv_cc_dashr=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  php_cv_cc_dashr=no
fi
rm -f conftest*
	LIBS="${SAVE_LIBS}"
fi

echo "$ac_t""$php_cv_cc_dashr" 1>&6
if test $php_cv_cc_dashr = "yes"; then
	ld_runpath_switch="-R"
else
	echo $ac_n "checking whether compiler supports -Wl,-rpath,""... $ac_c" 1>&6
echo "configure:4173: checking whether compiler supports -Wl,-rpath," >&5
	if eval "test \"`echo '$''{'php_cv_cc_rpath'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
		SAVE_LIBS="${LIBS}"
		LIBS="-Wl,-rpath,/usr/lib ${LIBS}"
		cat > conftest.$ac_ext <<EOF
#line 4181 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:4188: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  php_cv_cc_rpath=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  php_cv_cc_rpath=no
fi
rm -f conftest*
		LIBS="${SAVE_LIBS}"
fi

	echo "$ac_t""$php_cv_cc_rpath" 1>&6
	if test $php_cv_cc_rpath = "yes"; then
		ld_runpath_switch="-Wl,-rpath,"
	else
				ld_runpath_switch="-L"
	fi
fi


# Extract the first word of "sendmail", so it can be a program name with args.
set dummy sendmail; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:4213: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_PROG_SENDMAIL'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$PROG_SENDMAIL" in
  /*)
  ac_cv_path_PROG_SENDMAIL="$PROG_SENDMAIL" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_PROG_SENDMAIL="$PROG_SENDMAIL" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH:/usr/bin:/usr/sbin:/usr/etc:/etc:/usr/ucblib"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_PROG_SENDMAIL="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_PROG_SENDMAIL" && ac_cv_path_PROG_SENDMAIL="/usr/lib/sendmail"
  ;;
esac
fi
PROG_SENDMAIL="$ac_cv_path_PROG_SENDMAIL"
if test -n "$PROG_SENDMAIL"; then
  echo "$ac_t""$PROG_SENDMAIL" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -n "$PROG_SENDMAIL"; then
  cat >> confdefs.h <<\EOF
#define HAVE_SENDMAIL 1
EOF

fi



  echo $ac_n "checking whether system uses EBCDIC""... $ac_c" 1>&6
echo "configure:4256: checking whether system uses EBCDIC" >&5
if eval "test \"`echo '$''{'ac_cv_ebcdic'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
  ac_cv_ebcdic="no"

else
  cat > conftest.$ac_ext <<EOF
#line 4267 "configure"
#include "confdefs.h"

int main(void) { 
  return (unsigned char)'A' != (unsigned char)0xC1; 
} 

EOF
if { (eval echo configure:4275: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_ebcdic="yes"

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_ebcdic="no"

fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_ebcdic" 1>&6
  if test "$ac_cv_ebcdic" = "yes"; then
    cat >> confdefs.h <<\EOF
#define CHARSET_EBCDIC 1
EOF

  fi


if test -d /usr/pkg/include -a -d /usr/pkg/lib ; then
       CPPFLAGS="$CPPFLAGS -I/usr/pkg/include"
       LDFLAGS="$LDFLAGS -L/usr/pkg/lib"
fi

INCLUDES="$INCLUDES -I\$(top_builddir)/Zend -I\$(top_srcdir)"


echo $ac_n "checking for socket in -lsocket""... $ac_c" 1>&6
echo "configure:4311: checking for socket in -lsocket" >&5
ac_lib_var=`echo socket'_'socket | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4319 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char socket();

int main() {
socket()
; return 0; }
EOF
if { (eval echo configure:4330: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
 
 case "socket" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsocket $LIBS"


  ;;
  esac

 cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF
 
else
  echo "$ac_t""no" 1>&6

  echo $ac_n "checking for htonl in -lsocket""... $ac_c" 1>&6
echo "configure:4366: checking for htonl in -lsocket" >&5
ac_lib_var=`echo socket'_'htonl | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4374 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char htonl();

int main() {
htonl()
; return 0; }
EOF
if { (eval echo configure:4385: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
   
 case "socket" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsocket $LIBS"


  ;;
  esac

   
else
  echo "$ac_t""no" 1>&6
fi

fi



unset ac_cv_func_yp_get_default_domain
echo $ac_n "checking for yp_get_default_domain""... $ac_c" 1>&6
echo "configure:4424: checking for yp_get_default_domain" >&5
if eval "test \"`echo '$''{'ac_cv_func_yp_get_default_domain'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 4429 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char yp_get_default_domain(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char yp_get_default_domain();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_yp_get_default_domain) || defined (__stub___yp_get_default_domain)
choke me
#else
yp_get_default_domain();
#endif

; return 0; }
EOF
if { (eval echo configure:4452: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_yp_get_default_domain=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_yp_get_default_domain=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'yp_get_default_domain`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  php_no_nsl_checks=yes
else
  echo "$ac_t""no" 1>&6
 
fi

unset ac_cv_func_yp_get_default_domain

if test "$php_no_nsl_checks" != "yes"; then

echo $ac_n "checking for gethostname in -lnsl""... $ac_c" 1>&6
echo "configure:4477: checking for gethostname in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4485 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostname();

int main() {
gethostname()
; return 0; }
EOF
if { (eval echo configure:4496: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
 
 case "nsl" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lnsl $LIBS"


  ;;
  esac

 cat >> confdefs.h <<\EOF
#define HAVE_LIBNSL 1
EOF
 
else
  echo "$ac_t""no" 1>&6

 echo $ac_n "checking for gethostbyaddr in -lnsl""... $ac_c" 1>&6
echo "configure:4532: checking for gethostbyaddr in -lnsl" >&5
ac_lib_var=`echo nsl'_'gethostbyaddr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4540 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gethostbyaddr();

int main() {
gethostbyaddr()
; return 0; }
EOF
if { (eval echo configure:4551: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
  
 case "nsl" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lnsl $LIBS"


  ;;
  esac

  cat >> confdefs.h <<\EOF
#define HAVE_LIBNSL 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi


fi


fi

echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
echo "configure:4594: checking for crypt in -lcrypt" >&5
ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4602 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char crypt();

int main() {
crypt()
; return 0; }
EOF
if { (eval echo configure:4613: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
 
 case "crypt" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcrypt $LIBS"


  ;;
  esac

 cat >> confdefs.h <<\EOF
#define HAVE_LIBCRYPT 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
echo "configure:4651: checking for dlopen in -ldl" >&5
ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4659 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:4670: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
 case "dl" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ldl $LIBS"


  ;;
  esac

else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for sin in -lm""... $ac_c" 1>&6
echo "configure:4703: checking for sin in -lm" >&5
ac_lib_var=`echo m'_'sin | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4711 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sin();

int main() {
sin()
; return 0; }
EOF
if { (eval echo configure:4722: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo m | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lm $LIBS"

else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for inet_aton in -lbind""... $ac_c" 1>&6
echo "configure:4751: checking for inet_aton in -lbind" >&5
ac_lib_var=`echo bind'_'inet_aton | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbind  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4759 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inet_aton();

int main() {
inet_aton()
; return 0; }
EOF
if { (eval echo configure:4770: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
  
 case "bind" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lbind $LIBS"


  ;;
  esac

  cat >> confdefs.h <<\EOF
#define HAVE_LIBBIND 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
 

echo $ac_n "checking for inet_aton in -lresolv""... $ac_c" 1>&6
echo "configure:4808: checking for inet_aton in -lresolv" >&5
ac_lib_var=`echo resolv'_'inet_aton | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4816 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char inet_aton();

int main() {
inet_aton()
; return 0; }
EOF
if { (eval echo configure:4827: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo resolv | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lresolv $LIBS"

else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for res_search in -lsocket""... $ac_c" 1>&6
echo "configure:4856: checking for res_search in -lsocket" >&5
ac_lib_var=`echo socket'_'res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4864 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_search();

int main() {
res_search()
; return 0; }
EOF
if { (eval echo configure:4875: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
 echo $ac_n "checking for dn_skipname in -lresolv""... $ac_c" 1>&6
echo "configure:4892: checking for dn_skipname in -lresolv" >&5
ac_lib_var=`echo resolv'_'dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4900 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_skipname();

int main() {
dn_skipname()
; return 0; }
EOF
if { (eval echo configure:4911: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo resolv | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lresolv $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

 echo $ac_n "checking for __dn_skipname in -lresolv""... $ac_c" 1>&6
echo "configure:4939: checking for __dn_skipname in -lresolv" >&5
ac_lib_var=`echo resolv'_'__dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 4947 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_skipname();

int main() {
__dn_skipname()
; return 0; }
EOF
if { (eval echo configure:4958: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo resolv | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lresolv $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

 LIBS="$LIBS -lsocket"
 cat >> confdefs.h <<\EOF
#define HAVE_LIBSOCKET 1
EOF
 
else
  echo "$ac_t""no" 1>&6

 echo $ac_n "checking for res_search in -lresolv""... $ac_c" 1>&6
echo "configure:4994: checking for res_search in -lresolv" >&5
ac_lib_var=`echo resolv'_'res_search | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5002 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char res_search();

int main() {
res_search()
; return 0; }
EOF
if { (eval echo configure:5013: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
  LIBS="$LIBS -lresolv"
  cat >> confdefs.h <<\EOF
#define HAVE_LIBRESOLV 1
EOF
 
 
else
  echo "$ac_t""no" 1>&6

  echo $ac_n "checking for dn_skipname in -lresolv""... $ac_c" 1>&6
echo "configure:5039: checking for dn_skipname in -lresolv" >&5
ac_lib_var=`echo resolv'_'dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5047 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dn_skipname();

int main() {
dn_skipname()
; return 0; }
EOF
if { (eval echo configure:5058: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo resolv | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lresolv $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for __dn_skipname in -lresolv""... $ac_c" 1>&6
echo "configure:5086: checking for __dn_skipname in -lresolv" >&5
ac_lib_var=`echo resolv'_'__dn_skipname | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lresolv  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5094 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __dn_skipname();

int main() {
__dn_skipname()
; return 0; }
EOF
if { (eval echo configure:5105: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo resolv | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lresolv $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

 
fi
 

fi


echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:5140: checking for ANSI C header files" >&5
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5145 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5153: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 5170 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 5188 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
  cat > conftest.$ac_ext <<EOF
#line 5209 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:5220: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi


if test "`uname -s 2>/dev/null`" != "QNX"; then
	ac_header_dirent=no
for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
echo "configure:5250: checking for $ac_hdr that defines DIR" >&5
if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5255 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_hdr>
int main() {
DIR *dirp = 0;
; return 0; }
EOF
if { (eval echo configure:5263: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  eval "ac_cv_header_dirent_$ac_safe=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_dirent_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_dirent_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 ac_header_dirent=$ac_hdr; break
else
  echo "$ac_t""no" 1>&6
fi
done
# Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
if test $ac_header_dirent = dirent.h; then
echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
echo "configure:5288: checking for opendir in -ldir" >&5
ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldir  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5296 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char opendir();

int main() {
opendir()
; return 0; }
EOF
if { (eval echo configure:5307: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -ldir"
else
  echo "$ac_t""no" 1>&6
fi

else
echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
echo "configure:5329: checking for opendir in -lx" >&5
ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lx  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 5337 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char opendir();

int main() {
opendir()
; return 0; }
EOF
if { (eval echo configure:5348: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -lx"
else
  echo "$ac_t""no" 1>&6
fi

fi

else
	for ac_hdr in dirent.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:5375: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5380 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5385: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

fi

  echo $ac_n "checking for fclose declaration""... $ac_c" 1>&6
echo "configure:5414: checking for fclose declaration" >&5
  cat > conftest.$ac_ext <<EOF
#line 5416 "configure"
#include "confdefs.h"
#include <stdio.h>
int main() {
int (*func)() = fclose
; return 0; }
EOF
if { (eval echo configure:5423: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_FCLOSE_DECL 0
EOF

    echo "$ac_t""ok" 1>&6
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MISSING_FCLOSE_DECL 1
EOF

    echo "$ac_t""missing" 1>&6
  
fi
rm -f conftest*

for ac_hdr in alloca.h \
arpa/inet.h \
crypt.h \
fcntl.h \
grp.h \
limits.h \
locale.h \
netinet/in.h \
pwd.h \
signal.h \
stdarg.h \
stdlib.h \
string.h \
syslog.h \
sys/file.h \
sys/mman.h \
sys/resource.h \
sys/select.h \
sys/socket.h \
sys/statfs.h \
sys/statvfs.h \
sys/time.h \
sys/types.h \
sys/varargs.h \
sys/wait.h \
unistd.h \
unix.h \
utime.h \

do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:5478: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5483 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:5488: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking whether struct tm is in sys/time.h or time.h""... $ac_c" 1>&6
echo "configure:5516: checking whether struct tm is in sys/time.h or time.h" >&5
if eval "test \"`echo '$''{'ac_cv_struct_tm'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5521 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <time.h>
int main() {
struct tm *tp; tp->tm_sec;
; return 0; }
EOF
if { (eval echo configure:5529: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm=time.h
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm=sys/time.h
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_tm" 1>&6
if test $ac_cv_struct_tm = sys/time.h; then
  cat >> confdefs.h <<\EOF
#define TM_IN_SYS_TIME 1
EOF

fi

echo $ac_n "checking for tm_zone in struct tm""... $ac_c" 1>&6
echo "configure:5550: checking for tm_zone in struct tm" >&5
if eval "test \"`echo '$''{'ac_cv_struct_tm_zone'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5555 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_cv_struct_tm>
int main() {
struct tm tm; tm.tm_zone;
; return 0; }
EOF
if { (eval echo configure:5563: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm_zone=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm_zone=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_tm_zone" 1>&6
if test "$ac_cv_struct_tm_zone" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_TM_ZONE 1
EOF

else
  echo $ac_n "checking for tzname""... $ac_c" 1>&6
echo "configure:5583: checking for tzname" >&5
if eval "test \"`echo '$''{'ac_cv_var_tzname'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5588 "configure"
#include "confdefs.h"
#include <time.h>
#ifndef tzname /* For SGI.  */
extern char *tzname[]; /* RS6000 and others reject char **tzname.  */
#endif
int main() {
atoi(*tzname);
; return 0; }
EOF
if { (eval echo configure:5598: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_var_tzname=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_var_tzname=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_var_tzname" 1>&6
  if test $ac_cv_var_tzname = yes; then
    cat >> confdefs.h <<\EOF
#define HAVE_TZNAME 1
EOF

  fi
fi



echo $ac_n "checking for tm_gmtoff in struct tm""... $ac_c" 1>&6
echo "configure:5622: checking for tm_gmtoff in struct tm" >&5
if eval "test \"`echo '$''{'ac_cv_struct_tm_gmtoff'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5627 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <$ac_cv_struct_tm>
int main() {
struct tm tm; tm.tm_gmtoff;
; return 0; }
EOF
if { (eval echo configure:5635: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_tm_gmtoff=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_tm_gmtoff=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_tm_gmtoff" 1>&6

if test "$ac_cv_struct_tm_gmtoff" = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_TM_GMTOFF 1
EOF

fi


echo $ac_n "checking for struct flock""... $ac_c" 1>&6
echo "configure:5658: checking for struct flock" >&5
if eval "test \"`echo '$''{'ac_cv_struct_flock'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5663 "configure"
#include "confdefs.h"

#include <unistd.h>
#include <fcntl.h>
        
int main() {
struct flock x;
; return 0; }
EOF
if { (eval echo configure:5673: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
          ac_cv_struct_flock=yes
        
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
          ac_cv_struct_flock=no
        
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_struct_flock" 1>&6
if test "$ac_cv_struct_flock" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define HAVE_STRUCT_FLOCK 1
EOF

fi


echo $ac_n "checking for socklen_t""... $ac_c" 1>&6
echo "configure:5700: checking for socklen_t" >&5
if eval "test \"`echo '$''{'ac_cv_socklen_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5705 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/socket.h>

int main() {

socklen_t x;

; return 0; }
EOF
if { (eval echo configure:5717: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
  ac_cv_socklen_t=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
  ac_cv_socklen_t=no

fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_socklen_t" 1>&6
if test "$ac_cv_socklen_t" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_SOCKLEN_T 1
EOF

fi


echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:5743: checking size of long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long=8
else
  cat > conftest.$ac_ext <<EOF
#line 5751 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}
EOF
if { (eval echo configure:5762: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF


echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:5782: checking size of int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 5790 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(int));
  exit(0);
}
EOF
if { (eval echo configure:5801: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF



test -d /usr/ucblib && 
  if test "/usr/ucblib" != "/usr/lib"; then
    
  if test -z "/usr/ucblib" || echo "/usr/ucblib" | grep '^/' >/dev/null ; then
    ai_p="/usr/ucblib"
  else
    
    ep_dir="`echo /usr/ucblib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"/usr/ucblib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R/usr/ucblib -L/usr/ucblib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi


echo $ac_n "checking for st_blksize in struct stat""... $ac_c" 1>&6
echo "configure:5856: checking for st_blksize in struct stat" >&5
if eval "test \"`echo '$''{'ac_cv_struct_st_blksize'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5861 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
int main() {
struct stat s; s.st_blksize;
; return 0; }
EOF
if { (eval echo configure:5869: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_st_blksize=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_st_blksize=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_st_blksize" 1>&6
if test $ac_cv_struct_st_blksize = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ST_BLKSIZE 1
EOF

fi

if test "`uname -s 2>/dev/null`" != "QNX"; then
	echo $ac_n "checking for st_blocks in struct stat""... $ac_c" 1>&6
echo "configure:5891: checking for st_blocks in struct stat" >&5
if eval "test \"`echo '$''{'ac_cv_struct_st_blocks'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5896 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
int main() {
struct stat s; s.st_blocks;
; return 0; }
EOF
if { (eval echo configure:5904: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_st_blocks=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_st_blocks=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_st_blocks" 1>&6
if test $ac_cv_struct_st_blocks = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ST_BLOCKS 1
EOF

else
  LIBOBJS="$LIBOBJS fileblocks.${ac_objext}"
fi

else
    echo "configure: warning: warnings level for cc set to 0" 1>&2
	WARNING_LEVEL=0
fi
echo $ac_n "checking for st_rdev in struct stat""... $ac_c" 1>&6
echo "configure:5931: checking for st_rdev in struct stat" >&5
if eval "test \"`echo '$''{'ac_cv_struct_st_rdev'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5936 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
int main() {
struct stat s; s.st_rdev;
; return 0; }
EOF
if { (eval echo configure:5944: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_struct_st_rdev=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_struct_st_rdev=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_struct_st_rdev" 1>&6
if test $ac_cv_struct_st_rdev = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ST_RDEV 1
EOF

fi


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:5966: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 5971 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
echo "configure:5999: checking for uid_t in sys/types.h" >&5
if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6004 "configure"
#include "confdefs.h"
#include <sys/types.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "uid_t" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uid_t=yes
else
  rm -rf conftest*
  ac_cv_type_uid_t=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_type_uid_t" 1>&6
if test $ac_cv_type_uid_t = no; then
  cat >> confdefs.h <<\EOF
#define uid_t int
EOF

  cat >> confdefs.h <<\EOF
#define gid_t int
EOF

fi


echo $ac_n "checking for vprintf""... $ac_c" 1>&6
echo "configure:6034: checking for vprintf" >&5
if eval "test \"`echo '$''{'ac_cv_func_vprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6039 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char vprintf(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char vprintf();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_vprintf) || defined (__stub___vprintf)
choke me
#else
vprintf();
#endif

; return 0; }
EOF
if { (eval echo configure:6062: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_vprintf=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_vprintf=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'vprintf`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_VPRINTF 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

if test "$ac_cv_func_vprintf" != yes; then
echo $ac_n "checking for _doprnt""... $ac_c" 1>&6
echo "configure:6086: checking for _doprnt" >&5
if eval "test \"`echo '$''{'ac_cv_func__doprnt'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6091 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char _doprnt(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char _doprnt();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub__doprnt) || defined (__stub____doprnt)
choke me
#else
_doprnt();
#endif

; return 0; }
EOF
if { (eval echo configure:6114: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func__doprnt=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func__doprnt=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'_doprnt`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DOPRNT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

fi

for ac_func in asctime_r \
crypt \
ctime_r \
cuserid \
flock \
gcvt \
getlogin \
gethostbyaddr \
getrusage \
gettimeofday \
gmtime_r \
inet_aton \
isascii \
link \
localtime_r \
lockf \
lrand48 \
memcpy \
memmove \
mmap \
putenv \
random \
rand_r \
regcomp \
setitimer \
setlocale \
setsockopt \
setvbuf \
shutdown \
sin \
snprintf \
srand48 \
srandom \
statfs \
statvfs \
std_syslog \
strcasecmp \
strdup \
strerror \
strftime \
strstr \
strtok_r \
symlink \
tempnam \
tzset \
unsetenv \
usleep \
utime \
vsnprintf \

do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:6190: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6195 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:6218: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


for ac_func in strlcat strlcpy getopt
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:6246: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6251 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:6274: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
LIBOBJS="$LIBOBJS ${ac_func}.${ac_objext}"
fi
done


echo $ac_n "checking whether utime accepts a null argument""... $ac_c" 1>&6
echo "configure:6301: checking whether utime accepts a null argument" >&5
if eval "test \"`echo '$''{'ac_cv_func_utime_null'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  rm -f conftestdata; > conftestdata
# Sequent interprets utime(file, 0) to mean use start of epoch.  Wrong.
if test "$cross_compiling" = yes; then
  ac_cv_func_utime_null=no
else
  cat > conftest.$ac_ext <<EOF
#line 6311 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/stat.h>
main() {
struct stat s, t;
exit(!(stat ("conftestdata", &s) == 0 && utime("conftestdata", (long *)0) == 0
&& stat("conftestdata", &t) == 0 && t.st_mtime >= s.st_mtime
&& t.st_mtime - s.st_mtime < 120));
}
EOF
if { (eval echo configure:6322: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_utime_null=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_utime_null=no
fi
rm -fr conftest*
fi

rm -f core core.* *.core
fi

echo "$ac_t""$ac_cv_func_utime_null" 1>&6
if test $ac_cv_func_utime_null = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_UTIME_NULL 1
EOF

fi

# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
echo "configure:6348: checking for working alloca.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6353 "configure"
#include "confdefs.h"
#include <alloca.h>
int main() {
char *p = alloca(2 * sizeof(int));
; return 0; }
EOF
if { (eval echo configure:6360: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_header_alloca_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_alloca_h=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
if test $ac_cv_header_alloca_h = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA_H 1
EOF

fi

echo $ac_n "checking for alloca""... $ac_c" 1>&6
echo "configure:6381: checking for alloca" >&5
if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6386 "configure"
#include "confdefs.h"

#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# ifdef _MSC_VER
#  include <malloc.h>
#  define alloca _alloca
# else
#  if HAVE_ALLOCA_H
#   include <alloca.h>
#  else
#   ifdef _AIX
 #pragma alloca
#   else
#    ifndef alloca /* predefined by HP cc +Olibcalls */
char *alloca ();
#    endif
#   endif
#  endif
# endif
#endif

int main() {
char *p = (char *) alloca(1);
; return 0; }
EOF
if { (eval echo configure:6414: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_alloca_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_alloca_works=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
if test $ac_cv_func_alloca_works = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA 1
EOF

fi

if test $ac_cv_func_alloca_works = no; then
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
  # that cause trouble.  Some versions do not even contain alloca or
  # contain a buggy version.  If you still want to use their alloca,
  # use ar to extract alloca.o from them instead of compiling alloca.c.
  ALLOCA=alloca.${ac_objext}
  cat >> confdefs.h <<\EOF
#define C_ALLOCA 1
EOF


echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
echo "configure:6446: checking whether alloca needs Cray hooks" >&5
if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6451 "configure"
#include "confdefs.h"
#if defined(CRAY) && ! defined(CRAY2)
webecray
#else
wenotbecray
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "webecray" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_os_cray=yes
else
  rm -rf conftest*
  ac_cv_os_cray=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_os_cray" 1>&6
if test $ac_cv_os_cray = yes; then
for ac_func in _getb67 GETB67 getb67; do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:6476: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6481 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:6504: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<EOF
#define CRAY_STACKSEG_END $ac_func
EOF

  break
else
  echo "$ac_t""no" 1>&6
fi

done
fi

echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
echo "configure:6531: checking stack direction for C alloca" >&5
if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_c_stack_direction=0
else
  cat > conftest.$ac_ext <<EOF
#line 6539 "configure"
#include "confdefs.h"
find_stack_direction ()
{
  static char *addr = 0;
  auto char dummy;
  if (addr == 0)
    {
      addr = &dummy;
      return find_stack_direction ();
    }
  else
    return (&dummy > addr) ? 1 : -1;
}
main ()
{
  exit (find_stack_direction() < 0);
}
EOF
if { (eval echo configure:6558: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_stack_direction=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_stack_direction=-1
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
cat >> confdefs.h <<EOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
EOF

fi


  echo $ac_n "checking whether sprintf is broken""... $ac_c" 1>&6
echo "configure:6581: checking whether sprintf is broken" >&5
if eval "test \"`echo '$''{'ac_cv_broken_sprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  
      ac_cv_broken_sprintf=no
    
else
  cat > conftest.$ac_ext <<EOF
#line 6592 "configure"
#include "confdefs.h"
main() {char buf[20];exit(sprintf(buf,"testing 123")!=11); }
EOF
if { (eval echo configure:6596: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      ac_cv_broken_sprintf=no
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      ac_cv_broken_sprintf=yes
    
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_broken_sprintf" 1>&6
  if test "$ac_cv_broken_sprintf" = "yes"; then
    cat >> confdefs.h <<\EOF
#define PHP_BROKEN_SPRINTF 1
EOF

  else
    cat >> confdefs.h <<\EOF
#define PHP_BROKEN_SPRINTF 0
EOF

  fi


  echo $ac_n "checking for declared timezone""... $ac_c" 1>&6
echo "configure:6630: checking for declared timezone" >&5
if eval "test \"`echo '$''{'ac_cv_declared_timezone'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    cat > conftest.$ac_ext <<EOF
#line 6636 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <time.h>
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#endif

int main() {

    time_t foo = (time_t) timezone;

; return 0; }
EOF
if { (eval echo configure:6651: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
  ac_cv_declared_timezone=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
  ac_cv_declared_timezone=no

fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_declared_timezone" 1>&6
  if test "$ac_cv_declared_timezone" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_DECLARED_TIMEZONE 1
EOF

  fi


echo $ac_n "checking for type of reentrant time-related functions""... $ac_c" 1>&6
echo "configure:6677: checking for type of reentrant time-related functions" >&5
if eval "test \"`echo '$''{'ac_cv_time_r_type'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
if test "$cross_compiling" = yes; then
  
  ac_cv_time_r_type=POSIX

else
  cat > conftest.$ac_ext <<EOF
#line 6688 "configure"
#include "confdefs.h"

#include <time.h>
#include <stdlib.h>

main() {
char buf[27];
struct tm t;
time_t old = 0;
int r, s;

s = gmtime_r(&old, &t);
r = (int) asctime_r(&t, buf, 26);
if (r == s && s == 0) exit(0);
exit(1);
}

EOF
if { (eval echo configure:6707: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
  ac_cv_time_r_type=hpux

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  ac_cv_time_r_type=POSIX

fi
rm -fr conftest*
fi


fi

echo "$ac_t""$ac_cv_time_r_type" 1>&6
if test "$ac_cv_time_r_type" = "hpux"; then
  cat >> confdefs.h <<\EOF
#define PHP_HPUX_TIME_R 1
EOF

fi


    echo $ac_n "checking for readdir_r""... $ac_c" 1>&6
echo "configure:6736: checking for readdir_r" >&5
if eval "test \"`echo '$''{'ac_cv_func_readdir_r'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6741 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char readdir_r(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char readdir_r();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_readdir_r) || defined (__stub___readdir_r)
choke me
#else
readdir_r();
#endif

; return 0; }
EOF
if { (eval echo configure:6764: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_readdir_r=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_readdir_r=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'readdir_r`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  ac_cv_func_readdir_r=yes
else
  echo "$ac_t""no" 1>&6
ac_cv_func_readdir=no
fi

  if test "$ac_cv_func_readdir_r" = "yes"; then
  echo $ac_n "checking for type of readdir_r""... $ac_c" 1>&6
echo "configure:6786: checking for type of readdir_r" >&5
if eval "test \"`echo '$''{'ac_cv_what_readdir_r'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  
      ac_cv_what_readdir_r=none
   
else
  cat > conftest.$ac_ext <<EOF
#line 6797 "configure"
#include "confdefs.h"

#define _REENTRANT
#include <sys/types.h>
#include <dirent.h>

main() {
	DIR *dir;
	struct dirent entry, *pentry;

	dir = opendir("/");
	if (!dir) 
		exit(1);
	if (readdir_r(dir, &entry, &pentry) == 0)
		exit(0);
	exit(1);
}
    
EOF
if { (eval echo configure:6817: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      ac_cv_what_readdir_r=POSIX
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      cat > conftest.$ac_ext <<EOF
#line 6828 "configure"
#include "confdefs.h"

#define _REENTRANT
#include <sys/types.h>
#include <dirent.h>
int readdir_r(DIR *, struct dirent *);
        
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:6838: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  
          ac_cv_what_readdir_r=old-style
        
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
          ac_cv_what_readdir_r=none
      
fi
rm -f conftest*
    
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_what_readdir_r" 1>&6
    case "$ac_cv_what_readdir_r" in
    POSIX)
      cat >> confdefs.h <<\EOF
#define HAVE_POSIX_READDIR_R 1
EOF
;;
    old-style)
      cat >> confdefs.h <<\EOF
#define HAVE_OLD_READDIR_R 1
EOF
;;
    esac
  fi


if eval "test \"`echo '$''{'ac_cv_type_$1'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 6883 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
#ifdef HAVE_NETINET_IN_H
#include <netinet/in.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "in_addr_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_in_addr_t=yes
else
  rm -rf conftest*
  ac_cv_type_in_addr_t=no
fi
rm -f conftest*

fi

if test $ac_cv_type_in_addr_t = no; then
  cat >> confdefs.h <<\EOF
#define in_addr_t u_int
EOF

fi







echo $ac_n "checking whether to use a configuration file""... $ac_c" 1>&6
echo "configure:6920: checking whether to use a configuration file" >&5
# Check whether --with-config-file-path or --without-config-file-path was given.
if test "${with_config_file_path+set}" = set; then
  withval="$with_config_file_path"
  PHP_CONFIG_FILE_PATH=$withval
else
  PHP_CONFIG_FILE_PATH=yes
fi


case "$PHP_CONFIG_FILE_PATH" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_CONFIG_FILE_PATH=`echo $ac_n "$PHP_CONFIG_FILE_PATH$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_CONFIG_FILE_PATH=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_CONFIG_FILE_PATH" = "no" && PHP_CONFIG_FILE_PATH=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CONFIG_FILE_PATH" = "yes"; then
  PHP_CONFIG_FILE_PATH="/usr/local/lib"
fi

if test "$PHP_CONFIG_FILE_PATH" != "no"; then
  cat >> confdefs.h <<EOF
#define CONFIGURATION_FILE_PATH "$PHP_CONFIG_FILE_PATH"
EOF

  cat >> confdefs.h <<\EOF
#define USE_CONFIG_FILE 1
EOF

else
  cat >> confdefs.h <<\EOF
#define CONFIGURATION_FILE_PATH 0
EOF

  cat >> confdefs.h <<\EOF
#define USE_CONFIG_FILE 0
EOF

fi



echo $ac_n "checking whether to include debugging symbols""... $ac_c" 1>&6
echo "configure:6989: checking whether to include debugging symbols" >&5
# Check whether --enable-debug or --disable-debug was given.
if test "${enable_debug+set}" = set; then
  enableval="$enable_debug"
  PHP_DEBUG=$enableval
else
  PHP_DEBUG=no
fi


case "$PHP_DEBUG" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_DEBUG=`echo $ac_n "$PHP_DEBUG$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_DEBUG=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_DEBUG" = "no" && PHP_DEBUG=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DEBUG" = "yes"; then
  PHP_DEBUG=1
  ZEND_DEBUG=yes
else
  PHP_DEBUG=0
  ZEND_DEBUG=no
fi


test -n "$DEBUG_CFLAGS" && CFLAGS="$CFLAGS $DEBUG_CFLAGS"



echo $ac_n "checking whether to enable safe mode by default""... $ac_c" 1>&6
echo "configure:7045: checking whether to enable safe mode by default" >&5
# Check whether --enable-safe-mode or --disable-safe-mode was given.
if test "${enable_safe_mode+set}" = set; then
  enableval="$enable_safe_mode"
  PHP_SAFE_MODE=$enableval
else
  PHP_SAFE_MODE=no
fi


case "$PHP_SAFE_MODE" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SAFE_MODE=`echo $ac_n "$PHP_SAFE_MODE$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SAFE_MODE=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_SAFE_MODE" = "no" && PHP_SAFE_MODE=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SAFE_MODE" = "yes"; then
  cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE 1
EOF

else
  cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE 0
EOF

fi

echo $ac_n "checking for safe mode exec dir""... $ac_c" 1>&6
echo "configure:7100: checking for safe mode exec dir" >&5
# Check whether --with-exec-dir or --without-exec-dir was given.
if test "${with_exec_dir+set}" = set; then
  withval="$with_exec_dir"
  
  if test "$withval" != "no"; then
  	if test "$withval" = "yes"; then
		cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE_EXEC_DIR "/usr/local/php/bin"
EOF

    	echo "$ac_t""/usr/local/php/bin" 1>&6
   	else
		cat >> confdefs.h <<EOF
#define PHP_SAFE_MODE_EXEC_DIR "$withval"
EOF

    	echo "$ac_t""$withval" 1>&6
   	fi
  else
	cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE_EXEC_DIR "/usr/local/php/bin"
EOF

   	echo "$ac_t""/usr/local/php/bin" 1>&6
  fi

else
  
	cat >> confdefs.h <<\EOF
#define PHP_SAFE_MODE_EXEC_DIR "/usr/local/php/bin"
EOF

   	echo "$ac_t""/usr/local/php/bin" 1>&6

fi




echo $ac_n "checking whether to enable PHP's own SIGCHLD handler""... $ac_c" 1>&6
echo "configure:7141: checking whether to enable PHP's own SIGCHLD handler" >&5
# Check whether --enable-sigchild or --disable-sigchild was given.
if test "${enable_sigchild+set}" = set; then
  enableval="$enable_sigchild"
  PHP_SIGCHILD=$enableval
else
  PHP_SIGCHILD=no
fi


case "$PHP_SIGCHILD" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SIGCHILD=`echo $ac_n "$PHP_SIGCHILD$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SIGCHILD=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_SIGCHILD" = "no" && PHP_SIGCHILD=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SIGCHILD" = "yes"; then
  cat >> confdefs.h <<\EOF
#define PHP_SIGCHILD 1
EOF

else
  cat >> confdefs.h <<\EOF
#define PHP_SIGCHILD 0
EOF

fi



echo $ac_n "checking whether to enable magic quotes by default""... $ac_c" 1>&6
echo "configure:7198: checking whether to enable magic quotes by default" >&5
# Check whether --enable-magic-quotes or --disable-magic-quotes was given.
if test "${enable_magic_quotes+set}" = set; then
  enableval="$enable_magic_quotes"
  PHP_MAGIC_QUOTES=$enableval
else
  PHP_MAGIC_QUOTES=no
fi


case "$PHP_MAGIC_QUOTES" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MAGIC_QUOTES=`echo $ac_n "$PHP_MAGIC_QUOTES$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MAGIC_QUOTES=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_MAGIC_QUOTES" = "no" && PHP_MAGIC_QUOTES=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MAGIC_QUOTES" = "yes"; then
  cat >> confdefs.h <<\EOF
#define MAGIC_QUOTES 1
EOF

else
  cat >> confdefs.h <<\EOF
#define MAGIC_QUOTES 0
EOF

fi



echo $ac_n "checking whether to enable runpaths""... $ac_c" 1>&6
echo "configure:7255: checking whether to enable runpaths" >&5
# Check whether --enable-rpath or --disable-rpath was given.
if test "${enable_rpath+set}" = set; then
  enableval="$enable_rpath"
  PHP_RPATH=$enableval
else
  PHP_RPATH=yes
fi


case "$PHP_RPATH" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_RPATH=`echo $ac_n "$PHP_RPATH$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_RPATH=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_RPATH" = "no" && PHP_RPATH=yes
fi

echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking whether to explicitly link against libgcc""... $ac_c" 1>&6
echo "configure:7300: checking whether to explicitly link against libgcc" >&5
# Check whether --enable-libgcc or --disable-libgcc was given.
if test "${enable_libgcc+set}" = set; then
  enableval="$enable_libgcc"
  PHP_LIBGCC=$enableval
else
  PHP_LIBGCC=no
fi


case "$PHP_LIBGCC" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_LIBGCC=`echo $ac_n "$PHP_LIBGCC$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_LIBGCC=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_LIBGCC" = "no" && PHP_LIBGCC=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_LIBGCC" = "yes"; then
  
  
  libgcc_libpath="`gcc --print-libgcc-file-name|sed 's%/*[^/][^/]*$%%'`"
  

  if test -z "$libgcc_libpath"; then
    { echo "configure: error: Cannot locate libgcc. Make sure that gcc is in your path" 1>&2; exit 1; }
  fi
  
  if test "$libgcc_libpath" != "/usr/lib"; then
    
  if test -z "$libgcc_libpath" || echo "$libgcc_libpath" | grep '^/' >/dev/null ; then
    ai_p="$libgcc_libpath"
  else
    
    ep_dir="`echo $libgcc_libpath|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$libgcc_libpath\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$libgcc_libpath -L$libgcc_libpath $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  
 case "gcc" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="$LIBS -lgcc"


  ;;
  esac

fi



echo $ac_n "checking whether to enable short tags by default""... $ac_c" 1>&6
echo "configure:7401: checking whether to enable short tags by default" >&5
# Check whether --enable-short-tags or --disable-short-tags was given.
if test "${enable_short_tags+set}" = set; then
  enableval="$enable_short_tags"
  PHP_SHORT_TAGS=$enableval
else
  PHP_SHORT_TAGS=yes
fi


case "$PHP_SHORT_TAGS" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SHORT_TAGS=`echo $ac_n "$PHP_SHORT_TAGS$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SHORT_TAGS=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_SHORT_TAGS" = "no" && PHP_SHORT_TAGS=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SHORT_TAGS" = "yes"; then
  cat >> confdefs.h <<\EOF
#define DEFAULT_SHORT_OPEN_TAG 1
EOF

else
  cat >> confdefs.h <<\EOF
#define DEFAULT_SHORT_OPEN_TAG 0
EOF

fi



echo $ac_n "checking whether to enable the URL-aware fopen wrapper""... $ac_c" 1>&6
echo "configure:7458: checking whether to enable the URL-aware fopen wrapper" >&5
# Check whether --enable-url-fopen-wrapper or --disable-url-fopen-wrapper was given.
if test "${enable_url_fopen_wrapper+set}" = set; then
  enableval="$enable_url_fopen_wrapper"
  PHP_URL_FOPEN_WRAPPER=$enableval
else
  PHP_URL_FOPEN_WRAPPER=yes
fi


case "$PHP_URL_FOPEN_WRAPPER" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_URL_FOPEN_WRAPPER=`echo $ac_n "$PHP_URL_FOPEN_WRAPPER$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_URL_FOPEN_WRAPPER=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_URL_FOPEN_WRAPPER" = "no" && PHP_URL_FOPEN_WRAPPER=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_URL_FOPEN_WRAPPER" = "yes"; then
  cat >> confdefs.h <<\EOF
#define PHP_URL_FOPEN 1
EOF

else
  cat >> confdefs.h <<\EOF
#define PHP_URL_FOPEN 0
EOF

fi



echo $ac_n "checking whether to enable PIC for shared objects""... $ac_c" 1>&6
echo "configure:7515: checking whether to enable PIC for shared objects" >&5
# Check whether --enable-pic or --disable-pic was given.
if test "${enable_pic+set}" = set; then
  enableval="$enable_pic"
  PHP_PIC=$enableval
else
  PHP_PIC=yes
fi


case "$PHP_PIC" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PIC=`echo $ac_n "$PHP_PIC$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PIC=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_PIC" = "no" && PHP_PIC=yes
fi

echo "$ac_t""$ext_output" 1>&6







echo $ac_n "checking whether to enable dmalloc""... $ac_c" 1>&6
echo "configure:7561: checking whether to enable dmalloc" >&5
# Check whether --enable-dmalloc or --disable-dmalloc was given.
if test "${enable_dmalloc+set}" = set; then
  enableval="$enable_dmalloc"
  PHP_DMALLOC=$enableval
else
  PHP_DMALLOC=no
fi


case "$PHP_DMALLOC" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_DMALLOC=`echo $ac_n "$PHP_DMALLOC$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_DMALLOC=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_DMALLOC" = "no" && PHP_DMALLOC=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DMALLOC" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_DMALLOC 1
EOF

  
 case "dmalloc" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ldmalloc $LIBS"


  ;;
  esac

  CPPFLAGS="$CPPFLAGS -DDMALLOC_FUNC_CHECK"
fi



echo $ac_n "checking whether to install PEAR""... $ac_c" 1>&6
echo "configure:7626: checking whether to install PEAR" >&5
# Check whether --enable-pear or --disable-pear was given.
if test "${enable_pear+set}" = set; then
  enableval="$enable_pear"
  PHP_PEAR=$enableval
else
  PHP_PEAR=yes
fi


case "$PHP_PEAR" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PEAR=`echo $ac_n "$PHP_PEAR$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PEAR=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_PEAR" = "no" && PHP_PEAR=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PEAR" = "yes"; then
  PEAR_DIR=pear
fi


  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES pear/pear"


  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES pear/phpize"


  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES pear/php-config"


  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES pear/PEAR.php"






  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring extensions${T_ME}" 1>&6

	
# reading config stubs

echo $ac_n "checking for ASPELL support""... $ac_c" 1>&6
echo "configure:7696: checking for ASPELL support" >&5
# Check whether --with-aspell or --without-aspell was given.
if test "${with_aspell+set}" = set; then
  withval="$with_aspell"
  
  if test "$withval" != "no"; then
    if test "$withval" = "yes"; then
      ASPELL_DIR=/usr/local
    else
      ASPELL_DIR=$withval
    fi

    
  if test "$ASPELL_DIR/include" != "/usr/include"; then
    
  if test -z "$ASPELL_DIR/include" || echo "$ASPELL_DIR/include" | grep '^/' >/dev/null ; then
    ai_p="$ASPELL_DIR/include"
  else
    
    ep_dir="`echo $ASPELL_DIR/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ASPELL_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

    

  if test -n "$ASPELL_DIR/lib"; then
    
  if test "$ASPELL_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ASPELL_DIR/lib" || echo "$ASPELL_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ASPELL_DIR/lib"
  else
    
    ep_dir="`echo $ASPELL_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ASPELL_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ASPELL_DIR/lib -L$ASPELL_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "aspell" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-laspell $LIBS"


  ;;
  esac




    if test ! -f "$ASPELL_DIR/include/aspell-c.h"; then
      { echo "configure: error: Could not find aspell-c.h in $ASPELL_DIR/include - please copy it manually from the aspell sources to $ASPELL_DIR/include" 1>&2; exit 1; }
    fi
    cat >> confdefs.h <<\EOF
#define HAVE_ASPELL 1
EOF

    echo "$ac_t""yes" 1>&6
	
  EXT_SUBDIRS="$EXT_SUBDIRS aspell"
  
  if test -d "$abs_srcdir/ext/aspell"; then
    ext_builddir="ext/aspell"
    ext_srcdir="$abs_srcdir/ext/aspell"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libaspell.la"
    EXT_STATIC="$EXT_STATIC aspell"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_ASPELL 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  else
    { echo "configure: error: no" 1>&2; exit 1; }
  fi

else
  
  echo "$ac_t""no" 1>&6

fi





echo $ac_n "checking whether to enable bc style precision math functions""... $ac_c" 1>&6
echo "configure:7933: checking whether to enable bc style precision math functions" >&5
# Check whether --enable-bcmath or --disable-bcmath was given.
if test "${enable_bcmath+set}" = set; then
  enableval="$enable_bcmath"
  PHP_BCMATH=$enableval
else
  PHP_BCMATH=no
fi


case "$PHP_BCMATH" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_BCMATH=`echo $ac_n "$PHP_BCMATH$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_BCMATH=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_BCMATH" = "no" && PHP_BCMATH=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_BCMATH" != "no"; then
  cat >> confdefs.h <<\EOF
#define WITH_BCMATH 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS bcmath"
  
  if test -d "$abs_srcdir/ext/bcmath"; then
    ext_builddir="ext/bcmath"
    ext_srcdir="$abs_srcdir/ext/bcmath"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libbcmath.la"
    EXT_STATIC="$EXT_STATIC bcmath"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_BCMATH 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  if test ! -f $ext_srcdir/number.c || grep "Dummy File" $ext_srcdir/number.c >/dev/null; then
    { echo "configure: error: You do not have the bcmath package. Please read the README.BCMATH file." 1>&2; exit 1; }
  fi
fi





echo $ac_n "checking whether to enable calendar conversion support""... $ac_c" 1>&6
echo "configure:8113: checking whether to enable calendar conversion support" >&5
# Check whether --enable-calendar or --disable-calendar was given.
if test "${enable_calendar+set}" = set; then
  enableval="$enable_calendar"
  PHP_CALENDAR=$enableval
else
  PHP_CALENDAR=no
fi


case "$PHP_CALENDAR" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_CALENDAR=`echo $ac_n "$PHP_CALENDAR$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_CALENDAR=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_CALENDAR" = "no" && PHP_CALENDAR=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CALENDAR" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_CALENDAR 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS calendar"
  
  if test -d "$abs_srcdir/ext/calendar"; then
    ext_builddir="ext/calendar"
    ext_srcdir="$abs_srcdir/ext/calendar"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libcalendar.la"
    EXT_STATIC="$EXT_STATIC calendar"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_CALENDAR 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi


echo $ac_n "checking CCVS Support""... $ac_c" 1>&6
echo "configure:8287: checking CCVS Support" >&5
# Check whether --with-ccvs or --without-ccvs was given.
if test "${with_ccvs+set}" = set; then
  withval="$with_ccvs"
  
  if test "$withval" != "no"; then
     CCVS_DIR="$withval"
	test -f $withval/include/cv_api.h && CCVS_INCLUDE_DIR="$withval/include"
    test -f $withval/lib/libccvs.a && CCVS_LIB_DIR="$withval/lib"

     	if test -n "$CCVS_DIR"; then
		echo "$ac_t""yes" 1>&6
		
  EXT_SUBDIRS="$EXT_SUBDIRS ccvs"
  
  if test -d "$abs_srcdir/ext/ccvs"; then
    ext_builddir="ext/ccvs"
    ext_srcdir="$abs_srcdir/ext/ccvs"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libccvs.la"
    EXT_STATIC="$EXT_STATIC ccvs"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_CCVS 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


		LIBS="$LIBS -L$CCVS_LIB_DIR"
		

  if test -n "$CCVS_LIB_DIR"; then
    
  if test "$CCVS_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$CCVS_LIB_DIR" || echo "$CCVS_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p="$CCVS_LIB_DIR"
  else
    
    ep_dir="`echo $CCVS_LIB_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CCVS_LIB_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$CCVS_LIB_DIR -L$CCVS_LIB_DIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ccvs" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lccvs $LIBS"


  ;;
  esac



		
  if test "$CCVS_INCLUDE_DIR" != "/usr/include"; then
    
  if test -z "$CCVS_INCLUDE_DIR" || echo "$CCVS_INCLUDE_DIR" | grep '^/' >/dev/null ; then
    ai_p="$CCVS_INCLUDE_DIR"
  else
    
    ep_dir="`echo $CCVS_INCLUDE_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CCVS_INCLUDE_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

    	  else
    	    echo "$ac_t""no" 1>&6
    	  fi
	fi

else
  
  echo "$ac_t""no" 1>&6

fi



echo $ac_n "checking whether to include cpdflib support""... $ac_c" 1>&6
echo "configure:8515: checking whether to include cpdflib support" >&5
# Check whether --with-cpdflib or --without-cpdflib was given.
if test "${with_cpdflib+set}" = set; then
  withval="$with_cpdflib"
  
  case "$withval" in
    no)
      echo "$ac_t""no" 1>&6 ;;
    yes)
      echo "$ac_t""yes" 1>&6
      
  EXT_SUBDIRS="$EXT_SUBDIRS cpdf"
  
  if test -d "$abs_srcdir/ext/cpdf"; then
    ext_builddir="ext/cpdf"
    ext_srcdir="$abs_srcdir/ext/cpdf"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libcpdf.la"
    EXT_STATIC="$EXT_STATIC cpdf"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_CPDF 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


      echo $ac_n "checking for cpdf_open in -lcpdf""... $ac_c" 1>&6
echo "configure:8649: checking for cpdf_open in -lcpdf" >&5
ac_lib_var=`echo cpdf'_'cpdf_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcpdf  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 8657 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cpdf_open();

int main() {
cpdf_open()
; return 0; }
EOF
if { (eval echo configure:8668: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_CPDFLIB 1
EOF

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Cpdf module requires cpdflib >= 2." 1>&2; exit 1; }
fi

      
 case "cpdf" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcpdf $LIBS"


  ;;
  esac

      
 case "tiff" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ltiff $LIBS"


  ;;
  esac

      
 case "jpeg" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ljpeg $LIBS"


  ;;
  esac

      ;;
    *)
      test -f $withval/include/cpdflib.h && CPDFLIB_INCLUDE="$withval/include"
      if test -n "$CPDFLIB_INCLUDE" ; then
        echo "$ac_t""yes" 1>&6
        
  EXT_SUBDIRS="$EXT_SUBDIRS cpdf"
  
  if test -d "$abs_srcdir/ext/cpdf"; then
    ext_builddir="ext/cpdf"
    ext_srcdir="$abs_srcdir/ext/cpdf"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libcpdf.la"
    EXT_STATIC="$EXT_STATIC cpdf"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_CPDF 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


        old_LIBS=$LIBS
        old_withval=$withval

        echo $ac_n "checking for libjpeg (needed by cpdflib 2.x)""... $ac_c" 1>&6
echo "configure:8860: checking for libjpeg (needed by cpdflib 2.x)" >&5
        # Check whether --with-jpeg-dir or --without-jpeg-dir was given.
if test "${with_jpeg_dir+set}" = set; then
  withval="$with_jpeg_dir"
  
          echo "$ac_t""yes" 1>&6
          if test -z $withval; then
            withval="/usr/local"
          fi
          LIBS="$LIBS -L$withval/lib"
          echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
echo "configure:8871: checking for jpeg_read_header in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 8879 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_read_header();

int main() {
jpeg_read_header()
; return 0; }
EOF
if { (eval echo configure:8890: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo jpeg | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-ljpeg $LIBS"

else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "jpeg" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ljpeg $LIBS"


  ;;
  esac



        
else
  
          echo "$ac_t""no" 1>&6
          echo "configure: warning: If configure fails try --with-jpeg-dir=<DIR>" 1>&2
        
fi
 

        echo $ac_n "checking for libtiff (needed by cpdflib 2.x)""... $ac_c" 1>&6
echo "configure:8979: checking for libtiff (needed by cpdflib 2.x)" >&5
        # Check whether --with-tiff-dir or --without-tiff-dir was given.
if test "${with_tiff_dir+set}" = set; then
  withval="$with_tiff_dir"
  
          echo "$ac_t""yes" 1>&6
          if test -z $withval; then
            withval="/usr/local"
          fi
          LIBS="$LIBS -L$withval/lib"
          echo $ac_n "checking for TIFFOpen in -ltiff""... $ac_c" 1>&6
echo "configure:8990: checking for TIFFOpen in -ltiff" >&5
ac_lib_var=`echo tiff'_'TIFFOpen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltiff  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 8998 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char TIFFOpen();

int main() {
TIFFOpen()
; return 0; }
EOF
if { (eval echo configure:9009: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo tiff | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-ltiff $LIBS"

else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "tiff" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ltiff $LIBS"


  ;;
  esac



        
else
  
          echo "$ac_t""no" 1>&6
          echo "configure: warning: If configure fails try --with-tiff-dir=<DIR>" 1>&2
        
fi
 
        withval=$old_withval

          LIBS="$LIBS -L$withval/lib"
        echo $ac_n "checking for cpdf_open in -lcpdf""... $ac_c" 1>&6
echo "configure:9100: checking for cpdf_open in -lcpdf" >&5
ac_lib_var=`echo cpdf'_'cpdf_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcpdf  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 9108 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cpdf_open();

int main() {
cpdf_open()
; return 0; }
EOF
if { (eval echo configure:9119: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_CPDFLIB 1
EOF

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Cpdflib module requires cpdflib >= 2." 1>&2; exit 1; }
fi

        LIBS=$old_LIBS
        

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "cpdf" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcpdf $LIBS"


  ;;
  esac



        
  if test "$CPDFLIB_INCLUDE" != "/usr/include"; then
    
  if test -z "$CPDFLIB_INCLUDE" || echo "$CPDFLIB_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$CPDFLIB_INCLUDE"
  else
    
    ep_dir="`echo $CPDFLIB_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CPDFLIB_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

      else
        echo "$ac_t""no" 1>&6
      fi ;;
  esac

else
  
  echo "$ac_t""no" 1>&6

fi





echo $ac_n "checking for CURL support""... $ac_c" 1>&6
echo "configure:9238: checking for CURL support" >&5
# Check whether --with-curl or --without-curl was given.
if test "${with_curl+set}" = set; then
  withval="$with_curl"
  PHP_CURL=$withval
else
  PHP_CURL=no
fi


case "$PHP_CURL" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_CURL=`echo $ac_n "$PHP_CURL$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_CURL=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_CURL" = "no" && PHP_CURL=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_CURL" != "no"; then
  if test -r $PHP_CURL/include/curl/easy.h; then
    CURL_DIR=$PHP_CURL
  else
    echo $ac_n "checking for CURL in default path""... $ac_c" 1>&6
echo "configure:9285: checking for CURL in default path" >&5
    for i in /usr/local /usr; do
      if test -r $i/include/curl/easy.h; then
        CURL_DIR=$i
        echo "$ac_t""found in $i" 1>&6
      fi
    done
  fi

  if test -z "$CURL_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the libcurl distribution -
    easy.h should be in <curl-dir>/include/curl/" 1>&2; exit 1; }
  fi

  
  if test "$CURL_DIR/include" != "/usr/include"; then
    
  if test -z "$CURL_DIR/include" || echo "$CURL_DIR/include" | grep '^/' >/dev/null ; then
    ai_p="$CURL_DIR/include"
  else
    
    ep_dir="`echo $CURL_DIR/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CURL_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST CURL_SHARED_LIBADD"
  

  

  if test "$ext_shared" = "yes"; then
    CURL_SHARED_LIBADD="-lcurl $CURL_SHARED_LIBADD"
    if test -n "$CURL_DIR/lib"; then
      
  if test "$CURL_DIR/lib" != "/usr/lib"; then
    
  if test -z "$CURL_DIR/lib" || echo "$CURL_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$CURL_DIR/lib"
  else
    
    ep_dir="`echo $CURL_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CURL_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "CURL_SHARED_LIBADD"; then
      CURL_SHARED_LIBADD="-R$CURL_DIR/lib -L$CURL_DIR/lib $CURL_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$CURL_DIR/lib"; then
    
  if test "$CURL_DIR/lib" != "/usr/lib"; then
    
  if test -z "$CURL_DIR/lib" || echo "$CURL_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$CURL_DIR/lib"
  else
    
    ep_dir="`echo $CURL_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$CURL_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$CURL_DIR/lib -L$CURL_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "curl" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcurl $LIBS"


  ;;
  esac



  fi



  cat >> confdefs.h <<\EOF
#define HAVE_CURL 1
EOF


  
  EXT_SUBDIRS="$EXT_SUBDIRS curl"
  
  if test -d "$abs_srcdir/ext/curl"; then
    ext_builddir="ext/curl"
    ext_srcdir="$abs_srcdir/ext/curl"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libcurl.la"
    EXT_STATIC="$EXT_STATIC curl"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_CURL 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi

echo $ac_n "checking for CyberCash support""... $ac_c" 1>&6
echo "configure:9558: checking for CyberCash support" >&5
# Check whether --with-cybercash or --without-cybercash was given.
if test "${with_cybercash+set}" = set; then
  withval="$with_cybercash"
  
  if test "$withval" != "no"; then
      test -f $withval/mckcrypt.h && MCK_DIR="$withval"
      test -f $withval/c-api/mckcrypt.h && MCK_DIR="$withval/c-api"
      if test -n "$MCK_DIR"; then
	echo "$ac_t""yes" 1>&6
	
  EXT_SUBDIRS="$EXT_SUBDIRS cybercash"
  
  if test -d "$abs_srcdir/ext/cybercash"; then
    ext_builddir="ext/cybercash"
    ext_srcdir="$abs_srcdir/ext/cybercash"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libcybercash.la"
    EXT_STATIC="$EXT_STATIC cybercash"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_CYBERCASH 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


	old_LIBS="$LIBS"
	LIBS="$LIBS -L$MCK_DIR/lib"
	echo $ac_n "checking for base64_encode in -lmckcrypto""... $ac_c" 1>&6
echo "configure:9694: checking for base64_encode in -lmckcrypto" >&5
ac_lib_var=`echo mckcrypto'_'base64_encode | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmckcrypto  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 9702 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char base64_encode();

int main() {
base64_encode()
; return 0; }
EOF
if { (eval echo configure:9713: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_MCK 1
EOF

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Please reinstall the CyberCash MCK - cannot find mckcrypto lib" 1>&2; exit 1; }
fi

	LIBS="$old_LIBS"
	

  if test -n "$MCK_DIR/lib"; then
    
  if test "$MCK_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MCK_DIR/lib" || echo "$MCK_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$MCK_DIR/lib"
  else
    
    ep_dir="`echo $MCK_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCK_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$MCK_DIR/lib -L$MCK_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "mckcrypto" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lmckcrypto $LIBS"


  ;;
  esac



	
  if test "$MCK_DIR" != "/usr/include"; then
    
  if test -z "$MCK_DIR" || echo "$MCK_DIR" | grep '^/' >/dev/null ; then
    ai_p="$MCK_DIR"
  else
    
    ep_dir="`echo $MCK_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCK_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

      else
        echo "$ac_t""no" 1>&6
      fi
fi

else
  
  echo "$ac_t""no" 1>&6

fi



echo $ac_n "checking whether to enable DAV support through mod_dav""... $ac_c" 1>&6
echo "configure:9830: checking whether to enable DAV support through mod_dav" >&5
# Check whether --with-mod-dav or --without-mod-dav was given.
if test "${with_mod_dav+set}" = set; then
  withval="$with_mod_dav"
  
  if test "$withval" = "yes"; then
    { echo "configure: error: Must give parameter to --with-mod-dav!" 1>&2; exit 1; }
  else
    if test "$withval" != "no"; then
      echo "$ac_t""yes" 1>&6
      cat >> confdefs.h <<\EOF
#define HAVE_MOD_DAV 1
EOF

      CFLAGS="$CFLAGS -DHAVE_MOD_DAV -I$withval"
      INCLUDES="$INCLUDES -I$withval"
      
  EXT_SUBDIRS="$EXT_SUBDIRS dav"
  
  if test -d "$abs_srcdir/ext/dav"; then
    ext_builddir="ext/dav"
    ext_srcdir="$abs_srcdir/ext/dav"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libdav.la"
    EXT_STATIC="$EXT_STATIC dav"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_DAV 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


    else
      echo "$ac_t""no" 1>&6
      cat >> confdefs.h <<\EOF
#define HAVE_MOD_DAV 0
EOF

    fi
  fi

else
  
  echo "$ac_t""no" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_MOD_DAV 0
EOF


fi





for ac_hdr in db1/ndbm.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:9996: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10001 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10006: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


# Checks for libraries.
# Prefer gdbm, Berkeley DB and ndbm/dbm, in that order



  echo $ac_n "checking for gdbm_open in -lgdbm""... $ac_c" 1>&6
echo "configure:10039: checking for gdbm_open in -lgdbm" >&5
ac_lib_var=`echo gdbm'_'gdbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgdbm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10047 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdbm_open();

int main() {
gdbm_open()
; return 0; }
EOF
if { (eval echo configure:10058: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define GDBM 1
EOF
 DBM_TYPE=gdbm; DBM_LIB=-lgdbm
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dbm_open in -ldb""... $ac_c" 1>&6
echo "configure:10080: checking for dbm_open in -ldb" >&5
ac_lib_var=`echo db'_'dbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldb  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10088 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:10099: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define NDBM 1
EOF
 DBM_TYPE=ndbm; DBM_LIB=-ldb
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dbm_open in -lc""... $ac_c" 1>&6
echo "configure:10121: checking for dbm_open in -lc" >&5
ac_lib_var=`echo c'_'dbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10129 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:10140: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define NDBM 1
EOF
 DBM_TYPE=ndbm; DBM_LIB=
else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for dbm_open in -ldbm""... $ac_c" 1>&6
echo "configure:10162: checking for dbm_open in -ldbm" >&5
ac_lib_var=`echo dbm'_'dbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldbm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10170 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:10181: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define NDBM 1
EOF
 DBM_TYPE=ndbm; DBM_LIB=-ldbm
else
  echo "$ac_t""no" 1>&6
DBM_TYPE=""
fi

fi

fi

fi

  echo $ac_n "checking preferred dbm library""... $ac_c" 1>&6
echo "configure:10212: checking preferred dbm library" >&5
  if test "a$DBM_TYPE" = a; then
    echo "$ac_t""none found" 1>&6
    echo "configure: warning: No dbm library found - using built-in flatfile support" 1>&2
  else
    echo "$ac_t""$DBM_TYPE chosen" 1>&6
  fi
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DBM_LIB"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DBM_TYPE"
  




if test "$DBM_LIB" = "-lgdbm"; then
  ac_safe=`echo "gdbm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for gdbm.h""... $ac_c" 1>&6
echo "configure:10233: checking for gdbm.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10238 "configure"
#include "confdefs.h"
#include <gdbm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10243: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   GDBM_INCLUDE="" 
else
  echo "$ac_t""no" 1>&6
 
    echo "$ac_t"""Try /usr/local/include/gdbm.h"" 1>&6; 
    ac_safe=`echo "/usr/local/include/gdbm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for /usr/local/include/gdbm.h""... $ac_c" 1>&6
echo "configure:10266: checking for /usr/local/include/gdbm.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10271 "configure"
#include "confdefs.h"
#include </usr/local/include/gdbm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10276: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   GDBM_INCLUDE="-I/usr/local/include" 
else
  echo "$ac_t""no" 1>&6

      echo "$ac_t"""Try /opt/local/include/gdbm.h"" 1>&6;
      ac_safe=`echo "/opt/local/include/gdbm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for /opt/local/include/gdbm.h""... $ac_c" 1>&6
echo "configure:10299: checking for /opt/local/include/gdbm.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10304 "configure"
#include "confdefs.h"
#include </opt/local/include/gdbm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10309: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   GDBM_INCLUDE="-I/opt/local/include" 
else
  echo "$ac_t""no" 1>&6

                echo "$ac_t"""Try /usr/pkg/include/gdbm.h"" 1>&6;
        ac_safe=`echo "/usr/pkg/include/gdbm.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for /usr/pkg/include/gdbm.h""... $ac_c" 1>&6
echo "configure:10332: checking for /usr/pkg/include/gdbm.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 10337 "configure"
#include "confdefs.h"
#include </usr/pkg/include/gdbm.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:10342: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   GDBM_INCLUDE="" 
else
  echo "$ac_t""no" 1>&6

          echo "$ac_t"""Giving up - You need to install gdbm.h somewhere"" 1>&6;
          exit
        
fi

      
fi

    
fi
  
  
fi

fi

if test -n "$DBM_LIB"; then
  INCLUDES="$INCLUDES $GDBM_INCLUDE"
  EXTRA_LIBS="$EXTRA_LIBS $DBM_LIB"
fi


  EXT_SUBDIRS="$EXT_SUBDIRS db"
  
  if test -d "$abs_srcdir/ext/db"; then
    ext_builddir="ext/db"
    ext_srcdir="$abs_srcdir/ext/db"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libdb.la"
    EXT_STATIC="$EXT_STATIC db"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_DB 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


















echo $ac_n "checking whether to enable DBA""... $ac_c" 1>&6
echo "configure:10523: checking whether to enable DBA" >&5
# Check whether --enable-dba or --disable-dba was given.
if test "${enable_dba+set}" = set; then
  enableval="$enable_dba"
  PHP_DBA=$enableval
else
  PHP_DBA=no
fi


case "$PHP_DBA" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_DBA=`echo $ac_n "$PHP_DBA$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_DBA=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_DBA" = "no" && PHP_DBA=yes
fi

echo "$ac_t""$ext_output" 1>&6




# Check whether --with-gdbm or --without-gdbm was given.
if test "${with_gdbm+set}" = set; then
  withval="$with_gdbm"
  
  if test "$withval" != "no"; then
    for i in /usr/local /usr $withval; do
      if test -f "$i/include/gdbm.h"; then
        THIS_PREFIX="$i"
      fi
    done

    unset ac_cv_lib_gdbm_gdbm_open
    
  old_LDFLAGS="$LDFLAGS"
  LDFLAGS="-L$THIS_PREFIX/lib $LDFLAGS"
  
    echo $ac_n "checking for gdbm_open in -lgdbm""... $ac_c" 1>&6
echo "configure:10582: checking for gdbm_open in -lgdbm" >&5
ac_lib_var=`echo gdbm'_'gdbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgdbm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10590 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdbm_open();

int main() {
gdbm_open()
; return 0; }
EOF
if { (eval echo configure:10601: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define DBA_GDBM 1
EOF
 THIS_LIBS="gdbm"
else
  echo "$ac_t""no" 1>&6
fi

    
  LDFLAGS="$old_LDFLAGS"

    
    
  if test "$THIS_PREFIX" != "" -a "$THIS_PREFIX" != "/usr"; then
    THIS_INCLUDE="$THIS_PREFIX/include"
    THIS_LFLAGS="$THIS_PREFIX/lib"
  fi

    
  THIS_RESULT="yes"
  if test "$THIS_PREFIX" != "/usr"; then
  if test "$THIS_INCLUDE" = "" ; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  elif test "$THIS_LIBS" = "" ; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi
  fi

    
  
  if test "$THIS_INCLUDE" != "/usr/include"; then
    
  if test -z "$THIS_INCLUDE" || echo "$THIS_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$THIS_INCLUDE"
  else
    
    ep_dir="`echo $THIS_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "DBA_SHARED_LIBADD"; then
      DBA_SHARED_LIBADD="-R$THIS_LFLAGS -L$THIS_LFLAGS $DBA_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$THIS_LFLAGS -L$THIS_LFLAGS $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "$THIS_LIBS" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$THIS_LIBS $LIBS"


  ;;
  esac



  fi



  THIS_INCLUDE=""
  THIS_LIBS=""
  THIS_LFLAGS=""
  THIS_PREFIX=""

  fi

fi

echo $ac_n "checking for GDBM support""... $ac_c" 1>&6
echo "configure:10777: checking for GDBM support" >&5

  if test "$THIS_RESULT" = "yes"; then
    HAVE_DBA=1
    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  THIS_RESULT=""


# Check whether --with-ndbm or --without-ndbm was given.
if test "${with_ndbm+set}" = set; then
  withval="$with_ndbm"
  
  if test "$withval" != "no"; then
    for i in /usr/local /usr $withval; do
      if test -f "$i/include/db1/ndbm.h" ; then
        THIS_PREFIX="$i"
        NDBM_EXTRA="db1/ndbm.h"
      elif test -f "$i/include/ndbm.h" ; then
        THIS_PREFIX="$i"
        NDBM_EXTRA="ndbm.h"
      fi
	done
    
    if test "$NDBM_EXTRA" != ""; then
      cat >> confdefs.h <<EOF
#define NDBM_INCLUDE_FILE "$NDBM_EXTRA"
EOF

    fi

    for LIB in db1 ndbm c; do
      
  old_LDFLAGS="$LDFLAGS"
  LDFLAGS="-L$THIS_PREFIX/lib $LDFLAGS"
  
      echo $ac_n "checking for dbm_open in -l$LIB""... $ac_c" 1>&6
echo "configure:10816: checking for dbm_open in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'dbm_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 10824 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbm_open();

int main() {
dbm_open()
; return 0; }
EOF
if { (eval echo configure:10835: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define DBA_NDBM 1
EOF
 THIS_LIBS="$LIB"
else
  echo "$ac_t""no" 1>&6
fi

      
  LDFLAGS="$old_LDFLAGS"

    done
    
    
  if test "$THIS_PREFIX" != "" -a "$THIS_PREFIX" != "/usr"; then
    THIS_INCLUDE="$THIS_PREFIX/include"
    THIS_LFLAGS="$THIS_PREFIX/lib"
  fi

    
  THIS_RESULT="yes"
  if test "$THIS_PREFIX" != "/usr"; then
  if test "$THIS_INCLUDE" = "" ; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  elif test "$THIS_LIBS" = "" ; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi
  fi

    
  
  if test "$THIS_INCLUDE" != "/usr/include"; then
    
  if test -z "$THIS_INCLUDE" || echo "$THIS_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$THIS_INCLUDE"
  else
    
    ep_dir="`echo $THIS_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "DBA_SHARED_LIBADD"; then
      DBA_SHARED_LIBADD="-R$THIS_LFLAGS -L$THIS_LFLAGS $DBA_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$THIS_LFLAGS -L$THIS_LFLAGS $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "$THIS_LIBS" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$THIS_LIBS $LIBS"


  ;;
  esac



  fi



  THIS_INCLUDE=""
  THIS_LIBS=""
  THIS_LFLAGS=""
  THIS_PREFIX=""

  fi

fi

echo $ac_n "checking for NDBM support""... $ac_c" 1>&6
echo "configure:11012: checking for NDBM support" >&5

  if test "$THIS_RESULT" = "yes"; then
    HAVE_DBA=1
    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  THIS_RESULT=""


# Check whether --with-db2 or --without-db2 was given.
if test "${with_db2+set}" = set; then
  withval="$with_db2"
  
  if test "$withval" != "no"; then
    for i in /usr/local /usr /usr/BerkeleyDB $withval; do
      if test -f "$i/db2/db.h"; then
        THIS_PREFIX="$i"
        DB2_EXTRA="db2"
      elif test -f "$i/include/db2/db.h"; then
        THIS_PREFIX="$i"
        DB2_EXTRA="db2/db.h"
      elif test -f "$i/include/db/db2.h"; then
        THIS_PREFIX="$i"
        DB2_EXTRA="db/db2.h"
      elif test -f "$i/include/db2.h"; then
        THIS_PREFIX="$i"
        DB2_EXTRA="db2.h"
      elif test -f "$i/include/db.h" ; then
        THIS_PREFIX="$i"
        DB2_EXTRA="db.h"
      fi
	done

    if test "$DB2_EXTRA" = "db2" ; then
      DBA_INCLUDE="$DBA_INCLUDE -I$THIS_PREFIX/db2"
      DB2_EXTRA="db.h"
    fi
    
    if test -n "$DB2_EXTRA"; then
      cat >> confdefs.h <<EOF
#define DB2_INCLUDE_FILE "$DB2_EXTRA"
EOF

    fi

    for LIB in db db2 c; do
      
  old_LDFLAGS="$LDFLAGS"
  LDFLAGS="-L$THIS_PREFIX/lib $LDFLAGS"
  
      echo $ac_n "checking for db_appinit in -l$LIB""... $ac_c" 1>&6
echo "configure:11065: checking for db_appinit in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'db_appinit | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11073 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char db_appinit();

int main() {
db_appinit()
; return 0; }
EOF
if { (eval echo configure:11084: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define DBA_DB2 1
EOF
 THIS_LIBS="$LIB"
else
  echo "$ac_t""no" 1>&6
fi

      
  LDFLAGS="$old_LDFLAGS"

    done
    
    
  if test "$THIS_PREFIX" != "" -a "$THIS_PREFIX" != "/usr"; then
    THIS_INCLUDE="$THIS_PREFIX/include"
    THIS_LFLAGS="$THIS_PREFIX/lib"
  fi

    
  THIS_RESULT="yes"
  if test "$THIS_PREFIX" != "/usr"; then
  if test "$THIS_INCLUDE" = "" ; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  elif test "$THIS_LIBS" = "" ; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi
  fi

    
  
  if test "$THIS_INCLUDE" != "/usr/include"; then
    
  if test -z "$THIS_INCLUDE" || echo "$THIS_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$THIS_INCLUDE"
  else
    
    ep_dir="`echo $THIS_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "DBA_SHARED_LIBADD"; then
      DBA_SHARED_LIBADD="-R$THIS_LFLAGS -L$THIS_LFLAGS $DBA_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$THIS_LFLAGS -L$THIS_LFLAGS $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "$THIS_LIBS" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$THIS_LIBS $LIBS"


  ;;
  esac



  fi



  THIS_INCLUDE=""
  THIS_LIBS=""
  THIS_LFLAGS=""
  THIS_PREFIX=""

  fi

fi

echo $ac_n "checking for Berkeley DB2 support""... $ac_c" 1>&6
echo "configure:11261: checking for Berkeley DB2 support" >&5

  if test "$THIS_RESULT" = "yes"; then
    HAVE_DBA=1
    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  THIS_RESULT=""


# Check whether --with-db3 or --without-db3 was given.
if test "${with_db3+set}" = set; then
  withval="$with_db3"
  
  if test "$withval" != "no"; then
    for i in /usr/local /usr /usr/local/BerkeleyDB.3.0 $withval; do
      if test -f "$i/include/db.h" ; then
        THIS_PREFIX="$i"
        DB3_EXTRA="db.h"
      fi
    done

    if test -n "$DB3_EXTRA"; then
      cat >> confdefs.h <<EOF
#define DB3_INCLUDE_FILE "$DB3_EXTRA"
EOF

    fi

    for LIB in db db-3; do
      
  old_LDFLAGS="$LDFLAGS"
  LDFLAGS="-L$THIS_PREFIX/lib $LDFLAGS"
  
      echo $ac_n "checking for db_create in -l$LIB""... $ac_c" 1>&6
echo "configure:11297: checking for db_create in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'db_create | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11305 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char db_create();

int main() {
db_create()
; return 0; }
EOF
if { (eval echo configure:11316: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define DBA_DB3 1
EOF
 THIS_LIBS="$LIB"
else
  echo "$ac_t""no" 1>&6
fi

      
  LDFLAGS="$old_LDFLAGS"

    done
    
    
  if test "$THIS_PREFIX" != "" -a "$THIS_PREFIX" != "/usr"; then
    THIS_INCLUDE="$THIS_PREFIX/include"
    THIS_LFLAGS="$THIS_PREFIX/lib"
  fi

    
  THIS_RESULT="yes"
  if test "$THIS_PREFIX" != "/usr"; then
  if test "$THIS_INCLUDE" = "" ; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  elif test "$THIS_LIBS" = "" ; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi
  fi

    
  
  if test "$THIS_INCLUDE" != "/usr/include"; then
    
  if test -z "$THIS_INCLUDE" || echo "$THIS_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$THIS_INCLUDE"
  else
    
    ep_dir="`echo $THIS_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "DBA_SHARED_LIBADD"; then
      DBA_SHARED_LIBADD="-R$THIS_LFLAGS -L$THIS_LFLAGS $DBA_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$THIS_LFLAGS -L$THIS_LFLAGS $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "$THIS_LIBS" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$THIS_LIBS $LIBS"


  ;;
  esac



  fi



  THIS_INCLUDE=""
  THIS_LIBS=""
  THIS_LFLAGS=""
  THIS_PREFIX=""

  fi

fi

echo $ac_n "checking for Berkeley DB3 support""... $ac_c" 1>&6
echo "configure:11493: checking for Berkeley DB3 support" >&5

  if test "$THIS_RESULT" = "yes"; then
    HAVE_DBA=1
    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  THIS_RESULT=""


# Check whether --with-dbm or --without-dbm was given.
if test "${with_dbm+set}" = set; then
  withval="$with_dbm"
  
  if test "$withval" != "no"; then
    for i in /usr/local /usr $withval; do
      if test -f "$i/include/dbm.h" ; then
        THIS_PREFIX="$i"
      fi
	done

    for LIB in db1 dbm c; do
      
  old_LDFLAGS="$LDFLAGS"
  LDFLAGS="-L$THIS_PREFIX/lib $LDFLAGS"
  
      echo $ac_n "checking for dbminit in -l$LIB""... $ac_c" 1>&6
echo "configure:11521: checking for dbminit in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'dbminit | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11529 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dbminit();

int main() {
dbminit()
; return 0; }
EOF
if { (eval echo configure:11540: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define DBA_DBM 1
EOF
 THIS_LIBS="$LIB"
else
  echo "$ac_t""no" 1>&6
fi

      
  LDFLAGS="$old_LDFLAGS"

    done
    
    
  if test "$THIS_PREFIX" != "" -a "$THIS_PREFIX" != "/usr"; then
    THIS_INCLUDE="$THIS_PREFIX/include"
    THIS_LFLAGS="$THIS_PREFIX/lib"
  fi

    
  THIS_RESULT="yes"
  if test "$THIS_PREFIX" != "/usr"; then
  if test "$THIS_INCLUDE" = "" ; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  elif test "$THIS_LIBS" = "" ; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi
  fi

    
  
  if test "$THIS_INCLUDE" != "/usr/include"; then
    
  if test -z "$THIS_INCLUDE" || echo "$THIS_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$THIS_INCLUDE"
  else
    
    ep_dir="`echo $THIS_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "DBA_SHARED_LIBADD"; then
      DBA_SHARED_LIBADD="-R$THIS_LFLAGS -L$THIS_LFLAGS $DBA_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$THIS_LFLAGS -L$THIS_LFLAGS $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "$THIS_LIBS" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$THIS_LIBS $LIBS"


  ;;
  esac



  fi



  THIS_INCLUDE=""
  THIS_LIBS=""
  THIS_LFLAGS=""
  THIS_PREFIX=""

  fi

fi

echo $ac_n "checking for DBM support""... $ac_c" 1>&6
echo "configure:11717: checking for DBM support" >&5

  if test "$THIS_RESULT" = "yes"; then
    HAVE_DBA=1
    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  THIS_RESULT=""


# Check whether --with-cdb or --without-cdb was given.
if test "${with_cdb+set}" = set; then
  withval="$with_cdb"
  
  if test "$withval" != "no"; then
    for i in /usr/local /usr $withval; do
      if test -f "$i/include/cdb.h" ; then
        THIS_PREFIX="$i"
      fi
	done

    for LIB in cdb c; do
      
  old_LDFLAGS="$LDFLAGS"
  LDFLAGS="-L$THIS_PREFIX/lib $LDFLAGS"
  
      echo $ac_n "checking for cdb_bread in -l$LIB""... $ac_c" 1>&6
echo "configure:11745: checking for cdb_bread in -l$LIB" >&5
ac_lib_var=`echo $LIB'_'cdb_bread | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-l$LIB  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 11753 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cdb_bread();

int main() {
cdb_bread()
; return 0; }
EOF
if { (eval echo configure:11764: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define DBA_CDB 1
EOF
 THIS_LIBS="$LIB"
else
  echo "$ac_t""no" 1>&6
fi

      
  LDFLAGS="$old_LDFLAGS"

    done
    
    
  if test "$THIS_PREFIX" != "" -a "$THIS_PREFIX" != "/usr"; then
    THIS_INCLUDE="$THIS_PREFIX/include"
    THIS_LFLAGS="$THIS_PREFIX/lib"
  fi

    
  THIS_RESULT="yes"
  if test "$THIS_PREFIX" != "/usr"; then
  if test "$THIS_INCLUDE" = "" ; then
    { echo "configure: error: cannot find necessary header file(s)" 1>&2; exit 1; }
  elif test "$THIS_LIBS" = "" ; then
    { echo "configure: error: cannot find necessary library" 1>&2; exit 1; }
  fi
  fi

    
  
  if test "$THIS_INCLUDE" != "/usr/include"; then
    
  if test -z "$THIS_INCLUDE" || echo "$THIS_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$THIS_INCLUDE"
  else
    
    ep_dir="`echo $THIS_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    DBA_SHARED_LIBADD="-l$THIS_LIBS $DBA_SHARED_LIBADD"
    if test -n "$THIS_LFLAGS"; then
      
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "DBA_SHARED_LIBADD"; then
      DBA_SHARED_LIBADD="-R$THIS_LFLAGS -L$THIS_LFLAGS $DBA_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$THIS_LFLAGS"; then
    
  if test "$THIS_LFLAGS" != "/usr/lib"; then
    
  if test -z "$THIS_LFLAGS" || echo "$THIS_LFLAGS" | grep '^/' >/dev/null ; then
    ai_p="$THIS_LFLAGS"
  else
    
    ep_dir="`echo $THIS_LFLAGS|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$THIS_LFLAGS\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$THIS_LFLAGS -L$THIS_LFLAGS $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "$THIS_LIBS" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$THIS_LIBS $LIBS"


  ;;
  esac



  fi



  THIS_INCLUDE=""
  THIS_LIBS=""
  THIS_LFLAGS=""
  THIS_PREFIX=""

  fi

fi

echo $ac_n "checking for CDB support""... $ac_c" 1>&6
echo "configure:11941: checking for CDB support" >&5

  if test "$THIS_RESULT" = "yes"; then
    HAVE_DBA=1
    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  THIS_RESULT=""


echo $ac_n "checking whether to enable DBA interface""... $ac_c" 1>&6
echo "configure:11953: checking whether to enable DBA interface" >&5
if test "$HAVE_DBA" = "1"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DBA 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS dba"
  
  if test -d "$abs_srcdir/ext/dba"; then
    ext_builddir="ext/dba"
    ext_srcdir="$abs_srcdir/ext/dba"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libdba.la"
    EXT_STATIC="$EXT_STATIC dba"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_DBA 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST DBA_SHARED_LIBADD"
  

else
  echo "$ac_t""no" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DBA 0
EOF

fi



# Check whether --with-dbase or --without-dbase was given.
if test "${with_dbase+set}" = set; then
  withval="$with_dbase"
  enable_dbase=$withval
fi




echo $ac_n "checking whether to enable the bundled dbase library""... $ac_c" 1>&6
echo "configure:12107: checking whether to enable the bundled dbase library" >&5
# Check whether --enable-dbase or --disable-dbase was given.
if test "${enable_dbase+set}" = set; then
  enableval="$enable_dbase"
  PHP_DBASE=$enableval
else
  PHP_DBASE=no
fi


case "$PHP_DBASE" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_DBASE=`echo $ac_n "$PHP_DBASE$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_DBASE=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_DBASE" = "no" && PHP_DBASE=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_DBASE" = "yes"; then
  cat >> confdefs.h <<\EOF
#define DBASE 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS dbase"
  
  if test -d "$abs_srcdir/ext/dbase"; then
    ext_builddir="ext/dbase"
    ext_srcdir="$abs_srcdir/ext/dbase"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libdbase.la"
    EXT_STATIC="$EXT_STATIC dbase"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_DBASE 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi


echo $ac_n "checking whether to include DOM support""... $ac_c" 1>&6
echo "configure:12281: checking whether to include DOM support" >&5
# Check whether --with-dom or --without-dom was given.
if test "${with_dom+set}" = set; then
  withval="$with_dom"
  
  case "$withval" in
    no)
      echo "$ac_t""no" 1>&6 ;;
    yes)
      echo "$ac_t""yes" 1>&6
      
  EXT_SUBDIRS="$EXT_SUBDIRS domxml"
  
  if test -d "$abs_srcdir/ext/domxml"; then
    ext_builddir="ext/domxml"
    ext_srcdir="$abs_srcdir/ext/domxml"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libdomxml.la"
    EXT_STATIC="$EXT_STATIC domxml"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_DOMXML 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


      old_LIBS=$LIBS
      LIBS="$LIBS -lz"
      echo $ac_n "checking for xmlNewDoc in -lxml""... $ac_c" 1>&6
echo "configure:12417: checking for xmlNewDoc in -lxml" >&5
ac_lib_var=`echo xml'_'xmlNewDoc | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lxml  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12425 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char xmlNewDoc();

int main() {
xmlNewDoc()
; return 0; }
EOF
if { (eval echo configure:12436: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DOMXML 1
EOF

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: DOM module requires libxml >= 2.0" 1>&2; exit 1; }
fi

      LIBS=$old_LIBS
      
 case "z" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lz $LIBS"


  ;;
  esac

      
 case "xml" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lxml $LIBS"


  ;;
  esac

      
  if test "/usr/local/include" != "/usr/include"; then
    
  if test -z "/usr/local/include" || echo "/usr/local/include" | grep '^/' >/dev/null ; then
    ai_p="/usr/local/include"
  else
    
    ep_dir="`echo /usr/local/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"/usr/local/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

      ;;
    *)
      test -f $withval/include/libxml/tree.h && DOMXML_INCLUDE="$withval/include"
      if test -n "$DOMXML_INCLUDE" ; then
        echo "$ac_t""yes" 1>&6
        
  EXT_SUBDIRS="$EXT_SUBDIRS domxml"
  
  if test -d "$abs_srcdir/ext/domxml"; then
    ext_builddir="ext/domxml"
    ext_srcdir="$abs_srcdir/ext/domxml"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libdomxml.la"
    EXT_STATIC="$EXT_STATIC domxml"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_DOMXML 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


        old_LIBS=$LIBS
        LIBS="$LIBS -L$withval/lib"

        if test $HAVE_ZLIB; then
          old_withval=$withval
          echo $ac_n "checking for zlib (needed by DOM support)""... $ac_c" 1>&6
echo "configure:12646: checking for zlib (needed by DOM support)" >&5
          # Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  
            echo "$ac_t""" 1>&6
            if test -z $withval; then
              withval="/usr/local"
            fi
            LIBS="$LIBS -L$withval/lib -lz"
            echo $ac_n "checking for deflate in -lz""... $ac_c" 1>&6
echo "configure:12657: checking for deflate in -lz" >&5
ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lz  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12665 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char deflate();

int main() {
deflate()
; return 0; }
EOF
if { (eval echo configure:12676: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo z | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lz $LIBS"

else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

            

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "z" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lz $LIBS"


  ;;
  esac



          
else
  
            echo "$ac_t""no" 1>&6
            echo "configure: warning: If configure fails try --with-zlib=<DIR>" 1>&2
          
fi

          withval=$old_withval
        else
          echo "checking for libz needed by pdflib 3.0... already zlib support"
          LIBS="$LIBS -L$withval/lib -lz"
        fi

        echo $ac_n "checking for xmlNewDoc in -lxml""... $ac_c" 1>&6
echo "configure:12770: checking for xmlNewDoc in -lxml" >&5
ac_lib_var=`echo xml'_'xmlNewDoc | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lxml  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 12778 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char xmlNewDoc();

int main() {
xmlNewDoc()
; return 0; }
EOF
if { (eval echo configure:12789: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DOMXML 1
EOF

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: DOM module requires libxml >= 2.0." 1>&2; exit 1; }
fi

        LIBS=$old_LIBS
        

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "xml" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lxml $LIBS"


  ;;
  esac



        
  if test "$DOMXML_INCLUDE" != "/usr/include"; then
    
  if test -z "$DOMXML_INCLUDE" || echo "$DOMXML_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$DOMXML_INCLUDE"
  else
    
    ep_dir="`echo $DOMXML_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$DOMXML_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

      else
        echo "$ac_t""no" 1>&6
      fi ;;
  esac

else
  
  echo "$ac_t""no" 1>&6

fi





echo $ac_n "checking whether to enable exif support""... $ac_c" 1>&6
echo "configure:12908: checking whether to enable exif support" >&5
# Check whether --enable-exif or --disable-exif was given.
if test "${enable_exif+set}" = set; then
  enableval="$enable_exif"
  PHP_EXIF=$enableval
else
  PHP_EXIF=no
fi


case "$PHP_EXIF" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_EXIF=`echo $ac_n "$PHP_EXIF$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_EXIF=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_EXIF" = "no" && PHP_EXIF=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_EXIF" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_EXIF 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS exif"
  
  if test -d "$abs_srcdir/ext/exif"; then
    ext_builddir="ext/exif"
    ext_srcdir="$abs_srcdir/ext/exif"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libexif.la"
    EXT_STATIC="$EXT_STATIC exif"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_EXIF 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi


echo $ac_n "checking whether to include fdftk support""... $ac_c" 1>&6
echo "configure:13082: checking whether to include fdftk support" >&5
# Check whether --with-fdftk or --without-fdftk was given.
if test "${with_fdftk+set}" = set; then
  withval="$with_fdftk"
  
  case "$withval" in
    no)
      echo "$ac_t""no" 1>&6 ;;
    yes)
      echo "$ac_t""yes" 1>&6
      
  EXT_SUBDIRS="$EXT_SUBDIRS fdf"
  
  if test -d "$abs_srcdir/ext/fdf"; then
    ext_builddir="ext/fdf"
    ext_srcdir="$abs_srcdir/ext/fdf"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libfdf.la"
    EXT_STATIC="$EXT_STATIC fdf"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_FDF 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


      echo $ac_n "checking for FDFOpen in -lFdfTk""... $ac_c" 1>&6
echo "configure:13216: checking for FDFOpen in -lFdfTk" >&5
ac_lib_var=`echo FdfTk'_'FDFOpen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lFdfTk  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 13224 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char FDFOpen();

int main() {
FDFOpen()
; return 0; }
EOF
if { (eval echo configure:13235: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
        cat >> confdefs.h <<\EOF
#define HAVE_FDFLIB 1
EOF

        EXTRA_LIBS="$EXTRA_LIBS -lFdfTk"
      
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: fdftk module requires fdftk 2.0" 1>&2; exit 1; }
fi

      ;;
    *)
      test -f $withval/include/FdfTk.h && FDFLIB_INCLUDE="-I$withval/include"
      if test -n "$FDFLIB_INCLUDE" ; then
        echo "$ac_t""yes" 1>&6
        
  EXT_SUBDIRS="$EXT_SUBDIRS fdf"
  
  if test -d "$abs_srcdir/ext/fdf"; then
    ext_builddir="ext/fdf"
    ext_srcdir="$abs_srcdir/ext/fdf"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libfdf.la"
    EXT_STATIC="$EXT_STATIC fdf"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_FDF 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


        old_LIBS=$LIBS
        LIBS="$LIBS -L$withval/lib"
        echo $ac_n "checking for FDFOpen in -lFdfTk""... $ac_c" 1>&6
echo "configure:13393: checking for FDFOpen in -lFdfTk" >&5
ac_lib_var=`echo FdfTk'_'FDFOpen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lFdfTk  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 13401 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char FDFOpen();

int main() {
FDFOpen()
; return 0; }
EOF
if { (eval echo configure:13412: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
          cat >> confdefs.h <<\EOF
#define HAVE_FDFLIB 1
EOF

          EXTRA_LIBS="$EXTRA_LIBS -L$withval/lib -lFdfTk"
        
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: fdftk module requires fdftk lib 2.0." 1>&2; exit 1; }
fi

        LIBS=$old_LIBS
        INCLUDES="$INCLUDES $FDFLIB_INCLUDE"
      else
        echo "$ac_t""no" 1>&6
      fi ;;
  esac

else
  
  echo "$ac_t""no" 1>&6

fi



# Check whether --with-filepro or --without-filepro was given.
if test "${with_filepro+set}" = set; then
  withval="$with_filepro"
  enable_filepro=$withval
fi




echo $ac_n "checking whether to enable the bundled filePro support""... $ac_c" 1>&6
echo "configure:13464: checking whether to enable the bundled filePro support" >&5
# Check whether --enable-filepro or --disable-filepro was given.
if test "${enable_filepro+set}" = set; then
  enableval="$enable_filepro"
  PHP_FILEPRO=$enableval
else
  PHP_FILEPRO=no
fi


case "$PHP_FILEPRO" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_FILEPRO=`echo $ac_n "$PHP_FILEPRO$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_FILEPRO=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_FILEPRO" = "no" && PHP_FILEPRO=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_FILEPRO" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_FILEPRO 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS filepro"
  
  if test -d "$abs_srcdir/ext/filepro"; then
    ext_builddir="ext/filepro"
    ext_srcdir="$abs_srcdir/ext/filepro"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libfilepro.la"
    EXT_STATIC="$EXT_STATIC filepro"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_FILEPRO 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi




echo $ac_n "checking whether to enable FTP support""... $ac_c" 1>&6
echo "configure:13640: checking whether to enable FTP support" >&5
# Check whether --enable-ftp or --disable-ftp was given.
if test "${enable_ftp+set}" = set; then
  enableval="$enable_ftp"
  PHP_FTP=$enableval
else
  PHP_FTP=no
fi


case "$PHP_FTP" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_FTP=`echo $ac_n "$PHP_FTP$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_FTP=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_FTP" = "no" && PHP_FTP=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_FTP" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_FTP 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS ftp"
  
  if test -d "$abs_srcdir/ext/ftp"; then
    ext_builddir="ext/ftp"
    ext_srcdir="$abs_srcdir/ext/ftp"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libftp.la"
    EXT_STATIC="$EXT_STATIC ftp"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_FTP 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi







shared=no
echo $ac_n "checking whether to include GD support""... $ac_c" 1>&6
echo "configure:13820: checking whether to include GD support" >&5
# Check whether --with-gd or --without-gd was given.
if test "${with_gd+set}" = set; then
  withval="$with_gd"
  
  
    case $withval in
	shared)
	    shared=yes
	    withval=yes
	    ;;
	shared,*)
	    shared=yes
	    withval=`echo $withval | sed -e 's/^shared,//'`      
	    ;;
	*)
	    shared=no
	    ;;
    esac
    if test -n "$php_always_shared"; then
		shared=yes
	fi


  case "$withval" in
    no)
      echo "$ac_t""no" 1>&6 ;;
    yes)
      cat >> confdefs.h <<\EOF
#define HAVE_LIBGD 1
EOF

      if test "$shared" = "yes"; then
        echo "$ac_t""yes (shared)" 1>&6
        GD_LIBS="-lgd"
      else
        echo "$ac_t""yes (static)" 1>&6
        
 case "gd" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lgd $LIBS"


  ;;
  esac

      fi
        old_LDFLAGS=$LDFLAGS
		old_LIBS=$LIBS
        echo $ac_n "checking for gdImageString16 in -lgd""... $ac_c" 1>&6
echo "configure:13873: checking for gdImageString16 in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageString16 | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 13881 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageString16();

int main() {
gdImageString16()
; return 0; }
EOF
if { (eval echo configure:13892: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   cat >> confdefs.h <<\EOF
#define HAVE_LIBGD13 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImagePaletteCopy in -lgd""... $ac_c" 1>&6
echo "configure:13916: checking for gdImagePaletteCopy in -lgd" >&5
ac_lib_var=`echo gd'_'gdImagePaletteCopy | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 13924 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImagePaletteCopy();

int main() {
gdImagePaletteCopy()
; return 0; }
EOF
if { (eval echo configure:13935: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   cat >> confdefs.h <<\EOF
#define HAVE_LIBGD15 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageColorClosestHWB in -lgd""... $ac_c" 1>&6
echo "configure:13959: checking for gdImageColorClosestHWB in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageColorClosestHWB | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 13967 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageColorClosestHWB();

int main() {
gdImageColorClosestHWB()
; return 0; }
EOF
if { (eval echo configure:13978: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   cat >> confdefs.h <<\EOF
#define HAVE_COLORCLOSESTHWB 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi

		echo $ac_n "checking for compress in -lz""... $ac_c" 1>&6
echo "configure:14002: checking for compress in -lz" >&5
ac_lib_var=`echo z'_'compress | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lz  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14010 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char compress();

int main() {
compress()
; return 0; }
EOF
if { (eval echo configure:14021: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="-lz $LIBS"
else
  echo "$ac_t""no" 1>&6
fi

		echo $ac_n "checking for png_info_init in -lpng""... $ac_c" 1>&6
echo "configure:14042: checking for png_info_init in -lpng" >&5
ac_lib_var=`echo png'_'png_info_init | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14050 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_info_init();

int main() {
png_info_init()
; return 0; }
EOF
if { (eval echo configure:14061: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="-lpng $LIBS"
else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageColorResolve in -lgd""... $ac_c" 1>&6
echo "configure:14082: checking for gdImageColorResolve in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageColorResolve | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14090 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageColorResolve();

int main() {
gdImageColorResolve()
; return 0; }
EOF
if { (eval echo configure:14101: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GDIMAGECOLORRESOLVE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageCreateFromPng in -lgd""... $ac_c" 1>&6
echo "configure:14125: checking for gdImageCreateFromPng in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromPng | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14133 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromPng();

int main() {
gdImageCreateFromPng()
; return 0; }
EOF
if { (eval echo configure:14144: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_PNG 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageCreateFromGif in -lgd""... $ac_c" 1>&6
echo "configure:14168: checking for gdImageCreateFromGif in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromGif | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14176 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromGif();

int main() {
gdImageCreateFromGif()
; return 0; }
EOF
if { (eval echo configure:14187: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageCreateFromXbm in -lgd""... $ac_c" 1>&6
echo "configure:14211: checking for gdImageCreateFromXbm in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromXbm | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14219 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromXbm();

int main() {
gdImageCreateFromXbm()
; return 0; }
EOF
if { (eval echo configure:14230: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_XBM 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageWBMP in -lgd""... $ac_c" 1>&6
echo "configure:14254: checking for gdImageWBMP in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageWBMP | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14262 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageWBMP();

int main() {
gdImageWBMP()
; return 0; }
EOF
if { (eval echo configure:14273: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_WBMP 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        
        LIBS=$old_LIBS
        LDFLAGS=$old_LDFLAGS
        if test "$ac_cv_lib_gd_gdImageCreateFromPng" = "yes"; then
          
 case "png" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpng $LIBS"


  ;;
  esac

          
 case "z" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lz $LIBS"


  ;;
  esac

        fi

        
        echo $ac_n "checking for libjpeg (needed by gd-1.8+)""... $ac_c" 1>&6
echo "configure:14328: checking for libjpeg (needed by gd-1.8+)" >&5
        # Check whether --with-jpeg-dir or --without-jpeg-dir was given.
if test "${with_jpeg_dir+set}" = set; then
  withval="$with_jpeg_dir"
  
          echo "$ac_t""yes" 1>&6
          if test "$withval" = "yes"; then
            withval="/usr/local"
          fi
          old_LIBS=$LIBS
          LIBS="$LIBS -L$withval/lib"
          echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
echo "configure:14340: checking for jpeg_read_header in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14348 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_read_header();

int main() {
jpeg_read_header()
; return 0; }
EOF
if { (eval echo configure:14359: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -L$withval/lib -ljpeg"
else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          LIBS=$old_LIBS
          

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "jpeg" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ljpeg $LIBS"


  ;;
  esac



          LIBS="$LIBS -L$withval/lib -ljpeg"
        
else
  
          echo "$ac_t""no" 1>&6
          echo "configure: warning: If configure fails try --with-jpeg-dir=<DIR>" 1>&2
        
fi
 
        echo $ac_n "checking for gdImageCreateFromJpeg in -lgd""... $ac_c" 1>&6
echo "configure:14442: checking for gdImageCreateFromJpeg in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromJpeg | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14450 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromJpeg();

int main() {
gdImageCreateFromJpeg()
; return 0; }
EOF
if { (eval echo configure:14461: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_JPG 1
EOF

else
  echo "$ac_t""no" 1>&6
fi


        
        echo $ac_n "checking for libXpm (needed by gd-1.8+)""... $ac_c" 1>&6
echo "configure:14487: checking for libXpm (needed by gd-1.8+)" >&5
        # Check whether --with-xpm-dir or --without-xpm-dir was given.
if test "${with_xpm_dir+set}" = set; then
  withval="$with_xpm_dir"
  
          echo "$ac_t""yes" 1>&6
          if test "$withval" = "yes"; then
            withval="/usr/X11R6"
          fi
          old_LIBS=$LIBS
          LIBS="$LIBS -L$withval/lib"
          echo $ac_n "checking for XpmFreeXpmImage in -lXpm""... $ac_c" 1>&6
echo "configure:14499: checking for XpmFreeXpmImage in -lXpm" >&5
ac_lib_var=`echo Xpm'_'XpmFreeXpmImage | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXpm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14507 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XpmFreeXpmImage();

int main() {
XpmFreeXpmImage()
; return 0; }
EOF
if { (eval echo configure:14518: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -L$withval/lib -lXpm"
else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          LIBS=$old_LIBS
          

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "Xpm" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lXpm $LIBS"


  ;;
  esac



          

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "X11" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lX11 $LIBS"


  ;;
  esac



          LIBS="$LIBS -L$withval/lib -lXpm -lX11"
        
else
  
          echo "$ac_t""no" 1>&6
          echo "configure: warning: If configure fails try --with-xpm-dir=<DIR>" 1>&2
        
fi
 
        echo $ac_n "checking for gdImageCreateFromXpm in -lgd""... $ac_c" 1>&6
echo "configure:14652: checking for gdImageCreateFromXpm in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromXpm | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14660 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromXpm();

int main() {
gdImageCreateFromXpm()
; return 0; }
EOF
if { (eval echo configure:14671: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_XPM 1
EOF

else
  echo "$ac_t""no" 1>&6
fi


        ac_cv_lib_gd_gdImageLine=yes
      ;;
    *)
      test -f $withval/include/gd1.3/gd.h && GD_INCLUDE="$withval/include/gd1.3"
      test -f $withval/include/gd/gd.h && GD_INCLUDE="$withval/include/gd"
      test -f $withval/include/gd.h && GD_INCLUDE="$withval/include"
      test -f $withval/gd1.3/gd.h && GD_INCLUDE="$withval/gd1.3"
      test -f $withval/gd/gd.h && GD_INCLUDE="$withval/gd"
      test -f $withval/gd.h && GD_INCLUDE="$withval"

      test -f $withval/lib/libgd.so && GD_LIB="$withval/lib"
      test -f $withval/lib/gd/libgd.so && GD_LIB="$withval/lib/gd"
      test -f $withval/lib/gd1.3/libgd.so && GD_LIB="$withval/lib/gd1.3"
      test -f $withval/libgd.so && GD_LIB="$withval"
      test -f $withval/gd/libgd.so && GD_LIB="$withval/gd"
      test -f $withval/gd1.3/libgd.so && GD_LIB="$withval/gd1.3"

      test -f $withval/lib/libgd.a && GD_LIB="$withval/lib"
      test -f $withval/lib/gd/libgd.a && GD_LIB="$withval/lib/gd"
      test -f $withval/lib/gd1.3/libgd.a && GD_LIB="$withval/lib/gd1.3"
      test -f $withval/libgd.a && GD_LIB="$withval"
      test -f $withval/gd/libgd.a && GD_LIB="$withval/gd"
      test -f $withval/gd1.3/libgd.a && GD_LIB="$withval/gd1.3"
      if test -n "$GD_INCLUDE" && test -n "$GD_LIB" ; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBGD 1
EOF

        if test "$shared" = "yes"; then
          echo "$ac_t""yes (shared)" 1>&6
          GD_LIBS="-lgd"
          GD_LFLAGS="-L$GD_LIB"
        else
          echo "$ac_t""yes (static)" 1>&6
          

  if test -n "$GD_LIB"; then
    
  if test "$GD_LIB" != "/usr/lib"; then
    
  if test -z "$GD_LIB" || echo "$GD_LIB" | grep '^/' >/dev/null ; then
    ai_p="$GD_LIB"
  else
    
    ep_dir="`echo $GD_LIB|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_LIB\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$GD_LIB -L$GD_LIB $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "gd" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lgd $LIBS"


  ;;
  esac



        fi
        old_LDFLAGS=$LDFLAGS
        LDFLAGS="$LDFLAGS -L$GD_LIB"
		old_LIBS=$LIBS
        echo $ac_n "checking for gdImageString16 in -lgd""... $ac_c" 1>&6
echo "configure:14785: checking for gdImageString16 in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageString16 | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14793 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageString16();

int main() {
gdImageString16()
; return 0; }
EOF
if { (eval echo configure:14804: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   cat >> confdefs.h <<\EOF
#define HAVE_LIBGD13 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi

		echo $ac_n "checking for compress in -lz""... $ac_c" 1>&6
echo "configure:14828: checking for compress in -lz" >&5
ac_lib_var=`echo z'_'compress | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lz  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14836 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char compress();

int main() {
compress()
; return 0; }
EOF
if { (eval echo configure:14847: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="-lz $LIBS"
else
  echo "$ac_t""no" 1>&6
fi

		echo $ac_n "checking for png_info_init in -lpng""... $ac_c" 1>&6
echo "configure:14868: checking for png_info_init in -lpng" >&5
ac_lib_var=`echo png'_'png_info_init | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14876 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_info_init();

int main() {
png_info_init()
; return 0; }
EOF
if { (eval echo configure:14887: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="-lpng $LIBS"
else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageColorResolve in -lgd""... $ac_c" 1>&6
echo "configure:14908: checking for gdImageColorResolve in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageColorResolve | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14916 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageColorResolve();

int main() {
gdImageColorResolve()
; return 0; }
EOF
if { (eval echo configure:14927: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GDIMAGECOLORRESOLVE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageCreateFromPng in -lgd""... $ac_c" 1>&6
echo "configure:14951: checking for gdImageCreateFromPng in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromPng | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 14959 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromPng();

int main() {
gdImageCreateFromPng()
; return 0; }
EOF
if { (eval echo configure:14970: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_PNG 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageCreateFromGif in -lgd""... $ac_c" 1>&6
echo "configure:14994: checking for gdImageCreateFromGif in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromGif | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15002 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromGif();

int main() {
gdImageCreateFromGif()
; return 0; }
EOF
if { (eval echo configure:15013: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageCreateFromXbm in -lgd""... $ac_c" 1>&6
echo "configure:15037: checking for gdImageCreateFromXbm in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromXbm | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15045 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromXbm();

int main() {
gdImageCreateFromXbm()
; return 0; }
EOF
if { (eval echo configure:15056: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_XBM 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageWBMP in -lgd""... $ac_c" 1>&6
echo "configure:15080: checking for gdImageWBMP in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageWBMP | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15088 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageWBMP();

int main() {
gdImageWBMP()
; return 0; }
EOF
if { (eval echo configure:15099: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_WBMP 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        
        LIBS=$old_LIBS
        LDFLAGS=$old_LDFLAGS
        if test "$ac_cv_lib_gd_gdImageCreateFromPng" = "yes"; then
          
 case "z" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lz $LIBS"


  ;;
  esac

          
 case "png" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpng $LIBS"


  ;;
  esac

        fi
        
        echo $ac_n "checking for libjpeg (needed by gd-1.8+)""... $ac_c" 1>&6
echo "configure:15153: checking for libjpeg (needed by gd-1.8+)" >&5
        # Check whether --with-jpeg-dir or --without-jpeg-dir was given.
if test "${with_jpeg_dir+set}" = set; then
  withval="$with_jpeg_dir"
  
          echo "$ac_t""yes" 1>&6
          if test "$withval" = "yes"; then
            withval="/usr/local"
          fi
          old_LIBS=$LIBS
          LIBS="$LIBS -L$withval/lib"
          echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
echo "configure:15165: checking for jpeg_read_header in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15173 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_read_header();

int main() {
jpeg_read_header()
; return 0; }
EOF
if { (eval echo configure:15184: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -L$withval/lib -ljpeg"
else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          LIBS=$old_LIBS
          

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "jpeg" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ljpeg $LIBS"


  ;;
  esac



          LIBS="$LIBS -L$withval/lib -ljpeg"
        
else
  
          echo "$ac_t""no" 1>&6
          echo "configure: warning: If configure fails try --with-jpeg-dir=<DIR>" 1>&2
        
fi
 
        echo $ac_n "checking for gdImageCreateFromJpeg in -lgd""... $ac_c" 1>&6
echo "configure:15267: checking for gdImageCreateFromJpeg in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromJpeg | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15275 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromJpeg();

int main() {
gdImageCreateFromJpeg()
; return 0; }
EOF
if { (eval echo configure:15286: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_JPG 1
EOF

else
  echo "$ac_t""no" 1>&6
fi


	
        echo $ac_n "checking for libXpm (needed by gd-1.8+)""... $ac_c" 1>&6
echo "configure:15312: checking for libXpm (needed by gd-1.8+)" >&5
        # Check whether --with-xpm-dir or --without-xpm-dir was given.
if test "${with_xpm_dir+set}" = set; then
  withval="$with_xpm_dir"
  
          echo "$ac_t""yes" 1>&6
          if test "$withval" = "yes"; then
            withval="/usr/X11R6"
          fi
          old_LIBS=$LIBS
          LIBS="$LIBS -L$withval/lib"
          echo $ac_n "checking for XpmFreeXpmImage in -lXpm""... $ac_c" 1>&6
echo "configure:15324: checking for XpmFreeXpmImage in -lXpm" >&5
ac_lib_var=`echo Xpm'_'XpmFreeXpmImage | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXpm  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15332 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XpmFreeXpmImage();

int main() {
XpmFreeXpmImage()
; return 0; }
EOF
if { (eval echo configure:15343: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -L$withval/lib -lXpm"
else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          LIBS=$old_LIBS
          

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "Xpm" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lXpm $LIBS"


  ;;
  esac



          

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "X11" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lX11 $LIBS"


  ;;
  esac



          LIBS="$LIBS -L$withval/lib -lXpm -lX11"
        
else
  
          echo "$ac_t""no" 1>&6
          echo "configure: warning: If configure fails try --with-xpm-dir=<DIR>" 1>&2
        
fi
 
        echo $ac_n "checking for gdImageCreateFromXpm in -lgd""... $ac_c" 1>&6
echo "configure:15477: checking for gdImageCreateFromXpm in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromXpm | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15485 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromXpm();

int main() {
gdImageCreateFromXpm()
; return 0; }
EOF
if { (eval echo configure:15496: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_XPM 1
EOF

else
  echo "$ac_t""no" 1>&6
fi



        ac_cv_lib_gd_gdImageLine=yes
      else
        { echo "configure: error: Unable to find libgd.(a|so) anywhere under $withval" 1>&2; exit 1; }
      fi ;;
  esac

else
  
  echo $ac_n "checking for gdImageLine in -lgd""... $ac_c" 1>&6
echo "configure:15530: checking for gdImageLine in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageLine | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15538 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageLine();

int main() {
gdImageLine()
; return 0; }
EOF
if { (eval echo configure:15549: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo gd | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lgd $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for gdImageString16 in -lgd""... $ac_c" 1>&6
echo "configure:15577: checking for gdImageString16 in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageString16 | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15585 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageString16();

int main() {
gdImageString16()
; return 0; }
EOF
if { (eval echo configure:15596: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   cat >> confdefs.h <<\EOF
#define HAVE_LIBGD13 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi

  if test "$ac_cv_lib_gd_gdImageLine" = "yes"; then
		old_LIBS=$LIBS
        echo $ac_n "checking for gdImageString16 in -lgd""... $ac_c" 1>&6
echo "configure:15622: checking for gdImageString16 in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageString16 | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15630 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageString16();

int main() {
gdImageString16()
; return 0; }
EOF
if { (eval echo configure:15641: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   cat >> confdefs.h <<\EOF
#define HAVE_LIBGD13 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi

		echo $ac_n "checking for compress in -lz""... $ac_c" 1>&6
echo "configure:15665: checking for compress in -lz" >&5
ac_lib_var=`echo z'_'compress | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lz  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15673 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char compress();

int main() {
compress()
; return 0; }
EOF
if { (eval echo configure:15684: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="-lz $LIBS"
else
  echo "$ac_t""no" 1>&6
fi

		echo $ac_n "checking for png_info_init in -lpng""... $ac_c" 1>&6
echo "configure:15705: checking for png_info_init in -lpng" >&5
ac_lib_var=`echo png'_'png_info_init | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15713 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_info_init();

int main() {
png_info_init()
; return 0; }
EOF
if { (eval echo configure:15724: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="-lpng $LIBS"
else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageColorResolve in -lgd""... $ac_c" 1>&6
echo "configure:15745: checking for gdImageColorResolve in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageColorResolve | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15753 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageColorResolve();

int main() {
gdImageColorResolve()
; return 0; }
EOF
if { (eval echo configure:15764: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GDIMAGECOLORRESOLVE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageCreateFromPng in -lgd""... $ac_c" 1>&6
echo "configure:15788: checking for gdImageCreateFromPng in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromPng | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15796 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromPng();

int main() {
gdImageCreateFromPng()
; return 0; }
EOF
if { (eval echo configure:15807: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_PNG 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        echo $ac_n "checking for gdImageCreateFromGif in -lgd""... $ac_c" 1>&6
echo "configure:15831: checking for gdImageCreateFromGif in -lgd" >&5
ac_lib_var=`echo gd'_'gdImageCreateFromGif | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lgd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 15839 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gdImageCreateFromGif();

int main() {
gdImageCreateFromGif()
; return 0; }
EOF
if { (eval echo configure:15850: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_GD_GIF 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

        
        LIBS=$old_LIBS
        LDFLAGS=$old_LDFLAGS
        if test "$ac_cv_lib_gd_gdImageCreateFromPng" = "yes"; then
          
 case "z" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lz $LIBS"


  ;;
  esac

          
 case "png" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpng $LIBS"


  ;;
  esac

        fi
        ac_cv_lib_gd_gdImageLine=yes
  fi

fi

if test "$with_gd" != "no" && test "$ac_cv_lib_gd_gdImageLine" = "yes"; then
  CHECK_TTF="yes"
  # Check whether --with-ttf or --without-ttf was given.
if test "${with_ttf+set}" = set; then
  withval="$with_ttf"
  
    if test $withval = "no" ; then
      CHECK_TTF=""
    else
      CHECK_TTF="$withval"
    fi
  
fi


  echo $ac_n "checking whether to include ttf support""... $ac_c" 1>&6
echo "configure:15923: checking whether to include ttf support" >&5
  if test -n "$CHECK_TTF" ; then
    for i in /usr /usr/local "$CHECK_TTF" ; do
      if test -f "$i/include/truetype.h" ; then
        FREETYPE_DIR="$i"
      fi
      if test -f "$i/include/freetype.h" ; then
        TTF_DIR="$i"
        unset TTF_INC_DIR
      fi
      if test -f "$i/include/freetype/freetype.h"; then
        TTF_DIR="$i"
        TTF_INC_DIR="$i/include/freetype"
      fi
    done
    if test -n "$FREETYPE_DIR" ; then
      cat >> confdefs.h <<\EOF
#define HAVE_LIBFREETYPE 1
EOF

      if test "$shared" = "yes"; then
        GD_LIBS="$GD_LIBS -lfreetype"
        GD_LFLAGS="$GD_LFLAGS -L$FREETYPE_DIR/lib"
      else 
        

  if test -n "$FREETYPE_DIR/lib"; then
    
  if test "$FREETYPE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$FREETYPE_DIR/lib" || echo "$FREETYPE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$FREETYPE_DIR/lib"
  else
    
    ep_dir="`echo $FREETYPE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$FREETYPE_DIR/lib -L$FREETYPE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "freetype" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lfreetype $LIBS"


  ;;
  esac



      fi
      
  if test "$FREETYPE_DIR/include" != "/usr/include"; then
    
  if test -z "$FREETYPE_DIR/include" || echo "$FREETYPE_DIR/include" | grep '^/' >/dev/null ; then
    ai_p="$FREETYPE_DIR/include"
  else
    
    ep_dir="`echo $FREETYPE_DIR/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$FREETYPE_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

      echo "$ac_t""yes" 1>&6
    else
      if test -n "$TTF_DIR" ; then
        cat >> confdefs.h <<\EOF
#define HAVE_LIBTTF 1
EOF

        if test "$shared" = "yes"; then
          GD_LIBS="$GD_LIBS -lttf"
          GD_LFLAGS="$GD_LFLAGS -L$TTF_DIR/lib"
        else
          

  if test -n "$TTF_DIR/lib"; then
    
  if test "$TTF_DIR/lib" != "/usr/lib"; then
    
  if test -z "$TTF_DIR/lib" || echo "$TTF_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$TTF_DIR/lib"
  else
    
    ep_dir="`echo $TTF_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$TTF_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$TTF_DIR/lib -L$TTF_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ttf" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lttf $LIBS"


  ;;
  esac



        fi
        if test -z "$TTF_INC_DIR"; then
          TTF_INC_DIR="$TTF_DIR/include"
        fi
        
  if test "$TTF_INC_DIR" != "/usr/include"; then
    
  if test -z "$TTF_INC_DIR" || echo "$TTF_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p="$TTF_INC_DIR"
  else
    
    ep_dir="`echo $TTF_INC_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$TTF_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

        echo "$ac_t""yes" 1>&6
      else
        echo "$ac_t""no" 1>&6
      fi
    fi
  else
    echo "$ac_t""no" 1>&6
  fi
  
echo $ac_n "checking for T1lib support""... $ac_c" 1>&6
echo "configure:16129: checking for T1lib support" >&5
# Check whether --with-t1lib or --without-t1lib was given.
if test "${with_t1lib+set}" = set; then
  withval="$with_t1lib"
  
  if test "$withval" != "no"; then
    if test "$withval" = "yes"; then
      for i in /usr/local /usr; do
        if test -f "$i/include/t1lib.h"; then
          

  if test -n ""$i/lib""; then
    
  if test ""$i/lib"" != "/usr/lib"; then
    
  if test -z ""$i/lib"" || echo ""$i/lib"" | grep '^/' >/dev/null ; then
    ai_p=""$i/lib""
  else
    
    ep_dir="`echo "$i/lib"|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \""$i/lib"\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R"$i/lib" -L"$i/lib" $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "t1" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lt1 $LIBS"


  ;;
  esac



          
  if test ""$i/include"" != "/usr/include"; then
    
  if test -z ""$i/include"" || echo ""$i/include"" | grep '^/' >/dev/null ; then
    ai_p=""$i/include""
  else
    
    ep_dir="`echo "$i/include"|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \""$i/include"\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

        fi
      done
    else
      if test -f "$withval/include/t1lib.h"; then
        

  if test -n ""$withval/lib""; then
    
  if test ""$withval/lib"" != "/usr/lib"; then
    
  if test -z ""$withval/lib"" || echo ""$withval/lib"" | grep '^/' >/dev/null ; then
    ai_p=""$withval/lib""
  else
    
    ep_dir="`echo "$withval/lib"|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \""$withval/lib"\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R"$withval/lib" -L"$withval/lib" $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "t1" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lt1 $LIBS"


  ;;
  esac



        
  if test ""$withval/include"" != "/usr/include"; then
    
  if test -z ""$withval/include"" || echo ""$withval/include"" | grep '^/' >/dev/null ; then
    ai_p=""$withval/include""
  else
    
    ep_dir="`echo "$withval/include"|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \""$withval/include"\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

      fi
    fi
    echo $ac_n "checking for T1_GetExtend in -lt1""... $ac_c" 1>&6
echo "configure:16301: checking for T1_GetExtend in -lt1" >&5
ac_lib_var=`echo t1'_'T1_GetExtend | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lt1  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16309 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char T1_GetExtend();

int main() {
T1_GetExtend()
; return 0; }
EOF
if { (eval echo configure:16320: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_LIBT1 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

    if test "$ac_cv_lib_t1_T1_GetExtend" = "yes"; then
      echo "$ac_t""yes" 1>&6
    else
      echo "$ac_t""no" 1>&6
    fi
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi


  if test -f /usr/pkg/include/gd/gd.h -a -z "$GD_INCLUDE" ; then
    GD_INCLUDE="/usr/pkg/include/gd"
  fi

  if test -f /usr/include/gd/gd.h -a -z "$GD_INCLUDE" ; then
    GD_INCLUDE="/usr/include/gd"
  fi

  echo $ac_n "checking whether to enable 4bit antialias hack with FreeType2""... $ac_c" 1>&6
echo "configure:16368: checking whether to enable 4bit antialias hack with FreeType2" >&5
  # Check whether --enable-freetype-4bit-antialias-hack or --disable-freetype-4bit-antialias-hack was given.
if test "${enable_freetype_4bit_antialias_hack+set}" = set; then
  enableval="$enable_freetype_4bit_antialias_hack"
  
  if test "$enableval" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define FREETYPE_4BIT_ANTIALIAS_HACK 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi
  
else
  
    echo "$ac_t""no" 1>&6
  
fi

  
  
  if test -z "$GD_INCLUDE" || echo "$GD_INCLUDE" | grep '^/' >/dev/null ; then
    GD_INCLUDE="$GD_INCLUDE"
  else
    
    ep_dir="`echo $GD_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    GD_INCLUDE="$ep_realdir/`basename \"$GD_INCLUDE\"`"
  fi

  
  if test "$GD_INCLUDE" != "/usr/include"; then
    
  if test -z "$GD_INCLUDE" || echo "$GD_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$GD_INCLUDE"
  else
    
    ep_dir="`echo $GD_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GD_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  
  EXT_SUBDIRS="$EXT_SUBDIRS gd"
  
  if test -d "$abs_srcdir/ext/gd"; then
    ext_builddir="ext/gd"
    ext_srcdir="$abs_srcdir/ext/gd"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$shared" != "shared" && test "$shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libgd.la"
    EXT_STATIC="$EXT_STATIC gd"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_GD 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  if test "$shared" != "yes"; then
    GD_STATIC="libphpext_gd.la"
  else 
    GD_SHARED="gd.la"
  fi
fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST GD_LFLAGS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST GD_LIBS"
  





echo $ac_n "checking whether to include GNU gettext support""... $ac_c" 1>&6
echo "configure:16571: checking whether to include GNU gettext support" >&5
# Check whether --with-gettext or --without-gettext was given.
if test "${with_gettext+set}" = set; then
  withval="$with_gettext"
  PHP_GETTEXT=$withval
else
  PHP_GETTEXT=no
fi


case "$PHP_GETTEXT" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_GETTEXT=`echo $ac_n "$PHP_GETTEXT$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_GETTEXT=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_GETTEXT" = "no" && PHP_GETTEXT=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_GETTEXT" != "no"; then
  for i in /usr /usr/local $PHP_GETTEXT; do
    if test -r $i/include/libintl.h; then
	  GETTEXT_DIR=$i
    fi
  done

  if test -z "$GETTEXT_DIR"; then
    { echo "configure: error: Cannot locate header file libintl.h" 1>&2; exit 1; }
  fi

  GETTEXT_LIBDIR=$GETTEXT_DIR/lib
  GETTEXT_INCDIR=$GETTEXT_DIR/include
  
  O_LDFLAGS="$LDFLAGS"
  LDFLAGS="$LDFLAGS -L$GETTEXT_LIBDIR"
  echo $ac_n "checking for bindtextdomain in -lintl""... $ac_c" 1>&6
echo "configure:16630: checking for bindtextdomain in -lintl" >&5
ac_lib_var=`echo intl'_'bindtextdomain | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lintl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16638 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bindtextdomain();

int main() {
bindtextdomain()
; return 0; }
EOF
if { (eval echo configure:16649: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  GETTEXT_LIBS="intl"
else
  echo "$ac_t""no" 1>&6

      echo $ac_n "checking for bindtextdomain in -lc""... $ac_c" 1>&6
echo "configure:16669: checking for bindtextdomain in -lc" >&5
ac_lib_var=`echo c'_'bindtextdomain | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lc  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 16677 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bindtextdomain();

int main() {
bindtextdomain()
; return 0; }
EOF
if { (eval echo configure:16688: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  GETTEXT_LIBS= 
else
  echo "$ac_t""no" 1>&6

          { echo "configure: error: Unable to find required gettext library" 1>&2; exit 1; }
      
fi

  
fi

  LDFLAGS="$O_LDFLAGS"

  cat >> confdefs.h <<\EOF
#define HAVE_LIBINTL 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS gettext"
  
  if test -d "$abs_srcdir/ext/gettext"; then
    ext_builddir="ext/gettext"
    ext_srcdir="$abs_srcdir/ext/gettext"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libgettext.la"
    EXT_STATIC="$EXT_STATIC gettext"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_GETTEXT 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST GETTEXT_SHARED_LIBADD"
  


  if test -n "$GETTEXT_LIBS"; then
    

  if test "$ext_shared" = "yes"; then
    GETTEXT_SHARED_LIBADD="-l$GETTEXT_LIBS $GETTEXT_SHARED_LIBADD"
    if test -n "$GETTEXT_LIBDIR"; then
      
  if test "$GETTEXT_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GETTEXT_LIBDIR" || echo "$GETTEXT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$GETTEXT_LIBDIR"
  else
    
    ep_dir="`echo $GETTEXT_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GETTEXT_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "GETTEXT_SHARED_LIBADD"; then
      GETTEXT_SHARED_LIBADD="-R$GETTEXT_LIBDIR -L$GETTEXT_LIBDIR $GETTEXT_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$GETTEXT_LIBDIR"; then
    
  if test "$GETTEXT_LIBDIR" != "/usr/lib"; then
    
  if test -z "$GETTEXT_LIBDIR" || echo "$GETTEXT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$GETTEXT_LIBDIR"
  else
    
    ep_dir="`echo $GETTEXT_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GETTEXT_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$GETTEXT_LIBDIR -L$GETTEXT_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "$GETTEXT_LIBS" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$GETTEXT_LIBS $LIBS"


  ;;
  esac



  fi


  fi

  
  if test "$GETTEXT_INCDIR" != "/usr/include"; then
    
  if test -z "$GETTEXT_INCDIR" || echo "$GETTEXT_INCDIR" | grep '^/' >/dev/null ; then
    ai_p="$GETTEXT_INCDIR"
  else
    
    ep_dir="`echo $GETTEXT_INCDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$GETTEXT_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

fi


echo $ac_n "checking for Hyperwave support""... $ac_c" 1>&6
echo "configure:16976: checking for Hyperwave support" >&5
# Check whether --with-hyperwave or --without-hyperwave was given.
if test "${with_hyperwave+set}" = set; then
  withval="$with_hyperwave"
  
  if test "$withval" != "no"; then
    cat >> confdefs.h <<\EOF
#define HYPERWAVE 1
EOF

    echo "$ac_t""yes" 1>&6
    
  EXT_SUBDIRS="$EXT_SUBDIRS hyperwave"
  
  if test -d "$abs_srcdir/ext/hyperwave"; then
    ext_builddir="ext/hyperwave"
    ext_srcdir="$abs_srcdir/ext/hyperwave"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libhyperwave.la"
    EXT_STATIC="$EXT_STATIC hyperwave"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_HYPERWAVE 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  else
    cat >> confdefs.h <<\EOF
#define HYPERWAVE 0
EOF

    echo "$ac_t""no" 1>&6
  fi

else
  
  cat >> confdefs.h <<\EOF
#define HYPERWAVE 0
EOF

  echo "$ac_t""no" 1>&6

fi





echo $ac_n "checking for ICAP support""... $ac_c" 1>&6
echo "configure:17133: checking for ICAP support" >&5
# Check whether --with-icap or --without-icap was given.
if test "${with_icap+set}" = set; then
  withval="$with_icap"
  PHP_ICAP=$withval
else
  PHP_ICAP=no
fi


case "$PHP_ICAP" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_ICAP=`echo $ac_n "$PHP_ICAP$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_ICAP=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_ICAP" = "no" && PHP_ICAP=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_ICAP" != "no"; then
  ICAP_DIR=$PHP_ICAP
  test "$ICAP_DIR" = "yes" && ICAP_DIR=/usr/local
    
  
  if test "$ICAP_DIR" != "/usr/include"; then
    
  if test -z "$ICAP_DIR" || echo "$ICAP_DIR" | grep '^/' >/dev/null ; then
    ai_p="$ICAP_DIR"
  else
    
    ep_dir="`echo $ICAP_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICAP_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ICAP_SHARED_LIBADD"
  

  

  if test "$ext_shared" = "yes"; then
    ICAP_SHARED_LIBADD="-licap $ICAP_SHARED_LIBADD"
    if test -n "$ICAP_DIR"; then
      
  if test "$ICAP_DIR" != "/usr/lib"; then
    
  if test -z "$ICAP_DIR" || echo "$ICAP_DIR" | grep '^/' >/dev/null ; then
    ai_p="$ICAP_DIR"
  else
    
    ep_dir="`echo $ICAP_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICAP_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ICAP_SHARED_LIBADD"; then
      ICAP_SHARED_LIBADD="-R$ICAP_DIR -L$ICAP_DIR $ICAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ICAP_DIR"; then
    
  if test "$ICAP_DIR" != "/usr/lib"; then
    
  if test -z "$ICAP_DIR" || echo "$ICAP_DIR" | grep '^/' >/dev/null ; then
    ai_p="$ICAP_DIR"
  else
    
    ep_dir="`echo $ICAP_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ICAP_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ICAP_DIR -L$ICAP_DIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "icap" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-licap $LIBS"


  ;;
  esac



  fi


  cat >> confdefs.h <<\EOF
#define HAVE_ICAP 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS icap"
  
  if test -d "$abs_srcdir/ext/icap"; then
    ext_builddir="ext/icap"
    ext_srcdir="$abs_srcdir/ext/icap"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libicap.la"
    EXT_STATIC="$EXT_STATIC icap"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_ICAP 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi








echo $ac_n "checking for Kerberos support in IMAP""... $ac_c" 1>&6
echo "configure:17441: checking for Kerberos support in IMAP" >&5
# Check whether --with-kerberos or --without-kerberos was given.
if test "${with_kerberos+set}" = set; then
  withval="$with_kerberos"
  PHP_KERBEROS=$withval
else
  PHP_KERBEROS=no
fi


case "$PHP_KERBEROS" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_KERBEROS=`echo $ac_n "$PHP_KERBEROS$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_KERBEROS=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_KERBEROS" = "no" && PHP_KERBEROS=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_KERBEROS" = "yes"; then
  test -d /usr/kerberos && PHP_KERBEROS=/usr/kerberos
fi

if test "$PHP_KERBEROS" != "no"; then
  PHP_KERBEROS_LIBDIR=$PHP_KERBEROS/lib
fi



echo $ac_n "checking for IMAP support""... $ac_c" 1>&6
echo "configure:17494: checking for IMAP support" >&5
# Check whether --with-imap or --without-imap was given.
if test "${with_imap+set}" = set; then
  withval="$with_imap"
  PHP_IMAP=$withval
else
  PHP_IMAP=no
fi


case "$PHP_IMAP" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_IMAP=`echo $ac_n "$PHP_IMAP$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_IMAP=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_IMAP" = "no" && PHP_IMAP=yes
fi

echo "$ac_t""$ext_output" 1>&6




  if test "$PHP_IMAP" != "no"; then  
    for i in /usr/local /usr $PHP_IMAP; do
      if test -r $i/rfc822.h; then IMAP_DIR=$i; IMAP_INC_DIR=$i
      elif test -r $i/include/rfc822.h; then IMAP_DIR=$i; IMAP_INC_DIR=$i/include
      elif test -r $i/include/imap/rfc822.h; then IMAP_DIR=$i; IMAP_INC_DIR=$i/include/imap
      elif test -r $i/include/c-client/rfc822.h; then IMAP_DIR=$i; IMAP_INC_DIR=$i/include/c-client
      elif test -r $i/imap/rfc822.h; then IMAP_DIR=$i; IMAP_INC_DIR=$i/imap
      elif test -r $i/c-client/rfc822.h; then IMAP_DIR=$i; IMAP_INC_DIR=$i/c-client
      fi
    done

    
  if test -z "$IMAP_DIR" || echo "$IMAP_DIR" | grep '^/' >/dev/null ; then
    IMAP_DIR="$IMAP_DIR"
  else
    
    ep_dir="`echo $IMAP_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    IMAP_DIR="$ep_realdir/`basename \"$IMAP_DIR\"`"
  fi


    if test -z "$IMAP_DIR"; then
      { echo "configure: error: Cannot find rfc822.h. Please check your IMAP installation" 1>&2; exit 1; }
    fi

    if test -r "$IMAP_DIR/c-client/c-client.a"; then
      ln -s "$IMAP_DIR/c-client/c-client.a" "$IMAP_DIR/c-client/libc-client.a" >/dev/null 2>&1
    elif test -r "$IMAP_DIR/lib/c-client.a"; then
      ln -s "$IMAP_DIR/lib/c-client.a" "$IMAP_DIR/lib/libc-client.a" >/dev/null 2>&1
    fi

    for lib in imap c-client4 c-client; do
      IMAP_LIB=$lib
      
		str="$IMAP_DIR/lib/lib$lib.*"
		for i in `echo $str`; do
			if test -r $i; then
				IMAP_LIBDIR=$IMAP_DIR/lib
				break 2
			fi
		done
		
      
		str="$IMAP_DIR/c-client/lib$lib.*"
		for i in `echo $str`; do
			if test -r $i; then
				IMAP_LIBDIR=$IMAP_DIR/c-client
				break 2
			fi
		done
		
    done

    if test -z "$IMAP_LIBDIR"; then
      { echo "configure: error: Cannot find imap library. Please check your IMAP installation" 1>&2; exit 1; }
    fi

    
  if test "$IMAP_INC_DIR" != "/usr/include"; then
    
  if test -z "$IMAP_INC_DIR" || echo "$IMAP_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p="$IMAP_INC_DIR"
  else
    
    ep_dir="`echo $IMAP_INC_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IMAP_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

    if test "$ext_shared" = "yes"; then
      

  if test "$ext_shared" = "yes"; then
    IMAP_SHARED_LIBADD="-l$IMAP_LIB $IMAP_SHARED_LIBADD"
    if test -n "$IMAP_LIBDIR"; then
      
  if test "$IMAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$IMAP_LIBDIR" || echo "$IMAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$IMAP_LIBDIR"
  else
    
    ep_dir="`echo $IMAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IMAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "IMAP_SHARED_LIBADD"; then
      IMAP_SHARED_LIBADD="-R$IMAP_LIBDIR -L$IMAP_LIBDIR $IMAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$IMAP_LIBDIR"; then
    
  if test "$IMAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$IMAP_LIBDIR" || echo "$IMAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$IMAP_LIBDIR"
  else
    
    ep_dir="`echo $IMAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IMAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$IMAP_LIBDIR -L$IMAP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "$IMAP_LIB" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$IMAP_LIB $LIBS"


  ;;
  esac



  fi


      
  PHP_VAR_SUBST="$PHP_VAR_SUBST IMAP_SHARED_LIBADD"
  

    else
      
  if test "$IMAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$IMAP_LIBDIR" || echo "$IMAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$IMAP_LIBDIR"
  else
    
    ep_dir="`echo $IMAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IMAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$IMAP_LIBDIR -L$IMAP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

      
  DLIBS="-l$IMAP_LIB $DLIBS"

    fi

    if test "$PHP_KERBEROS" != "no"; then
      
  if test "$PHP_KERBEROS_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PHP_KERBEROS_LIBDIR" || echo "$PHP_KERBEROS_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$PHP_KERBEROS_LIBDIR"
  else
    
    ep_dir="`echo $PHP_KERBEROS_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_KERBEROS_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "IMAP_SHARED_LIBADD"; then
      IMAP_SHARED_LIBADD="-R$PHP_KERBEROS_LIBDIR -L$PHP_KERBEROS_LIBDIR $IMAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

      
 case "com_err" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  IMAP_SHARED_LIBADD="-lcom_err $IMAP_SHARED_LIBADD"

   else
     
 case "com_err" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcom_err $LIBS"


  ;;
  esac

   fi

  ;;
  esac

      
 case "k5crypto" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  IMAP_SHARED_LIBADD="-lk5crypto $IMAP_SHARED_LIBADD"

   else
     
 case "k5crypto" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lk5crypto $LIBS"


  ;;
  esac

   fi

  ;;
  esac

      
 case "krb5" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  IMAP_SHARED_LIBADD="-lkrb5 $IMAP_SHARED_LIBADD"

   else
     
 case "krb5" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lkrb5 $LIBS"


  ;;
  esac

   fi

  ;;
  esac

      
 case "gssapi_krb5" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  IMAP_SHARED_LIBADD="-lgssapi_krb5 $IMAP_SHARED_LIBADD"

   else
     
 case "gssapi_krb5" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lgssapi_krb5 $LIBS"


  ;;
  esac

   fi

  ;;
  esac

    fi

    
  EXT_SUBDIRS="$EXT_SUBDIRS imap"
  
  if test -d "$abs_srcdir/ext/imap"; then
    ext_builddir="ext/imap"
    ext_srcdir="$abs_srcdir/ext/imap"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libimap.la"
    EXT_STATIC="$EXT_STATIC imap"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_IMAP 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"



    cat >> confdefs.h <<\EOF
#define HAVE_IMAP 1
EOF

  fi


PHPIFXLIB=ext/informix/libphp_ifx.a
	


echo $ac_n "checking for Informix support""... $ac_c" 1>&6
echo "configure:18040: checking for Informix support" >&5
# Check whether --with-informix or --without-informix was given.
if test "${with_informix+set}" = set; then
  withval="$with_informix"
  PHP_INFORMIX=$withval
else
  PHP_INFORMIX=no
fi


case "$PHP_INFORMIX" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_INFORMIX=`echo $ac_n "$PHP_INFORMIX$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_INFORMIX=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_INFORMIX" = "no" && PHP_INFORMIX=yes
fi

echo "$ac_t""$ext_output" 1>&6




  if test "$PHP_INFORMIX" != "no"; then
    if test "$INFORMIXDIR" = ""; then
      INFORMIX_WARNING="
WARNING: You asked for Informix support, but don't have \\\$INFORMIXDIR
   environment value set up. Configuring and compiling Informix
   support to PHP is impossible and has been turned off. Please
   try again after setting up your environment."
    else
      if test "$PHP_INFORMIX" = "yes"; then
        IFX_INCDIR=$INFORMIXDIR/incl/esql
        if test -z "$IFX_LIBDIR"; then
          
  if test "$INFORMIXDIR/lib" != "/usr/lib"; then
    
  if test -z "$INFORMIXDIR/lib" || echo "$INFORMIXDIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$INFORMIXDIR/lib"
  else
    
    ep_dir="`echo $INFORMIXDIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$INFORMIXDIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "INFORMIX_SHARED_LIBADD"; then
      INFORMIX_SHARED_LIBADD="-R$INFORMIXDIR/lib -L$INFORMIXDIR/lib $INFORMIX_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

          
  if test "$INFORMIXDIR/lib/esql" != "/usr/lib"; then
    
  if test -z "$INFORMIXDIR/lib/esql" || echo "$INFORMIXDIR/lib/esql" | grep '^/' >/dev/null ; then
    ai_p="$INFORMIXDIR/lib/esql"
  else
    
    ep_dir="`echo $INFORMIXDIR/lib/esql|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$INFORMIXDIR/lib/esql\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "INFORMIX_SHARED_LIBADD"; then
      INFORMIX_SHARED_LIBADD="-R$INFORMIXDIR/lib/esql -L$INFORMIXDIR/lib/esql $INFORMIX_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

        else
          IFX_LIBDIR="$IFX_LIBDIR"
        fi
      else
        IFX_INCDIR=$PHP_INFORMIX/incl/esql
        if test -z "$IFX_LIBDIR"; then
          
  if test "$PHP_INFORMIX/lib" != "/usr/lib"; then
    
  if test -z "$PHP_INFORMIX/lib" || echo "$PHP_INFORMIX/lib" | grep '^/' >/dev/null ; then
    ai_p="$PHP_INFORMIX/lib"
  else
    
    ep_dir="`echo $PHP_INFORMIX/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_INFORMIX/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "INFORMIX_SHARED_LIBADD"; then
      INFORMIX_SHARED_LIBADD="-R$PHP_INFORMIX/lib -L$PHP_INFORMIX/lib $INFORMIX_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

          
  if test "$PHP_INFORMIX/lib/esql" != "/usr/lib"; then
    
  if test -z "$PHP_INFORMIX/lib/esql" || echo "$PHP_INFORMIX/lib/esql" | grep '^/' >/dev/null ; then
    ai_p="$PHP_INFORMIX/lib/esql"
  else
    
    ep_dir="`echo $PHP_INFORMIX/lib/esql|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PHP_INFORMIX/lib/esql\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "INFORMIX_SHARED_LIBADD"; then
      INFORMIX_SHARED_LIBADD="-R$PHP_INFORMIX/lib/esql -L$PHP_INFORMIX/lib/esql $INFORMIX_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

        else
          IFX_LIBDIR="$IFX_LIBDIR"
        fi
        if test "$PHP_INFORMIX" != "$INFORMIXDIR"; then
          INFORMIX_WARNING="
WARNING: You specified Informix base install directory that is different
   than your \\\$INFORMIXDIR environment variable. You'd better know
   exactly what you are doing."
        fi
        fi
      IFX_INCLUDE=-I$IFX_INCDIR
      IFX_LFLAGS=$IFX_LIBDIR
      if test -z "$IFX_LIBS"; then
        IFX_LIBS=`esql -libs | sed -e 's/-lm$//'`
                IFX_LIBS=`echo $IFX_LIBS | sed -e 's/Libraries to be used://g' -e 's/esql: error -55923: No source or object file\.//g'`
                      else
                :
      fi
      CFLAGS="$CFLAGS $IFX_INCLUDE"
      LDFLAGS="$LDFLAGS $IFX_LFLAGS"

      case "$host_alias" in
	  *aix*)
        CPPFLAGS="$CPPFLAGS -D__H_LOCALEDEF";;
      esac

      cat >> confdefs.h <<\EOF
#define HAVE_IFX 1
EOF

      echo $ac_n "checking Informix version""... $ac_c" 1>&6
echo "configure:18262: checking Informix version" >&5
      IFX_VERSION=`esql -V | sed -ne '1 s/^[^0-9]*\([0-9]\)\.\([0-9]*\).*/\1\2/p'`
      if test $IFX_VERSION -ge "900"; then
        cat >> confdefs.h <<\EOF
#define HAVE_IFX_IUS 1
EOF

        IFX_ESQL_FLAGS="-EDHAVE_IFX_IUS"
      else
        IFX_ESQL_FLAGS="-EUHAVE_IFX_IUS"
      fi
      
  PHP_VAR_SUBST="$PHP_VAR_SUBST IFX_ESQL_FLAGS"
  

	  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INFORMIX_SHARED_LIBADD"
  

      cat >> confdefs.h <<EOF
#define IFX_VERSION $IFX_VERSION
EOF

      
  EXT_SUBDIRS="$EXT_SUBDIRS informix"
  
  if test -d "$abs_srcdir/ext/informix"; then
    ext_builddir="ext/informix"
    ext_srcdir="$abs_srcdir/ext/informix"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libinformix.la"
    EXT_STATIC="$EXT_STATIC informix"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_INFORMIX 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


      for i in $IFX_LIBS; do
        case "$i" in
        *.o)
            
  if test "$abs_builddir/ext/informix" != "/usr/lib"; then
    
  if test -z "$abs_builddir/ext/informix" || echo "$abs_builddir/ext/informix" | grep '^/' >/dev/null ; then
    ai_p="$abs_builddir/ext/informix"
  else
    
    ep_dir="`echo $abs_builddir/ext/informix|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$abs_builddir/ext/informix\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "INFORMIX_SHARED_LIBADD"; then
      INFORMIX_SHARED_LIBADD="-R$abs_builddir/ext/informix -L$abs_builddir/ext/informix $INFORMIX_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

            
 case "php_ifx" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  INFORMIX_SHARED_LIBADD="$INFORMIX_SHARED_LIBADD -lphp_ifx"

   else
     
 case "php_ifx" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="$LIBS -lphp_ifx"


  ;;
  esac

   fi

  ;;
  esac

            $srcdir/build/shtool mkdir -p ext/informix
            cd ext/informix
            ar r libphp_ifx.a $i
            ranlib libphp_ifx.a
            cd ../..;;
        -l*)
            lib=`echo $i|sed 's/^-l//'`
            
 case "$lib" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  INFORMIX_SHARED_LIBADD="$INFORMIX_SHARED_LIBADD -l$lib"

   else
     
 case "$lib" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="$LIBS -l$lib"


  ;;
  esac

   fi

  ;;
  esac
;;
        *)
            IFX_LIBADD="$IFX_LIBADD $i";;
        esac
      done
      IFX_LIBS="$IFX_LFLAGS $IFX_LIBADD"
      INCLUDES="$INCLUDES $IFX_INCLUDE"
    fi
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST INFORMIXDIR"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST IFX_LIBS"
  

	

if test "$INFORMIX_WARNING" != ""; then
  echo "$INFORMIX_WARNING"
fi




echo $ac_n "checking for Ingres II support""... $ac_c" 1>&6
echo "configure:18531: checking for Ingres II support" >&5
# Check whether --with-ii or --without-ii was given.
if test "${with_ii+set}" = set; then
  withval="$with_ii"
  PHP_II=$withval
else
  PHP_II=no
fi


case "$PHP_II" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_II=`echo $ac_n "$PHP_II$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_II=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_II" = "no" && PHP_II=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_II" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_II 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS ingres_ii"
  
  if test -d "$abs_srcdir/ext/ingres_ii"; then
    ext_builddir="ext/ingres_ii"
    ext_srcdir="$abs_srcdir/ext/ingres_ii"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libingres_ii.la"
    EXT_STATIC="$EXT_STATIC ingres_ii"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_INGRES_II 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"



  if test "$PHP_II" = "yes"; then
    II_DIR=$II_SYSTEM/ingres
  else
    II_DIR=$PHP_II
  fi

  if test -r $II_DIR/files/iiapi.h; then
    II_INC_DIR=$II_DIR/files
  else
    { echo "configure: error: Cannot find iiapi.h under $II_DIR/files" 1>&2; exit 1; }
  fi

  if test -r $II_DIR/lib/libiiapi.a; then
    II_LIB_DIR=$II_DIR/lib
  else
    { echo "configure: error: Cannot find libiiapi.a under $II_DIR/lib" 1>&2; exit 1; }
  fi

  

  if test "$ext_shared" = "yes"; then
    II_SHARED_LIBADD="-liiapi $II_SHARED_LIBADD"
    if test -n "$II_LIB_DIR"; then
      
  if test "$II_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$II_LIB_DIR" || echo "$II_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p="$II_LIB_DIR"
  else
    
    ep_dir="`echo $II_LIB_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$II_LIB_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "II_SHARED_LIBADD"; then
      II_SHARED_LIBADD="-R$II_LIB_DIR -L$II_LIB_DIR $II_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$II_LIB_DIR"; then
    
  if test "$II_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$II_LIB_DIR" || echo "$II_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p="$II_LIB_DIR"
  else
    
    ep_dir="`echo $II_LIB_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$II_LIB_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$II_LIB_DIR -L$II_LIB_DIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "iiapi" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-liiapi $LIBS"


  ;;
  esac



  fi


  

  if test "$ext_shared" = "yes"; then
    II_SHARED_LIBADD="-lingres $II_SHARED_LIBADD"
    if test -n "$II_LIB_DIR"; then
      
  if test "$II_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$II_LIB_DIR" || echo "$II_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p="$II_LIB_DIR"
  else
    
    ep_dir="`echo $II_LIB_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$II_LIB_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "II_SHARED_LIBADD"; then
      II_SHARED_LIBADD="-R$II_LIB_DIR -L$II_LIB_DIR $II_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$II_LIB_DIR"; then
    
  if test "$II_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$II_LIB_DIR" || echo "$II_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p="$II_LIB_DIR"
  else
    
    ep_dir="`echo $II_LIB_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$II_LIB_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$II_LIB_DIR -L$II_LIB_DIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ingres" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lingres $LIBS"


  ;;
  esac



  fi



  
  if test "$II_INC_DIR" != "/usr/include"; then
    
  if test -z "$II_INC_DIR" || echo "$II_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p="$II_INC_DIR"
  else
    
    ep_dir="`echo $II_INC_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$II_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST II_SHARED_LIBADD"
  





echo $ac_n "checking for InterBase support""... $ac_c" 1>&6
echo "configure:18946: checking for InterBase support" >&5
# Check whether --with-interbase or --without-interbase was given.
if test "${with_interbase+set}" = set; then
  withval="$with_interbase"
  PHP_INTERBASE=$withval
else
  PHP_INTERBASE=no
fi


case "$PHP_INTERBASE" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_INTERBASE=`echo $ac_n "$PHP_INTERBASE$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_INTERBASE=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_INTERBASE" = "no" && PHP_INTERBASE=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_INTERBASE" != "no"; then
  if test "$PHP_INTERBASE" = "yes"; then
    IBASE_INCDIR=/usr/interbase/include
    IBASE_LIBDIR=/usr/interbase/lib
  else
    IBASE_INCDIR=$PHP_INTERBASE/include
    IBASE_LIBDIR=$PHP_INTERBASE/lib
  fi
  

  if test "$ext_shared" = "yes"; then
    INTERBASE_SHARED_LIBADD="-lgds $INTERBASE_SHARED_LIBADD"
    if test -n "$IBASE_LIBDIR"; then
      
  if test "$IBASE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$IBASE_LIBDIR" || echo "$IBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$IBASE_LIBDIR"
  else
    
    ep_dir="`echo $IBASE_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IBASE_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "INTERBASE_SHARED_LIBADD"; then
      INTERBASE_SHARED_LIBADD="-R$IBASE_LIBDIR -L$IBASE_LIBDIR $INTERBASE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$IBASE_LIBDIR"; then
    
  if test "$IBASE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$IBASE_LIBDIR" || echo "$IBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$IBASE_LIBDIR"
  else
    
    ep_dir="`echo $IBASE_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IBASE_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$IBASE_LIBDIR -L$IBASE_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "gds" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lgds $LIBS"


  ;;
  esac



  fi


  
  if test "$IBASE_INCDIR" != "/usr/include"; then
    
  if test -z "$IBASE_INCDIR" || echo "$IBASE_INCDIR" | grep '^/' >/dev/null ; then
    ai_p="$IBASE_INCDIR"
  else
    
    ep_dir="`echo $IBASE_INCDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$IBASE_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_IBASE 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS interbase"
  
  if test -d "$abs_srcdir/ext/interbase"; then
    ext_builddir="ext/interbase"
    ext_srcdir="$abs_srcdir/ext/interbase"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libinterbase.la"
    EXT_STATIC="$EXT_STATIC interbase"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_INTERBASE 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST INTERBASE_SHARED_LIBADD"
  

fi

# $Id: config.m4,v 1.18 2000/07/11 17:33:13 rubys Exp $
# config.m4 for extension java

echo $ac_n "checking for Java support""... $ac_c" 1>&6
echo "configure:19254: checking for Java support" >&5
# Check whether --with-java or --without-java was given.
if test "${with_java+set}" = set; then
  withval="$with_java"
  
  if test "$withval" != "no"; then
    JAVA_SHARED="libphp_java.la"

    # substitute zip for systems which don't have jar in the PATH
    if JAVA_JAR=`which jar 2>/dev/null`; then
      JAVA_JAR="$JAVA_JAR cf"
    else
      JAVA_JAR='zip -q0'
    fi

    if test "$withval" = "yes"; then
      withval=`cd \`dirname \\\`which javac\\\`\`/..;pwd`
    fi

    if test -d $withval/lib/kaffe; then
      
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

      
  if test "$withval/lib/kaffe" != "/usr/lib"; then
    
  if test -z "$withval/lib/kaffe" || echo "$withval/lib/kaffe" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib/kaffe"
  else
    
    ep_dir="`echo $withval/lib/kaffe|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib/kaffe\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib/kaffe -L$withval/lib/kaffe $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi


      JAVA_CFLAGS="-DKAFFE"
      JAVA_INCLUDE=-I$withval/include/kaffe
      JAVA_CLASSPATH=$withval/share/kaffe/Klasses.jar
      JAVA_LIB=kaffevm

      test -f $withval/lib/$JAVA_LIB && JAVA_LIBPATH=$withval/lib
      test -f $withval/lib/kaffe/$JAVA_LIB && JAVA_LIBPATH=$withval/lib/kaffe

      # accomodate old versions of kaffe which don't support jar
      if kaffe -version 2>&1 | grep 1.0b > /dev/null; then
	JAVA_JAR='zip -q0'
      fi

    elif test -f $withval/lib/libjava.so; then
      JAVA_LIB=java
      JAVA_LIBPATH=$withval/lib
      JAVA_INCLUDE="-I$withval/include"
      test -f $withval/lib/classes.zip && JAVA_CFLAGS="-DJNI_11"
      test -f $withval/lib/jvm.jar     && JAVA_CFLAGS="-DJNI_12"
      test -f $withval/lib/classes.zip && JAVA_CLASSPATH="$withval/lib/classes.zip"
      test -f $withval/lib/jvm.jar     && JAVA_CLASSPATH="$withval/lib/jvm.jar"
      for i in $JAVA_INCLUDE/*; do
	test -f $i/jni_md.h && JAVA_INCLUDE="$JAVA_INCLUDE $i"
      done

    else

      for i in `find $withval/include -type d`; do
	test -f $i/jni.h && JAVA_INCLUDE="-I$i"
	test -f $i/jni_md.h && JAVA_INCLUDE="$JAVA_INCLUDE -I$i"
      done

      for i in `find $withval -type d`; do
	test -f $i/classes.zip	&& JAVA_CFLAGS="-DJNI_11"
	test -f $i/rt.jar	&& JAVA_CFLAGS="-DJNI_12"
	test -f $i/classes.zip	&& JAVA_CLASSPATH="$i/classes.zip"
	test -f $i/rt.jar	&& JAVA_CLASSPATH="$i/rt.jar"
	if test -f $i/libjava.so; then 
          JAVA_LIB=java
          JAVA_LIBPATH=$i
	  test -d $i/classic && 
  if test "$i/classic" != "/usr/lib"; then
    
  if test -z "$i/classic" || echo "$i/classic" | grep '^/' >/dev/null ; then
    ai_p="$i/classic"
  else
    
    ep_dir="`echo $i/classic|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/classic\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$i/classic -L$i/classic $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

	  test -d $i/native_threads && 
  if test "$i/native_threads" != "/usr/lib"; then
    
  if test -z "$i/native_threads" || echo "$i/native_threads" | grep '^/' >/dev/null ; then
    ai_p="$i/native_threads"
  else
    
    ep_dir="`echo $i/native_threads|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$i/native_threads\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$i/native_threads -L$i/native_threads $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

	fi
      done

      if test -z "$JAVA_INCLUDE"; then
	echo "$ac_t""no" 1>&6
	{ echo "configure: error: unable to find Java VM libraries" 1>&2; exit 1; }
      fi

      JAVA_CFLAGS="$JAVA_CFLAGS -D_REENTRANT"
    fi

    cat >> confdefs.h <<\EOF
#define HAVE_JAVA 1
EOF

    
  if test "$JAVA_LIBPATH" != "/usr/lib"; then
    
  if test -z "$JAVA_LIBPATH" || echo "$JAVA_LIBPATH" | grep '^/' >/dev/null ; then
    ai_p="$JAVA_LIBPATH"
  else
    
    ep_dir="`echo $JAVA_LIBPATH|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$JAVA_LIBPATH\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$JAVA_LIBPATH -L$JAVA_LIBPATH $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    JAVA_CFLAGS="$JAVA_CFLAGS '-DJAVALIB=\"$JAVA_LIBPATH/lib$JAVA_LIB.so\"'"

    if test "$PHP_SAPI" != "servlet"; then
      
  EXT_SUBDIRS="$EXT_SUBDIRS java"
  
  if test -d "$abs_srcdir/ext/java"; then
    ext_builddir="ext/java"
    ext_srcdir="$abs_srcdir/ext/java"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "shared" != "shared" && test "shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libjava.la"
    EXT_STATIC="$EXT_STATIC java"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_JAVA 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"



      if test "$PHP_SAPI" = "cgi"; then
        
 case "$JAVA_LIB" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$JAVA_LIB $LIBS"


  ;;
  esac

      fi

      INSTALL_IT="$INSTALL_IT; \$(INSTALL) -m 0755 \$(srcdir)/ext/java/php_java.jar \$(libdir)"
    fi

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi



  PHP_VAR_SUBST="$PHP_VAR_SUBST JAVA_CFLAGS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST JAVA_CLASSPATH"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST JAVA_INCLUDE"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST JAVA_SHARED"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST JAVA_JAR"
  






echo $ac_n "checking whether to include LDAP support""... $ac_c" 1>&6
echo "configure:19678: checking whether to include LDAP support" >&5
# Check whether --with-ldap or --without-ldap was given.
if test "${with_ldap+set}" = set; then
  withval="$with_ldap"
  PHP_LDAP=$withval
else
  PHP_LDAP=no
fi


case "$PHP_LDAP" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_LDAP=`echo $ac_n "$PHP_LDAP$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_LDAP=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_LDAP" = "no" && PHP_LDAP=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_LDAP" != "no"; then
	
  EXT_SUBDIRS="$EXT_SUBDIRS ldap"
  
  if test -d "$abs_srcdir/ext/ldap"; then
    ext_builddir="ext/ldap"
    ext_srcdir="$abs_srcdir/ext/ldap"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libldap.la"
    EXT_STATIC="$EXT_STATIC ldap"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_LDAP 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


	for i in /usr/local /usr $PHP_LDAP; do
		if test -f $i/include/ldap.h; then
			LDAP_DIR=$i
			LDAP_INCDIR=$i/include
			LDAP_LIBDIR=$i/lib
		elif test -f $i/include/umich-ldap/ldap.h; then
			LDAP_DIR=$i
			LDAP_INCDIR=$i/include/umich-ldap
			LDAP_LIBDIR=$i/lib
		elif test -f $i/ldap/public/ldap.h; then
			LDAP_DIR=$i
			LDAP_INCDIR=$i/ldap/public
			LDAP_LIBDIR=$i/lib
 		fi
	done

	if test -z "$LDAP_DIR"; then
		{ echo "configure: error: Cannot find ldap.h" 1>&2; exit 1; }
	fi

			
	
	if test `uname` = "Linux"; then
		LDAP_PTHREAD="pthread"
	else
		LDAP_PTHREAD=
	fi

	
  PHP_VAR_SUBST="$PHP_VAR_SUBST LDAP_SHARED_LIBADD"
  


	if test -f $LDAP_LIBDIR/liblber.a; then
		

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-llber $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "LDAP_SHARED_LIBADD"; then
      LDAP_SHARED_LIBADD="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $LDAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "lber" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-llber $LIBS"


  ;;
  esac



  fi


		

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "LDAP_SHARED_LIBADD"; then
      LDAP_SHARED_LIBADD="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $LDAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ldap" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lldap $LIBS"


  ;;
  esac



  fi


	elif test -f $LDAP_LIBDIR/libldapssl30.so; then
		
 case "$LDAP_PTHREAD" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$LDAP_PTHREAD $LIBS"


  ;;
  esac

		

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldapssl30 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "LDAP_SHARED_LIBADD"; then
      LDAP_SHARED_LIBADD="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $LDAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ldapssl30" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lldapssl30 $LIBS"


  ;;
  esac



  fi


		cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF

	elif test -f $LDAP_LIBDIR/libldapssl30.sl; then
		

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldapssl30 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "LDAP_SHARED_LIBADD"; then
      LDAP_SHARED_LIBADD="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $LDAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ldapssl30" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lldapssl30 $LIBS"


  ;;
  esac



  fi


		cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF

	elif test -f $LDAP_LIBDIR/libldap30.so; then
		
 case "$LDAP_PTHREAD" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$LDAP_PTHREAD $LIBS"


  ;;
  esac

		

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap30 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "LDAP_SHARED_LIBADD"; then
      LDAP_SHARED_LIBADD="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $LDAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ldap30" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lldap30 $LIBS"


  ;;
  esac



  fi


		cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF

	elif test -f $LDAP_LIBDIR/libldap30.sl; then
		

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lldap30 $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "LDAP_SHARED_LIBADD"; then
      LDAP_SHARED_LIBADD="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $LDAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ldap30" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lldap30 $LIBS"


  ;;
  esac



  fi


		cat >> confdefs.h <<\EOF
#define HAVE_NSLDAP 1
EOF

	elif test -f $LDAP_LIBDIR/libumich_ldap.so; then
		

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lumich_lber $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "LDAP_SHARED_LIBADD"; then
      LDAP_SHARED_LIBADD="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $LDAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "umich_lber" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lumich_lber $LIBS"


  ;;
  esac



  fi


		

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lumich_ldap $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "LDAP_SHARED_LIBADD"; then
      LDAP_SHARED_LIBADD="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $LDAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "umich_ldap" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lumich_ldap $LIBS"


  ;;
  esac



  fi


	elif test -f $LDAP_LIBDIR/libclntsh.so; then
		

  if test "$ext_shared" = "yes"; then
    LDAP_SHARED_LIBADD="-lclntsh $LDAP_SHARED_LIBADD"
    if test -n "$LDAP_LIBDIR"; then
      
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "LDAP_SHARED_LIBADD"; then
      LDAP_SHARED_LIBADD="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $LDAP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$LDAP_LIBDIR"; then
    
  if test "$LDAP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$LDAP_LIBDIR" || echo "$LDAP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_LIBDIR"
  else
    
    ep_dir="`echo $LDAP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$LDAP_LIBDIR -L$LDAP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "clntsh" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lclntsh $LIBS"


  ;;
  esac



  fi


		cat >> confdefs.h <<\EOF
#define HAVE_ORALDAP 1
EOF

	fi  

	
  if test "$LDAP_INCDIR" != "/usr/include"; then
    
  if test -z "$LDAP_INCDIR" || echo "$LDAP_INCDIR" | grep '^/' >/dev/null ; then
    ai_p="$LDAP_INCDIR"
  else
    
    ep_dir="`echo $LDAP_INCDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$LDAP_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

	cat >> confdefs.h <<\EOF
#define HAVE_LDAP 1
EOF


fi




echo $ac_n "checking for MCAL support""... $ac_c" 1>&6
echo "configure:20814: checking for MCAL support" >&5
# Check whether --with-mcal or --without-mcal was given.
if test "${with_mcal+set}" = set; then
  withval="$with_mcal"
  PHP_MCAL=$withval
else
  PHP_MCAL=no
fi


case "$PHP_MCAL" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MCAL=`echo $ac_n "$PHP_MCAL$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MCAL=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_MCAL" = "no" && PHP_MCAL=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MCAL" != "no"; then
  MCAL_DEFAULT_SEARCH=/usr/local
  if test "$PHP_MCAL" = "yes"; then
    MCAL_DIR=$MCAL_DEFAULT_SEARCH
  else
    
  if test -z "$PHP_MCAL" || echo "$PHP_MCAL" | grep '^/' >/dev/null ; then
    MCAL_DIR="$PHP_MCAL"
  else
    
    ep_dir="`echo $PHP_MCAL|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    MCAL_DIR="$ep_realdir/`basename \"$PHP_MCAL\"`"
  fi

  fi

  for i in $MCAL_DIR $MCAL_DIR/mcal $MCAL_DIR/mcal/include $MCAL_DIR/include; do
    if test -r "$i/mcal.h"; then
      MCAL_INCLUDE=$i
    fi
  done

  for i in $MCAL_DIR $MCAL_DIR/mcal $MCAL_DIR/mcal/lib $MCAL_DIR/lib; do
    if test -r "$i/libmcal.a"; then
      MCAL_LIBRARY=$i
    fi
  done

  if test ! -f "$MCAL_INCLUDE/mcal.h"; then
    { echo "configure: error: Unable to locate your libmcal header files - mcal.h should be in the directory you specify or in the include/ subdirectory below it - default search location is $MCAL_DEFAULT_SEARCH" 1>&2; exit 1; }
  fi

  if test ! -f "$MCAL_LIBRARY/libmcal.a"; then
    { echo "configure: error: Unable to locate your libmcal library files - libmcal.a should be in the directory you specify or in the lib/ subdirectory below it - default search location is $MCAL_DEFAULT_SEARCH" 1>&2; exit 1; }
  fi

  
  if test "$MCAL_INCLUDE" != "/usr/include"; then
    
  if test -z "$MCAL_INCLUDE" || echo "$MCAL_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$MCAL_INCLUDE"
  else
    
    ep_dir="`echo $MCAL_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCAL_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    MCAL_SHARED_LIBADD="-lmcal $MCAL_SHARED_LIBADD"
    if test -n "$MCAL_LIBRARY"; then
      
  if test "$MCAL_LIBRARY" != "/usr/lib"; then
    
  if test -z "$MCAL_LIBRARY" || echo "$MCAL_LIBRARY" | grep '^/' >/dev/null ; then
    ai_p="$MCAL_LIBRARY"
  else
    
    ep_dir="`echo $MCAL_LIBRARY|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCAL_LIBRARY\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "MCAL_SHARED_LIBADD"; then
      MCAL_SHARED_LIBADD="-R$MCAL_LIBRARY -L$MCAL_LIBRARY $MCAL_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$MCAL_LIBRARY"; then
    
  if test "$MCAL_LIBRARY" != "/usr/lib"; then
    
  if test -z "$MCAL_LIBRARY" || echo "$MCAL_LIBRARY" | grep '^/' >/dev/null ; then
    ai_p="$MCAL_LIBRARY"
  else
    
    ep_dir="`echo $MCAL_LIBRARY|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCAL_LIBRARY\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$MCAL_LIBRARY -L$MCAL_LIBRARY $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "mcal" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lmcal $LIBS"


  ;;
  esac



  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MCAL_SHARED_LIBADD"
  

  cat >> confdefs.h <<\EOF
#define HAVE_MCAL 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS mcal"
  
  if test -d "$abs_srcdir/ext/mcal"; then
    ext_builddir="ext/mcal"
    ext_srcdir="$abs_srcdir/ext/mcal"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libmcal.la"
    EXT_STATIC="$EXT_STATIC mcal"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_MCAL 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi





echo $ac_n "checking for mcrypt support""... $ac_c" 1>&6
echo "configure:21153: checking for mcrypt support" >&5
# Check whether --with-mcrypt or --without-mcrypt was given.
if test "${with_mcrypt+set}" = set; then
  withval="$with_mcrypt"
  PHP_MCRYPT=$withval
else
  PHP_MCRYPT=no
fi


case "$PHP_MCRYPT" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MCRYPT=`echo $ac_n "$PHP_MCRYPT$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MCRYPT=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_MCRYPT" = "no" && PHP_MCRYPT=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MCRYPT" != "no"; then
  for i in /usr/local /usr $PHP_MCRYPT; do
    if test -f $i/include/mcrypt.h; then
      MCRYPT_DIR=$i
    fi
  done

  if test -z "$MCRYPT_DIR"; then
    { echo "configure: error: Please reinstall libmcrypt - I cannot find mcrypt.h" 1>&2; exit 1; }
  fi

  
  if test "$MCRYPT_DIR/include" != "/usr/include"; then
    
  if test -z "$MCRYPT_DIR/include" || echo "$MCRYPT_DIR/include" | grep '^/' >/dev/null ; then
    ai_p="$MCRYPT_DIR/include"
  else
    
    ep_dir="`echo $MCRYPT_DIR/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MCRYPT_SHARED_LIBADD"
  

  old_LDFLAGS="$LDFLAGS"
  LDFLAGS="$ld_runpath_switch$MCRYPT_DIR/lib -L$MCRYPT_DIR/lib"
  echo $ac_n "checking for init_mcrypt in -lmcrypt""... $ac_c" 1>&6
echo "configure:21240: checking for init_mcrypt in -lmcrypt" >&5
ac_lib_var=`echo mcrypt'_'init_mcrypt | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 21248 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char init_mcrypt();

int main() {
init_mcrypt()
; return 0; }
EOF
if { (eval echo configure:21259: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo mcrypt | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lmcrypt $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

  old_LIBS=$LIBS
  LIBS="$LIBS -lltdl"
  echo $ac_n "checking for mcrypt_module_open in -lmcrypt""... $ac_c" 1>&6
echo "configure:21289: checking for mcrypt_module_open in -lmcrypt" >&5
ac_lib_var=`echo mcrypt'_'mcrypt_module_open | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmcrypt  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 21297 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char mcrypt_module_open();

int main() {
mcrypt_module_open()
; return 0; }
EOF
if { (eval echo configure:21308: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="$LIBS -lltdl"
else
  echo "$ac_t""no" 1>&6
 
fi

  LIBS=$old_LIBS
  LDFLAGS="$old_LDFLAGS"
  if test "$ac_cv_lib_mcrypt_init_mcrypt" = "yes"; then
	cat >> confdefs.h <<\EOF
#define HAVE_LIBMCRYPT22 1
EOF

  elif test "$ac_cv_lib_mcrypt_mcrypt_module_open" = "yes"; then
    
 case "ltdl" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lltdl $LIBS"


  ;;
  esac

	cat >> confdefs.h <<\EOF
#define HAVE_LIBMCRYPT24 1
EOF

  else
    { echo "configure: error: Sorry" 1>&2; exit 1; }
  fi
  

  if test "$ext_shared" = "yes"; then
    MCRYPT_SHARED_LIBADD="-lmcrypt $MCRYPT_SHARED_LIBADD"
    if test -n "$MCRYPT_DIR/lib"; then
      
  if test "$MCRYPT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MCRYPT_DIR/lib" || echo "$MCRYPT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$MCRYPT_DIR/lib"
  else
    
    ep_dir="`echo $MCRYPT_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "MCRYPT_SHARED_LIBADD"; then
      MCRYPT_SHARED_LIBADD="-R$MCRYPT_DIR/lib -L$MCRYPT_DIR/lib $MCRYPT_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$MCRYPT_DIR/lib"; then
    
  if test "$MCRYPT_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MCRYPT_DIR/lib" || echo "$MCRYPT_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$MCRYPT_DIR/lib"
  else
    
    ep_dir="`echo $MCRYPT_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MCRYPT_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$MCRYPT_DIR/lib -L$MCRYPT_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "mcrypt" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lmcrypt $LIBS"


  ;;
  esac



  fi


  cat >> confdefs.h <<\EOF
#define HAVE_LIBMCRYPT 1
EOF


  
  EXT_SUBDIRS="$EXT_SUBDIRS mcrypt"
  
  if test -d "$abs_srcdir/ext/mcrypt"; then
    ext_builddir="ext/mcrypt"
    ext_srcdir="$abs_srcdir/ext/mcrypt"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libmcrypt.la"
    EXT_STATIC="$EXT_STATIC mcrypt"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_MCRYPT 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi




echo $ac_n "checking for mhash support""... $ac_c" 1>&6
echo "configure:21584: checking for mhash support" >&5
# Check whether --with-mhash or --without-mhash was given.
if test "${with_mhash+set}" = set; then
  withval="$with_mhash"
  PHP_MHASH=$withval
else
  PHP_MHASH=no
fi


case "$PHP_MHASH" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MHASH=`echo $ac_n "$PHP_MHASH$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MHASH=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_MHASH" = "no" && PHP_MHASH=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MHASH" != "no"; then
  for i in /usr/local /usr /opt/mhash $PHP_MHASH; do
    if test -f $i/include/mhash.h; then
      MHASH_DIR=$i
    fi
  done

  if test -z "$MHASH_DIR"; then
    { echo "configure: error: Please reinstall libmhash - I cannot find mhash.h" 1>&2; exit 1; }
  fi
  
  if test "$MHASH_DIR/include" != "/usr/include"; then
    
  if test -z "$MHASH_DIR/include" || echo "$MHASH_DIR/include" | grep '^/' >/dev/null ; then
    ai_p="$MHASH_DIR/include"
  else
    
    ep_dir="`echo $MHASH_DIR/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MHASH_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    MHASH_SHARED_LIBADD="-lmhash $MHASH_SHARED_LIBADD"
    if test -n "$MHASH_DIR/lib"; then
      
  if test "$MHASH_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MHASH_DIR/lib" || echo "$MHASH_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$MHASH_DIR/lib"
  else
    
    ep_dir="`echo $MHASH_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MHASH_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "MHASH_SHARED_LIBADD"; then
      MHASH_SHARED_LIBADD="-R$MHASH_DIR/lib -L$MHASH_DIR/lib $MHASH_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$MHASH_DIR/lib"; then
    
  if test "$MHASH_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MHASH_DIR/lib" || echo "$MHASH_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$MHASH_DIR/lib"
  else
    
    ep_dir="`echo $MHASH_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MHASH_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$MHASH_DIR/lib -L$MHASH_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "mhash" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lmhash $LIBS"


  ;;
  esac



  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MHASH_SHARED_LIBADD"
  


  cat >> confdefs.h <<\EOF
#define HAVE_LIBMHASH 1
EOF


  
  EXT_SUBDIRS="$EXT_SUBDIRS mhash"
  
  if test -d "$abs_srcdir/ext/mhash"; then
    ext_builddir="ext/mhash"
    ext_srcdir="$abs_srcdir/ext/mhash"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libmhash.la"
    EXT_STATIC="$EXT_STATIC mhash"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_MHASH 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi






echo $ac_n "checking for mSQL support""... $ac_c" 1>&6
echo "configure:21898: checking for mSQL support" >&5
# Check whether --with-msql or --without-msql was given.
if test "${with_msql+set}" = set; then
  withval="$with_msql"
  PHP_MSQL=$withval
else
  PHP_MSQL=no
fi


case "$PHP_MSQL" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MSQL=`echo $ac_n "$PHP_MSQL$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MSQL=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_MSQL" = "no" && PHP_MSQL=yes
fi

echo "$ac_t""$ext_output" 1>&6




  if test "$PHP_MSQL" != "no"; then
    if test "$PHP_MSQL" = "yes"; then
      MSQL_INCDIR=/usr/local/Hughes/include
      MSQL_LIBDIR=/usr/local/Hughes/lib
    else
      MSQL_INCDIR=$PHP_MSQL/include
      MSQL_LIBDIR=$PHP_MSQL/lib
    fi
    

  if test "$ext_shared" = "yes"; then
    MSQL_SHARED_LIBADD="-lmsql $MSQL_SHARED_LIBADD"
    if test -n "$MSQL_LIBDIR"; then
      
  if test "$MSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$MSQL_LIBDIR" || echo "$MSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$MSQL_LIBDIR"
  else
    
    ep_dir="`echo $MSQL_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MSQL_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "MSQL_SHARED_LIBADD"; then
      MSQL_SHARED_LIBADD="-R$MSQL_LIBDIR -L$MSQL_LIBDIR $MSQL_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$MSQL_LIBDIR"; then
    
  if test "$MSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$MSQL_LIBDIR" || echo "$MSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$MSQL_LIBDIR"
  else
    
    ep_dir="`echo $MSQL_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MSQL_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$MSQL_LIBDIR -L$MSQL_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "msql" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lmsql $LIBS"


  ;;
  esac



  fi


    
  if test "$MSQL_INCDIR" != "/usr/include"; then
    
  if test -z "$MSQL_INCDIR" || echo "$MSQL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p="$MSQL_INCDIR"
  else
    
    ep_dir="`echo $MSQL_INCDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MSQL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

    cat >> confdefs.h <<\EOF
#define HAVE_MSQL 1
EOF

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST MSQL_SHARED_LIBADD"
  

    
  EXT_SUBDIRS="$EXT_SUBDIRS msql"
  
  if test -d "$abs_srcdir/ext/msql"; then
    ext_builddir="ext/msql"
    ext_srcdir="$abs_srcdir/ext/msql"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libmsql.la"
    EXT_STATIC="$EXT_STATIC msql"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_MSQL 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


    
  echo $ac_n "checking mSQL version""... $ac_c" 1>&6
echo "configure:22202: checking mSQL version" >&5
  ac_php_oldcflags=$CFLAGS
  CFLAGS="$INCLUDES $CFLAGS"
  cat > conftest.$ac_ext <<EOF
#line 22206 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include "msql.h"
int main() {
int i = IDX_TYPE
; return 0; }
EOF
if { (eval echo configure:22214: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MSQL1 0
EOF

    MSQL_VERSION="2.0 or newer"
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
    cat >> confdefs.h <<\EOF
#define MSQL1 1
EOF

    MSQL_VERSION="1.0"
  
fi
rm -f conftest*
  CFLAGS=$ac_php_oldcflags
  echo "$ac_t""$MSQL_VERSION" 1>&6

  fi


# Local macros for automake & autoconf
















#---START: Used in for client configure
















	




echo $ac_n "checking for MySQL support""... $ac_c" 1>&6
echo "configure:22282: checking for MySQL support" >&5
# Check whether --with-mysql or --without-mysql was given.
if test "${with_mysql+set}" = set; then
  withval="$with_mysql"
  PHP_MYSQL=$withval
else
  PHP_MYSQL=yes
fi


case "$PHP_MYSQL" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MYSQL=`echo $ac_n "$PHP_MYSQL$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MYSQL=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_MYSQL" = "no" && PHP_MYSQL=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MYSQL" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_MYSQL 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS mysql"
  
  if test -d "$abs_srcdir/ext/mysql"; then
    ext_builddir="ext/mysql"
    ext_srcdir="$abs_srcdir/ext/mysql"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libmysql.la"
    EXT_STATIC="$EXT_STATIC mysql"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_MYSQL 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi

if test "$PHP_MYSQL" = "yes"; then
  
  echo $ac_n "checking for MySQL UNIX socket""... $ac_c" 1>&6
echo "configure:22457: checking for MySQL UNIX socket" >&5
  MYSQL_SOCK=/tmp/mysql.sock
  for i in  \
      /var/run/mysqld/mysqld.sock \
      /var/tmp/mysql.sock \
      /var/lib/mysql/mysql.sock \
      ; do
    if test -r $i; then
      MYSQL_SOCK=$i
    fi
  done
  cat >> confdefs.h <<EOF
#define MYSQL_UNIX_ADDR "$MYSQL_SOCK"
EOF

  echo "$ac_t""$MYSQL_SOCK" 1>&6

  echo $ac_n "checking for inline""... $ac_c" 1>&6
echo "configure:22475: checking for inline" >&5
if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_cv_c_inline=no
for ac_kw in inline __inline__ __inline; do
  cat > conftest.$ac_ext <<EOF
#line 22482 "configure"
#include "confdefs.h"

int main() {
} $ac_kw foo() {
; return 0; }
EOF
if { (eval echo configure:22489: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_inline=$ac_kw; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done

fi

echo "$ac_t""$ac_cv_c_inline" 1>&6
case "$ac_cv_c_inline" in
  inline | yes) ;;
  no) cat >> confdefs.h <<\EOF
#define inline 
EOF
 ;;
  *)  cat >> confdefs.h <<EOF
#define inline $ac_cv_c_inline
EOF
 ;;
esac

echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
echo "configure:22515: checking return type of signal handlers" >&5
if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 22520 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
#ifdef signal
#undef signal
#endif
#ifdef __cplusplus
extern "C" void (*signal (int, void (*)(int)))(int);
#else
void (*signal ()) ();
#endif

int main() {
int i;
; return 0; }
EOF
if { (eval echo configure:22537: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_type_signal=void
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_type_signal=int
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_type_signal" 1>&6
cat >> confdefs.h <<EOF
#define RETSIGTYPE $ac_cv_type_signal
EOF


	





cat >> confdefs.h <<\EOF
#define UNDEF_THREADS_HACK 
EOF



echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:22568: checking for ANSI C header files" >&5
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 22573 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:22581: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 22598 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 22616 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
  cat > conftest.$ac_ext <<EOF
#line 22637 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:22648: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi

for ac_hdr in sgtty.h sys/ioctl.h \
 fcntl.h float.h floatingpoint.h ieeefp.h limits.h \
 memory.h pwd.h select.h \
 stdlib.h stddef.h \
 strings.h string.h synch.h sys/mman.h sys/socket.h \
 sys/timeb.h sys/types.h sys/un.h sys/vadvise.h sys/wait.h term.h \
 unistd.h utime.h sys/utime.h termio.h termios.h sched.h crypt.h alloca.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:22681: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 22686 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:22691: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done






echo $ac_n "checking size of char""... $ac_c" 1>&6
echo "configure:22723: checking size of char" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_char'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_char=1
else
  cat > conftest.$ac_ext <<EOF
#line 22731 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(char));
  exit(0);
}
EOF
if { (eval echo configure:22742: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_char=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_char=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_char" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_CHAR $ac_cv_sizeof_char
EOF



echo $ac_n "checking size of int""... $ac_c" 1>&6
echo "configure:22763: checking size of int" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_int=4
else
  cat > conftest.$ac_ext <<EOF
#line 22771 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(int));
  exit(0);
}
EOF
if { (eval echo configure:22782: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_int=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_int=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_int" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_INT $ac_cv_sizeof_int
EOF


echo $ac_n "checking size of long""... $ac_c" 1>&6
echo "configure:22802: checking size of long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long=4
else
  cat > conftest.$ac_ext <<EOF
#line 22810 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long));
  exit(0);
}
EOF
if { (eval echo configure:22821: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG $ac_cv_sizeof_long
EOF


echo $ac_n "checking size of long long""... $ac_c" 1>&6
echo "configure:22841: checking size of long long" >&5
if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_sizeof_long_long=8
else
  cat > conftest.$ac_ext <<EOF
#line 22849 "configure"
#include "confdefs.h"
#include <stdio.h>
main()
{
  FILE *f=fopen("conftestval", "w");
  if (!f) exit(1);
  fprintf(f, "%d\n", sizeof(long long));
  exit(0);
}
EOF
if { (eval echo configure:22860: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_sizeof_long_long=`cat conftestval`
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_sizeof_long_long=0
fi
rm -fr conftest*
fi

fi
echo "$ac_t""$ac_cv_sizeof_long_long" 1>&6
cat >> confdefs.h <<EOF
#define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
EOF


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:22880: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 22885 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
echo "configure:22913: checking whether time.h and sys/time.h may both be included" >&5
if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 22918 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/time.h>
#include <time.h>
int main() {
struct tm *tp;
; return 0; }
EOF
if { (eval echo configure:22927: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_header_time=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_time=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_time" 1>&6
if test $ac_cv_header_time = yes; then
  cat >> confdefs.h <<\EOF
#define TIME_WITH_SYS_TIME 1
EOF

fi

echo $ac_n "checking for uid_t in sys/types.h""... $ac_c" 1>&6
echo "configure:22948: checking for uid_t in sys/types.h" >&5
if eval "test \"`echo '$''{'ac_cv_type_uid_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 22953 "configure"
#include "confdefs.h"
#include <sys/types.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "uid_t" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uid_t=yes
else
  rm -rf conftest*
  ac_cv_type_uid_t=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_type_uid_t" 1>&6
if test $ac_cv_type_uid_t = no; then
  cat >> confdefs.h <<\EOF
#define uid_t int
EOF

  cat >> confdefs.h <<\EOF
#define gid_t int
EOF

fi


echo $ac_n "checking for type ulong""... $ac_c" 1>&6
echo "configure:22983: checking for type ulong" >&5
if eval "test \"`echo '$''{'ac_cv_ulong'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_ulong=no
else
  cat > conftest.$ac_ext <<EOF
#line 22991 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <sys/types.h>
main()
{
  ulong foo;
  foo++;
  exit(0);
}
EOF
if { (eval echo configure:23002: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_ulong=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_ulong=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_ulong" 1>&6
if test "$ac_cv_ulong" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_ULONG 
EOF

fi

echo $ac_n "checking for type uchar""... $ac_c" 1>&6
echo "configure:23026: checking for type uchar" >&5
if eval "test \"`echo '$''{'ac_cv_uchar'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_uchar=no
else
  cat > conftest.$ac_ext <<EOF
#line 23034 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <sys/types.h>
main()
{
  uchar foo;
  foo++;
  exit(0);
}
EOF
if { (eval echo configure:23045: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_uchar=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_uchar=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_uchar" 1>&6
if test "$ac_cv_uchar" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_UCHAR 
EOF

fi

echo $ac_n "checking for type uint""... $ac_c" 1>&6
echo "configure:23069: checking for type uint" >&5
if eval "test \"`echo '$''{'ac_cv_uint'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_uint=no
else
  cat > conftest.$ac_ext <<EOF
#line 23077 "configure"
#include "confdefs.h"
#include <stdio.h>
#include <sys/types.h>
main()
{
  uint foo;
  foo++;
  exit(0);
}
EOF
if { (eval echo configure:23088: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_uint=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_uint=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_uint" 1>&6
if test "$ac_cv_uint" = "yes"
then
  cat >> confdefs.h <<\EOF
#define HAVE_UINT 
EOF

fi


ac_save_CXXFLAGS="$CXXFLAGS"
echo $ac_n "checking base type of last arg to accept""... $ac_c" 1>&6
echo "configure:23114: checking base type of last arg to accept" >&5
if eval "test \"`echo '$''{'mysql_cv_btype_last_arg_accept'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

if test "$ac_cv_prog_gxx" = "yes"
then
  CXXFLAGS="$CXXFLAGS -Werror"
fi
mysql_cv_btype_last_arg_accept=none
cat > conftest.$ac_ext <<EOF
#line 23132 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>

int main() {
int a = accept(1, (struct sockaddr *) 0, (socklen_t *) 0);
; return 0; }
EOF
if { (eval echo configure:23142: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_btype_last_arg_accept=socklen_t
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
if test $mysql_cv_btype_last_arg_accept = none; then
cat > conftest.$ac_ext <<EOF
#line 23152 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>

int main() {
int a = accept(1, (struct sockaddr *) 0, (size_t *) 0);
; return 0; }
EOF
if { (eval echo configure:23162: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_btype_last_arg_accept=size_t
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
fi
if test $mysql_cv_btype_last_arg_accept = none; then
mysql_cv_btype_last_arg_accept=int
fi
fi

echo "$ac_t""$mysql_cv_btype_last_arg_accept" 1>&6
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

cat >> confdefs.h <<EOF
#define SOCKET_SIZE_TYPE $mysql_cv_btype_last_arg_accept
EOF

CXXFLAGS="$ac_save_CXXFLAGS"






# Standard MySQL list
for ac_func in alarm bmove \
 chsize ftruncate rint finite fpsetmask fpresetsticky\
 cuserid fcntl fconvert  \
 getrusage getpwuid getcwd getrlimit getwd index locking longjmp \
 perror pread realpath rename \
 socket strnlen madvise \
 strtoul strtoull snprintf tempnam thr_setconcurrency \
 gethostbyaddr_r gethostbyname_r getpwnam \
 bfill bzero bcmp strstr strpbrk strerror\
 tell atod memcpy memmove \
 setupterm strcasecmp sighold \
 vidattr setupterm lrand48 localtime_r \
 sigset sigthreadmask pthread_sigmask pthread_setprio pthread_setprio_np \
 pthread_setschedparam pthread_attr_setprio pthread_attr_setschedparam \
 pthread_attr_create pthread_getsequence_np pthread_attr_setstacksize \
 pthread_condattr_create rwlock_init \
 crypt dlopen dlerror fchmod getpass getpassphrase
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:23215: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 23220 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:23243: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


# This is special for libmysql
for ac_func in strtok_r
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:23272: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 23277 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:23300: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



# Check definition of gethostbyname_r (glibc2.0.100 is different from Solaris)
echo $ac_n "checking style of gethostname_r routines""... $ac_c" 1>&6
echo "configure:23328: checking style of gethostname_r routines" >&5
if eval "test \"`echo '$''{'mysql_cv_gethostname_style'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 23333 "configure"
#include "confdefs.h"
#ifndef SCO
#define _REENTRANT
#endif
#include <pthread.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
int main() {
int skr;

 int res = gethostbyname_r((const char *) 0,
  (struct hostent*) 0, (char*) 0, 0, (struct hostent **) 0, &skr);
; return 0; }
EOF
if { (eval echo configure:23351: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_gethostname_style=glibc2
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_gethostname_style=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_gethostname_style" 1>&6
if test "$mysql_cv_gethostname_style" = "glibc2"
then
  cat >> confdefs.h <<\EOF
#define HAVE_GLIBC2_STYLE_GETHOSTBYNAME_R 
EOF

fi



  # Check definition of pthread_getspecific
  echo $ac_n "checking "args to pthread_getspecific"""... $ac_c" 1>&6
echo "configure:23376: checking "args to pthread_getspecific"" >&5
if eval "test \"`echo '$''{'mysql_cv_getspecific_args'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 23381 "configure"
#include "confdefs.h"
#ifndef SCO
#define _REENTRANT
#endif
#define _POSIX_PTHREAD_SEMANTICS 
#include <pthread.h> 
int main() {
 void *pthread_getspecific(pthread_key_t key);
pthread_getspecific((pthread_key_t) NULL); 
; return 0; }
EOF
if { (eval echo configure:23393: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_getspecific_args=POSIX
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_getspecific_args=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_getspecific_args" 1>&6
  if test "$mysql_cv_getspecific_args" = "other"
  then
    cat >> confdefs.h <<\EOF
#define HAVE_NONPOSIX_PTHREAD_GETSPECIFIC 
EOF

  fi


  # Check definition of pthread_mutex_init
  echo $ac_n "checking "args to pthread_mutex_init"""... $ac_c" 1>&6
echo "configure:23417: checking "args to pthread_mutex_init"" >&5
if eval "test \"`echo '$''{'mysql_cv_mutex_init_args'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 23422 "configure"
#include "confdefs.h"
#ifndef SCO
#define _REENTRANT
#endif
#define _POSIX_PTHREAD_SEMANTICS 
#include <pthread.h> 
int main() {
 
  pthread_mutexattr_t attr;
  pthread_mutex_t mp;
  pthread_mutex_init(&mp,&attr); 
; return 0; }
EOF
if { (eval echo configure:23436: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  mysql_cv_mutex_init_args=POSIX
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_mutex_init_args=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_mutex_init_args" 1>&6
  if test "$mysql_cv_mutex_init_args" = "other"
  then
    cat >> confdefs.h <<\EOF
#define HAVE_NONPOSIX_PTHREAD_MUTEX_INIT 
EOF

  fi


# Check definition of readdir_r
echo $ac_n "checking "args to readdir_r"""... $ac_c" 1>&6
echo "configure:23460: checking "args to readdir_r"" >&5
if eval "test \"`echo '$''{'mysql_cv_readdir_r'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 23465 "configure"
#include "confdefs.h"
#ifndef SCO
#define _REENTRANT
#endif
#define _POSIX_PTHREAD_SEMANTICS 
#include <pthread.h>
#include <dirent.h>
int main() {
 int readdir_r(DIR *dirp, struct dirent *entry, struct dirent **result);
readdir_r((DIR *) NULL, (struct dirent *) NULL, (struct dirent **) NULL); 
; return 0; }
EOF
if { (eval echo configure:23478: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  mysql_cv_readdir_r=POSIX
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_readdir_r=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_readdir_r" 1>&6
if test "$mysql_cv_readdir_r" = "POSIX"
then
  cat >> confdefs.h <<\EOF
#define HAVE_READDIR_R 
EOF

fi


# Check definition av posix sigwait()
echo $ac_n "checking "style of sigwait"""... $ac_c" 1>&6
echo "configure:23502: checking "style of sigwait"" >&5
if eval "test \"`echo '$''{'mysql_cv_sigwait'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 23507 "configure"
#include "confdefs.h"
#ifndef SCO
#define _REENTRANT
#endif
#define _POSIX_PTHREAD_SEMANTICS 
#include <pthread.h>
#include <signal.h>
int main() {
#ifndef _AIX
sigset_t set;
int sig;
sigwait(&set,&sig);
#endif
; return 0; }
EOF
if { (eval echo configure:23523: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  mysql_cv_sigwait=POSIX
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_sigwait=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_sigwait" 1>&6
if test "$mysql_cv_sigwait" = "POSIX"
then
  cat >> confdefs.h <<\EOF
#define HAVE_SIGWAIT 
EOF

fi

if test "$mysql_cv_sigwait" != "POSIX"
then
unset mysql_cv_sigwait
# Check definition av posix sigwait()
echo $ac_n "checking "style of sigwait"""... $ac_c" 1>&6
echo "configure:23549: checking "style of sigwait"" >&5
if eval "test \"`echo '$''{'mysql_cv_sigwait'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 23554 "configure"
#include "confdefs.h"
#ifndef SCO
#define _REENTRANT
#endif
#define _POSIX_PTHREAD_SEMANTICS 
#include <pthread.h>
#include <signal.h>
int main() {
sigset_t set;
int sig;
sigwait(&set);
; return 0; }
EOF
if { (eval echo configure:23568: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  mysql_cv_sigwait=NONPOSIX
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  mysql_cv_sigwait=other
fi
rm -f conftest*
fi

echo "$ac_t""$mysql_cv_sigwait" 1>&6
if test "$mysql_cv_sigwait" = "NONPOSIX"
then
  cat >> confdefs.h <<\EOF
#define HAVE_NONPOSIX_SIGWAIT 
EOF

fi
fi



  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/libmysql/Makefile"


  MYSQL_LIBADD=libmysql/libmysql_client.la
  MYSQL_SHARED_LIBADD=libmysql/libmysql_client.la
  MYSQL_SUBDIRS=libmysql
  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_LIBADD"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_SUBDIRS"
  

  
  lib_makefile="$ext_builddir/libmysql/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir/libmysql
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
    lib_build_shared=yes
    if test -n "yes"; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

  
  if test "$ext_srcdir/libmysql" != "/usr/include"; then
    
  if test -z "$ext_srcdir/libmysql" || echo "$ext_srcdir/libmysql" | grep '^/' >/dev/null ; then
    ai_p="$ext_srcdir/libmysql"
  else
    
    ep_dir="`echo $ext_srcdir/libmysql|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ext_srcdir/libmysql\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  MYSQL_MODULE_TYPE="builtin"
elif test "$PHP_MYSQL" != "no"; then
  for i in $PHP_MYSQL; do
    if test -r $i/include/mysql/mysql.h; then
      MYSQL_DIR=$i
      MYSQL_INC_DIR=$i/include/mysql
    elif test -r $i/include/mysql.h; then
      MYSQL_DIR=$i
      MYSQL_INC_DIR=$i/include
    fi
  done

  if test -z "$MYSQL_DIR"; then
    { echo "configure: error: Cannot find header files under $PHP_MYSQL" 1>&2; exit 1; }
  fi

  MYSQL_MODULE_TYPE="external"
  for i in lib lib/mysql; do
    
  str="$MYSQL_DIR/$i/libmysqlclient.*"
  for j in `echo $str`; do
    if test -r $j; then
      MYSQL_LIB_DIR="$MYSQL_DIR/$i"
      break 2
    fi
  done

  done

  if test -z "$MYSQL_LIB_DIR"; then
    { echo "configure: error: Cannot find mysqlclient library under $MYSQL_DIR" 1>&2; exit 1; }
  fi

  

  if test "$ext_shared" = "yes"; then
    MYSQL_SHARED_LIBADD="-lmysqlclient $MYSQL_SHARED_LIBADD"
    if test -n "$MYSQL_LIB_DIR"; then
      
  if test "$MYSQL_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p="$MYSQL_LIB_DIR"
  else
    
    ep_dir="`echo $MYSQL_LIB_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MYSQL_LIB_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "MYSQL_SHARED_LIBADD"; then
      MYSQL_SHARED_LIBADD="-R$MYSQL_LIB_DIR -L$MYSQL_LIB_DIR $MYSQL_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$MYSQL_LIB_DIR"; then
    
  if test "$MYSQL_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$MYSQL_LIB_DIR" || echo "$MYSQL_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p="$MYSQL_LIB_DIR"
  else
    
    ep_dir="`echo $MYSQL_LIB_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MYSQL_LIB_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$MYSQL_LIB_DIR -L$MYSQL_LIB_DIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "mysqlclient" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lmysqlclient $LIBS"


  ;;
  esac



  fi



  
  if test "$MYSQL_INC_DIR" != "/usr/include"; then
    
  if test -z "$MYSQL_INC_DIR" || echo "$MYSQL_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p="$MYSQL_INC_DIR"
  else
    
    ep_dir="`echo $MYSQL_INC_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MYSQL_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

else
  MYSQL_MODULE_TYPE="none"
fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST MYSQL_SHARED_LIBADD"
  



                                                                                                                                                                



echo $ac_n "checking for Oracle-OCI8 support""... $ac_c" 1>&6
echo "configure:23851: checking for Oracle-OCI8 support" >&5
# Check whether --with-oci8 or --without-oci8 was given.
if test "${with_oci8+set}" = set; then
  withval="$with_oci8"
  PHP_OCI8=$withval
else
  PHP_OCI8=no
fi


case "$PHP_OCI8" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_OCI8=`echo $ac_n "$PHP_OCI8$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_OCI8=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_OCI8" = "no" && PHP_OCI8=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_OCI8" != "no"; then
  echo $ac_n "checking Oracle Install-Dir""... $ac_c" 1>&6
echo "configure:23895: checking Oracle Install-Dir" >&5
  if test "$PHP_OCI8" = "yes"; then
  	OCI8_DIR="$ORACLE_HOME"
  else
  	OCI8_DIR="$PHP_OCI8"
  fi
  echo "$ac_t""$OCI8_DIR" 1>&6

  if test "$PHP_SIGCHILD" != "yes"; then
	echo "+--------------------------------------------------------------------+"
	echo "| Notice:                                                            |"
	echo "| If you encounter <defunc> processes when using a local Oracle-DB   |"
	echo "| please recompile PHP and specify --enable-sigchild when configuring|"
	echo "| (This problem has been reported un Linux using Oracle >= 8.1.5)    |"
	echo "+--------------------------------------------------------------------+"
  fi

  if test -d "$OCI8_DIR/rdbms/public"; then
  	
  if test "$OCI8_DIR/rdbms/public" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/rdbms/public" || echo "$OCI8_DIR/rdbms/public" | grep '^/' >/dev/null ; then
    ai_p="$OCI8_DIR/rdbms/public"
  else
    
    ep_dir="`echo $OCI8_DIR/rdbms/public|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/rdbms/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  fi
  if test -d "$OCI8_DIR/rdbms/demo"; then
  	
  if test "$OCI8_DIR/rdbms/demo" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/rdbms/demo" || echo "$OCI8_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
    ai_p="$OCI8_DIR/rdbms/demo"
  else
    
    ep_dir="`echo $OCI8_DIR/rdbms/demo|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/rdbms/demo\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  fi
  if test -d "$OCI8_DIR/network/public"; then
  	
  if test "$OCI8_DIR/network/public" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/network/public" || echo "$OCI8_DIR/network/public" | grep '^/' >/dev/null ; then
    ai_p="$OCI8_DIR/network/public"
  else
    
    ep_dir="`echo $OCI8_DIR/network/public|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/network/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  fi
  if test -d "$OCI8_DIR/plsql/public"; then
  	
  if test "$OCI8_DIR/plsql/public" != "/usr/include"; then
    
  if test -z "$OCI8_DIR/plsql/public" || echo "$OCI8_DIR/plsql/public" | grep '^/' >/dev/null ; then
    ai_p="$OCI8_DIR/plsql/public"
  else
    
    ep_dir="`echo $OCI8_DIR/plsql/public|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/plsql/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  fi

  if test -f "$OCI8_DIR/lib/sysliblist"; then
  	
  for ac_i in `cat $OCI8_DIR/lib/sysliblist`; do
    case "$ac_i" in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
 case "$ac_ii" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  OCI8_SYSLIB="-l$ac_ii $OCI8_SYSLIB"

   else
     
 case "$ac_ii" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$ac_ii $LIBS"


  ;;
  esac

   fi

  ;;
  esac

    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p="$ac_ii"
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "OCI8_SYSLIB"; then
      OCI8_SYSLIB="-R$ac_ii -L$ac_ii $OCI8_SYSLIB"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    ;;
    esac
  done

  elif test -f "$OCI8_DIR/rdbms/lib/sysliblist"; then
  	
  for ac_i in `cat $OCI8_DIR/rdbms/lib/sysliblist`; do
    case "$ac_i" in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
 case "$ac_ii" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  OCI8_SYSLIB="-l$ac_ii $OCI8_SYSLIB"

   else
     
 case "$ac_ii" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$ac_ii $LIBS"


  ;;
  esac

   fi

  ;;
  esac

    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p="$ac_ii"
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "OCI8_SYSLIB"; then
      OCI8_SYSLIB="-R$ac_ii -L$ac_ii $OCI8_SYSLIB"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    ;;
    esac
  done

  fi

  
  echo $ac_n "checking Oracle version""... $ac_c" 1>&6
echo "configure:24179: checking Oracle version" >&5
  if test -f "$OCI8_DIR/orainst/unix.rgs"; then
	OCI8_VERSION=`grep '"ocommon"' $OCI8_DIR/orainst/unix.rgs | sed 's/  */:/g' | cut -d: -f 6 | cut -c 2-4`
	test -z "$OCI8_VERSION" && OCI8_VERSION=7.3
  elif test -f $OCI8_DIR/lib/libclntsh.s?.8.0; then
	OCI8_VERSION=8.1
  elif test -f $OCI8_DIR/lib/libclntsh.s?.1.0; then
	OCI8_VERSION=8.0
  elif test -f $OCI8_DIR/lib/libclntsh.a; then # AIX - XXX is this check still right for 8.1?
	OCI8_VERSION=8.0
  else
    { echo "configure: error: Oracle-OCI8 needed libraries not found" 1>&2; exit 1; }
  fi
  echo "$ac_t""$OCI8_VERSION" 1>&6

  case $OCI8_VERSION in
	8.0)
  	  

  if test "$ext_shared" = "yes"; then
    OCI8_SHARED_LIBADD="-lnlsrtl3 $OCI8_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "OCI8_SHARED_LIBADD"; then
      OCI8_SHARED_LIBADD="-R"" -L"" $OCI8_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R"" -L"" $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "nlsrtl3" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lnlsrtl3 $LIBS"


  ;;
  esac



  fi


  	  

  if test "$ext_shared" = "yes"; then
    OCI8_SHARED_LIBADD="-lcore4 $OCI8_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "OCI8_SHARED_LIBADD"; then
      OCI8_SHARED_LIBADD="-R"" -L"" $OCI8_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R"" -L"" $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "core4" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcore4 $LIBS"


  ;;
  esac



  fi


  	  

  if test "$ext_shared" = "yes"; then
    OCI8_SHARED_LIBADD="-lpsa $OCI8_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "OCI8_SHARED_LIBADD"; then
      OCI8_SHARED_LIBADD="-R"" -L"" $OCI8_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R"" -L"" $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "psa" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpsa $LIBS"


  ;;
  esac



  fi


  	  

  if test "$ext_shared" = "yes"; then
    OCI8_SHARED_LIBADD="-lclntsh $OCI8_SHARED_LIBADD"
    if test -n "$OCI8_DIR/lib"; then
      
  if test "$OCI8_DIR/lib" != "/usr/lib"; then
    
  if test -z "$OCI8_DIR/lib" || echo "$OCI8_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$OCI8_DIR/lib"
  else
    
    ep_dir="`echo $OCI8_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "OCI8_SHARED_LIBADD"; then
      OCI8_SHARED_LIBADD="-R$OCI8_DIR/lib -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$OCI8_DIR/lib"; then
    
  if test "$OCI8_DIR/lib" != "/usr/lib"; then
    
  if test -z "$OCI8_DIR/lib" || echo "$OCI8_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$OCI8_DIR/lib"
  else
    
    ep_dir="`echo $OCI8_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$OCI8_DIR/lib -L$OCI8_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "clntsh" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lclntsh $LIBS"


  ;;
  esac



  fi


	  ;;

	8.1)
  	  

  if test "$ext_shared" = "yes"; then
    OCI8_SHARED_LIBADD="-lclntsh $OCI8_SHARED_LIBADD"
    if test -n "$OCI8_DIR/lib"; then
      
  if test "$OCI8_DIR/lib" != "/usr/lib"; then
    
  if test -z "$OCI8_DIR/lib" || echo "$OCI8_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$OCI8_DIR/lib"
  else
    
    ep_dir="`echo $OCI8_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "OCI8_SHARED_LIBADD"; then
      OCI8_SHARED_LIBADD="-R$OCI8_DIR/lib -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$OCI8_DIR/lib"; then
    
  if test "$OCI8_DIR/lib" != "/usr/lib"; then
    
  if test -z "$OCI8_DIR/lib" || echo "$OCI8_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$OCI8_DIR/lib"
  else
    
    ep_dir="`echo $OCI8_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OCI8_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$OCI8_DIR/lib -L$OCI8_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "clntsh" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lclntsh $LIBS"


  ;;
  esac



  fi


	  ;;
	*)
      { echo "configure: error: Unsupported Oracle version!" 1>&2; exit 1; }
	  ;;
  esac

  
  EXT_SUBDIRS="$EXT_SUBDIRS oci8"
  
  if test -d "$abs_srcdir/ext/oci8"; then
    ext_builddir="ext/oci8"
    ext_srcdir="$abs_srcdir/ext/oci8"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/liboci8.la"
    EXT_STATIC="$EXT_STATIC oci8"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_OCI8 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  cat >> confdefs.h <<\EOF
#define HAVE_OCI8 1
EOF


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_SHARED_LIBADD"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_DIR"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST OCI8_VERSION"
  

fi








if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for Adabas support""... $ac_c" 1>&6
echo "configure:24826: checking for Adabas support" >&5
# Check whether --with-adabas or --without-adabas was given.
if test "${with_adabas+set}" = set; then
  withval="$with_adabas"
  
  if test "$withval" = "yes"; then
    withval=/usr/local
  fi
  if test "$withval" != "no"; then
    
  if test "$withval/incl" != "/usr/include"; then
    
  if test -z "$withval/incl" || echo "$withval/incl" | grep '^/' >/dev/null ; then
    ai_p="$withval/incl"
  else
    
    ep_dir="`echo $withval/incl|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/incl\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    ODBC_OBJS="$withval/lib/odbclib.a"
    ODBC_LIB="$abs_builddir/ext/odbc/libodbc_adabas.a"
    $srcdir/build/shtool mkdir -f -p ext/odbc
    rm -f "$ODBC_LIB"
    cp "$ODBC_OBJS" "$ODBC_LIB"
	
 case "sqlptc" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsqlptc $LIBS"


  ;;
  esac

	
 case "sqlrte" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsqlrte $LIBS"


  ;;
  esac

    

  if test -n "$abs_builddir/ext/odbc"; then
    
  if test "$abs_builddir/ext/odbc" != "/usr/lib"; then
    
  if test -z "$abs_builddir/ext/odbc" || echo "$abs_builddir/ext/odbc" | grep '^/' >/dev/null ; then
    ai_p="$abs_builddir/ext/odbc"
  else
    
    ep_dir="`echo $abs_builddir/ext/odbc|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$abs_builddir/ext/odbc\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$abs_builddir/ext/odbc -L$abs_builddir/ext/odbc $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "odbc_adabas" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lodbc_adabas $LIBS"


  ;;
  esac



    ODBC_TYPE=adabas
    cat >> confdefs.h <<\EOF
#define HAVE_ADABAS 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for Solid support""... $ac_c" 1>&6
echo "configure:24995: checking for Solid support" >&5
# Check whether --with-solid or --without-solid was given.
if test "${with_solid+set}" = set; then
  withval="$with_solid"
  
  if test "$withval" = "yes"; then
    withval=/usr/local/solid
  fi
  if test "$withval" != "no"; then
    ODBC_INCDIR=$withval/include
    ODBC_LIBDIR=$withval/lib
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_TYPE=solid
    if test -f $ODBC_LIBDIR/libsolodbc.a; then
      cat >> confdefs.h <<\EOF
#define HAVE_SOLID_35 1
EOF

    else
      cat >> confdefs.h <<\EOF
#define HAVE_SOLID 1
EOF

    fi
    echo "$ac_t""yes" 1>&6
    
  echo $ac_n "checking Solid library file""... $ac_c" 1>&6
echo "configure:25022: checking Solid library file" >&5  
  ac_solid_uname_r=`uname -r 2>/dev/null`
  ac_solid_uname_s=`uname -s 2>/dev/null`
  case $ac_solid_uname_s in
    AIX) ac_solid_os=a3x;;   # a4x for AIX4
    HP-UX) ac_solid_os=h9x;; # h1x for hpux11, h0x for hpux10
    IRIX) ac_solid_os=irx;;
    Linux) if ldd -v /bin/sh | grep GLIBC > /dev/null; then
		cat >> confdefs.h <<\EOF
#define SS_LINUX 1
EOF

		ac_solid_os=l2x
	else
		cat >> confdefs.h <<\EOF
#define SS_LINUX 1
EOF

		ac_solid_os=lux
	fi;; 
    SunOS) ac_solid_os=ssx;; # should we deal with SunOS 4?
    FreeBSD) if test `expr $ac_solid_uname_r : '\(.\)'` -gt "2"; then
        cat >> confdefs.h <<\EOF
#define SS_FBX 1
EOF

	ac_solid_os=fex
       else 
        cat >> confdefs.h <<\EOF
#define SS_FBX 1
EOF

	ac_solid_os=fbx
       fi	
    # "uname -s" on SCO makes no sense.
  esac

  if test -f $ODBC_LIBDIR/scl${ac_solid_os}30.a; then
    ac_solid_verion=30
    ac_solid_prefix=scl
  elif test -f $ODBC_LIBDIR/scl${ac_solid_os}23.a; then
    ac_solid_version=23
    ac_solid_prefix=scl
  elif test -f $ODBC_LIBDIR/soc${ac_solid_os}35.a; then
    ac_solid_version=35
    ac_solid_prefix=soc
  fi

  ODBC_LIBS=`echo $ODBC_LIBDIR/${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so | cut -d' ' -f1`
 if test ! -f $ODBC_LIBS; then
   echo $ODBC_LIBS
   ODBC_LIBS=`echo $ODBC_LIBDIR/${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a | cut -d' ' -f1`
 fi
 if test ! -f $ODBC_LIBS; then
     echo $ODBC_LIBS
     ODBC_LIBS=`echo $ODBC_LIBDIR/${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.so| cut -d' ' -f1`
 fi
 if test ! -f $ODBC_LIBS; then
    $ODBC_LIBS
     ODBC_LIBS=`echo $ODBC_LIBDIR/${ac_solid_prefix}${ac_solid_os}${ac_solid_version}.a | cut -d' ' -f1`
 fi
if test ! -f $ODBC_LIBS; then
     ODBC_LIBS=`echo $ODBC_LIBDIR/bcl${ac_solid_os}*.so | cut -d' ' -f1`
 fi
 if test ! -f $ODBC_LIBS; then
     ODBC_LIBS=`echo $ODBC_LIBDIR/bcl${ac_solid_os}*.a | cut -d' ' -f1`
 fi
  echo "$ac_t""`echo $ODBC_LIBS | sed -e 's!.*/!!'`" 1>&6

  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for IBM DB2 support""... $ac_c" 1>&6
echo "configure:25105: checking for IBM DB2 support" >&5
# Check whether --with-ibm-db2 or --without-ibm-db2 was given.
if test "${with_ibm_db2+set}" = set; then
  withval="$with_ibm_db2"
  
  if test "$withval" != "no"; then
    if test "$withval" = "yes"; then
        ODBC_INCDIR=/home/db2inst1/sqllib/include
        ODBC_LIBDIR=/home/db2inst1/sqllib/lib
    else
        ODBC_INCDIR=$withval/include
        ODBC_LIBDIR=$withval/lib
    fi
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_TYPE=db2
    ODBC_LIBS="-ldb2"
    cat >> confdefs.h <<\EOF
#define HAVE_IBMDB2 1
EOF


    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for Empress support""... $ac_c" 1>&6
echo "configure:25141: checking for Empress support" >&5
# Check whether --with-empress or --without-empress was given.
if test "${with_empress+set}" = set; then
  withval="$with_empress"
  
  if test "$withval" != "no"; then
    if test "$withval" = "yes"; then
      ODBC_INCDIR=$EMPRESSPATH/odbccl/include
      ODBC_LIBDIR=$EMPRESSPATH/odbccl/lib
    else
      ODBC_INCDIR=$withval/include
      ODBC_LIBDIR=$withval/lib
    fi
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_TYPE=empress
    cat >> confdefs.h <<\EOF
#define HAVE_EMPRESS 1
EOF

    echo "$ac_t""yes" 1>&6
    
  echo $ac_n "checking Empress library file""... $ac_c" 1>&6
echo "configure:25163: checking Empress library file" >&5
  ODBC_LIBS=`echo $ODBC_LIBDIR/empodbc.so | cut -d' ' -f1`
  if test ! -f $ODBC_LIBS; then
    ODBC_LIBS=`echo $ODBC_LIBDIR/empodbc.a | cut -d' ' -f1`
  fi
  echo "$ac_t""`echo $ODBC_LIBS | sed -e 's!.*/!!'`" 1>&6

  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for Velocis support""... $ac_c" 1>&6
echo "configure:25184: checking for Velocis support" >&5
# Check whether --with-velocis or --without-velocis was given.
if test "${with_velocis+set}" = set; then
  withval="$with_velocis"
  
  if test "$withval" != "no"; then
    if test "$withval" = "yes"; then
      ODBC_INCDIR=/usr/local/velocis/include
      ODBC_LIBDIR=/usr/local/velocis
    else
      ODBC_INCDIR=$withval/include
      ODBC_LIBDIR=$withval
    fi
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBDIR="$ODBC_LIBDIR/bin"
    case `uname` in
      FreeBSD|BSD/OS)
        ODBC_LIBS="$ODBC_LIBDIR/../lib/rdscli.a -lcompat";;
      *)
        ODBC_LIBS="-l_rdbc -l_sql";;
    esac
    ODBC_TYPE=velocis
    cat >> confdefs.h <<\EOF
#define HAVE_VELOCIS 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for a custom ODBC support""... $ac_c" 1>&6
echo "configure:25225: checking for a custom ODBC support" >&5
# Check whether --with-custom-odbc or --without-custom-odbc was given.
if test "${with_custom_odbc+set}" = set; then
  withval="$with_custom_odbc"
  
  if test "$withval" = "yes"; then
    withval=/usr/local
  fi
  if test "$withval" != "no"; then
    ODBC_INCDIR=$withval/include
    ODBC_LIBDIR=$withval/lib
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=$CUSTOM_ODBC_LIBS
    ODBC_TYPE=custom
    cat >> confdefs.h <<\EOF
#define HAVE_CODBC 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for iODBC support""... $ac_c" 1>&6
echo "configure:25259: checking for iODBC support" >&5
# Check whether --with-iodbc or --without-iodbc was given.
if test "${with_iodbc+set}" = set; then
  withval="$with_iodbc"
  
  if test "$withval" = "yes"; then
    withval=/usr/local
  fi
  if test "$withval" != "no"; then
    

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "iodbc" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-liodbc $LIBS"


  ;;
  esac



    
  if test "$withval/include" != "/usr/include"; then
    
  if test -z "$withval/include" || echo "$withval/include" | grep '^/' >/dev/null ; then
    ai_p="$withval/include"
  else
    
    ep_dir="`echo $withval/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

    ODBC_TYPE=iodbc
    cat >> confdefs.h <<\EOF
#define HAVE_IODBC 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for Easysoft ODBC-ODBC Bridge support""... $ac_c" 1>&6
echo "configure:25366: checking for Easysoft ODBC-ODBC Bridge support" >&5
# Check whether --with-esoob or --without-esoob was given.
if test "${with_esoob+set}" = set; then
  withval="$with_esoob"
  
  if test "$withval" = "yes"; then
    withval=/usr/local/easysoft/oob/client
  fi
  if test "$withval" != "no"; then
    ODBC_INCDIR=$withval/include
    ODBC_LIBDIR=$withval/lib
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=-lesoobclient
    ODBC_TYPE=ESOOB
    cat >> confdefs.h <<\EOF
#define HAVE_ESOOB 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for unixODBC support""... $ac_c" 1>&6
echo "configure:25400: checking for unixODBC support" >&5
# Check whether --with-unixODBC or --without-unixODBC was given.
if test "${with_unixODBC+set}" = set; then
  withval="$with_unixODBC"
  
  if test "$withval" = "yes"; then
    withval=/usr/local
  fi
  if test "$withval" != "no"; then
    ODBC_INCDIR=$withval/include
    ODBC_LIBDIR=$withval/lib
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=-lodbc
    ODBC_TYPE=unixODBC
    cat >> confdefs.h <<\EOF
#define HAVE_UNIXODBC 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for OpenLink ODBC support""... $ac_c" 1>&6
echo "configure:25434: checking for OpenLink ODBC support" >&5
# Check whether --with-openlink or --without-openlink was given.
if test "${with_openlink+set}" = set; then
  withval="$with_openlink"
  
  if test "$withval" = "yes"; then
    withval=/usr/local/openlink
  fi
  if test "$withval" != "no"; then
    ODBC_INCDIR=$withval/odbcsdk/include
    ODBC_LIBDIR=$withval/odbcsdk/lib
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS=-liodbc
    ODBC_TYPE=openlink
    cat >> confdefs.h <<\EOF
#define HAVE_OPENLINK 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -z "$ODBC_TYPE"; then
echo $ac_n "checking for DBMaker support""... $ac_c" 1>&6
echo "configure:25468: checking for DBMaker support" >&5
# Check whether --with-dbmaker or --without-dbmaker was given.
if test "${with_dbmaker+set}" = set; then
  withval="$with_dbmaker"
  
  
    case $withval in
	shared)
	    shared=yes
	    withval=yes
	    ;;
	shared,*)
	    shared=yes
	    withval=`echo $withval | sed -e 's/^shared,//'`      
	    ;;
	*)
	    shared=no
	    ;;
    esac
    if test -n "$php_always_shared"; then
		shared=yes
	fi

  if test "$withval" = "yes"; then
    # find dbmaker's home directory
    DBMAKER_HOME=`grep "^dbmaker:" /etc/passwd | awk -F: '{print $6}'`

    # check DBMaker version (from 5.0 to 2.0)
    DBMAKER_VERSION=5.0

    while  test ! -d $DBMAKER_HOME/$DBMAKER_VERSION -a \
                 "$DBMAKER_VERSION" != "2.9" ; do
        DM_VER=`echo $DBMAKER_VERSION | sed -e 's/\.//' | awk '{ print $1-1;}'`
        MAJOR_V=`echo $DM_VER | awk '{ print $1/10; }' \
                 | awk  -F. '{ print $1; }'`
        MINOR_V=`echo $DM_VER | awk '{ print $1%10; }'`
        DBMAKER_VERSION=$MAJOR_V.$MINOR_V
    done

    if  "$DBMAKER_VERSION" = "2.9" ; then
        withval=$DBMAKER_HOME
    else
        DBMAKER_PATH=$DBMAKER_HOME/$DBMAKER_VERSION
    fi

    withval=$DBMAKER_PATH
  fi

  if test "$withval" != "no"; then
    ODBC_INCDIR=$withval/include
    ODBC_LIBDIR=$withval/lib
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LFLAGS=-L$ODBC_LIBDIR
    ODBC_INCLUDE=-I$ODBC_INCDIR
    ODBC_LIBS="-ldmapic -lc"
    ODBC_TYPE=dbmaker

    cat >> confdefs.h <<\EOF
#define HAVE_DBMAKER 1
EOF


    if test "$shared" = "yes"; then
        echo "$ac_t""yes (shared)" 1>&6
        ODBC_LFLAGS="-L$withval/driver/JDBC"
        ODBC_LIBS="-ldmjdbc -lc -lm"
        ODBC_SHARED="odbc.la"
    else
        echo "$ac_t""yes (static)" 1>&6
        

  if test -n "$ODBC_LIBDIR"; then
    
  if test "$ODBC_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ODBC_LIBDIR" || echo "$ODBC_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$ODBC_LIBDIR"
  else
    
    ep_dir="`echo $ODBC_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ODBC_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ODBC_LIBDIR -L$ODBC_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "dmapic" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ldmapic $LIBS"


  ;;
  esac



        
  if test "$ODBC_INCDIR" != "/usr/include"; then
    
  if test -z "$ODBC_INCDIR" || echo "$ODBC_INCDIR" | grep '^/' >/dev/null ; then
    ai_p="$ODBC_INCDIR"
  else
    
    ep_dir="`echo $ODBC_INCDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ODBC_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

        ODBC_STATIC="libphpext_odbc.la"
    fi

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi

fi

if test -n "$ODBC_TYPE"; then
  INCLUDES="$INCLUDES $ODBC_INCLUDE"
  if test "$ODBC_TYPE" != "dbmaker"; then
    EXTRA_LIBS="$EXTRA_LIBS $ODBC_LFLAGS $ODBC_LIBS"
  fi
  cat >> confdefs.h <<\EOF
#define HAVE_UODBC 1
EOF

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCDIR"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_INCLUDE"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBDIR"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LIBS"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_LFLAGS"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ODBC_TYPE"
  

  
  EXT_SUBDIRS="$EXT_SUBDIRS odbc"
  
  if test -d "$abs_srcdir/ext/odbc"; then
    ext_builddir="ext/odbc"
    ext_srcdir="$abs_srcdir/ext/odbc"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$shared" != "shared" && test "$shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libodbc.la"
    EXT_STATIC="$EXT_STATIC odbc"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_ODBC 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi






echo $ac_n "checking for Oracle-ORACLE support""... $ac_c" 1>&6
echo "configure:25795: checking for Oracle-ORACLE support" >&5
# Check whether --with-oracle or --without-oracle was given.
if test "${with_oracle+set}" = set; then
  withval="$with_oracle"
  PHP_ORACLE=$withval
else
  PHP_ORACLE=no
fi


case "$PHP_ORACLE" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_ORACLE=`echo $ac_n "$PHP_ORACLE$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_ORACLE=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_ORACLE" = "no" && PHP_ORACLE=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_ORACLE" != "no"; then
  echo $ac_n "checking Oracle Install-Dir""... $ac_c" 1>&6
echo "configure:25839: checking Oracle Install-Dir" >&5
  if test "$PHP_ORACLE" = "yes"; then
  	ORACLE_DIR="$ORACLE_HOME"
  else
  	ORACLE_DIR="$PHP_ORACLE"
  fi
  echo "$ac_t""$ORACLE_DIR" 1>&6

  if test "$PHP_SIGCHILD" != "yes"; then
    echo "+--------------------------------------------------------------------+"
    echo "| Notice:                                                            |"
    echo "| If you encounter <defunc> processes when using a local Oracle-DB   |"
    echo "| please recompile PHP and specify --enable-sigchild when configuring|"
    echo "| (This problem has been reported un Linux using Oracle >= 8.1.5)    |"
    echo "+--------------------------------------------------------------------+"
  fi                                                                                          

  if test -d "$ORACLE_DIR/rdbms/public"; then
  	
  if test "$ORACLE_DIR/rdbms/public" != "/usr/include"; then
    
  if test -z "$ORACLE_DIR/rdbms/public" || echo "$ORACLE_DIR/rdbms/public" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/rdbms/public"
  else
    
    ep_dir="`echo $ORACLE_DIR/rdbms/public|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/rdbms/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  fi
  if test -d "$ORACLE_DIR/rdbms/demo"; then
  	
  if test "$ORACLE_DIR/rdbms/demo" != "/usr/include"; then
    
  if test -z "$ORACLE_DIR/rdbms/demo" || echo "$ORACLE_DIR/rdbms/demo" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/rdbms/demo"
  else
    
    ep_dir="`echo $ORACLE_DIR/rdbms/demo|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/rdbms/demo\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  fi
  if test -d "$ORACLE_DIR/network/public"; then
  	
  if test "$ORACLE_DIR/network/public" != "/usr/include"; then
    
  if test -z "$ORACLE_DIR/network/public" || echo "$ORACLE_DIR/network/public" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/network/public"
  else
    
    ep_dir="`echo $ORACLE_DIR/network/public|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/network/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  fi
  if test -d "$ORACLE_DIR/plsql/public"; then
  	
  if test "$ORACLE_DIR/plsql/public" != "/usr/include"; then
    
  if test -z "$ORACLE_DIR/plsql/public" || echo "$ORACLE_DIR/plsql/public" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/plsql/public"
  else
    
    ep_dir="`echo $ORACLE_DIR/plsql/public|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/plsql/public\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  fi

  if test -f "$ORACLE_DIR/lib/sysliblist"; then
  	
  for ac_i in `cat $ORACLE_DIR/lib/sysliblist`; do
    case "$ac_i" in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
 case "$ac_ii" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  ORACLE_SHARED_LIBADD="-l$ac_ii $ORACLE_SHARED_LIBADD"

   else
     
 case "$ac_ii" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$ac_ii $LIBS"


  ;;
  esac

   fi

  ;;
  esac

    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p="$ac_ii"
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ac_ii -L$ac_ii $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    ;;
    esac
  done

  elif test -f "$ORACLE_DIR/rdbms/lib/sysliblist"; then
  	
  for ac_i in `cat $ORACLE_DIR/rdbms/lib/sysliblist`; do
    case "$ac_i" in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
 case "$ac_ii" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  ORACLE_SHARED_LIBADD="-l$ac_ii $ORACLE_SHARED_LIBADD"

   else
     
 case "$ac_ii" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$ac_ii $LIBS"


  ;;
  esac

   fi

  ;;
  esac

    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p="$ac_ii"
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ac_ii -L$ac_ii $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    ;;
    esac
  done

  fi

  
  echo $ac_n "checking Oracle version""... $ac_c" 1>&6
echo "configure:26123: checking Oracle version" >&5
  if test -f "$ORACLE_DIR/orainst/unix.rgs"; then
  	ORACLE_VERSION=`grep '"ocommon"' $ORACLE_DIR/orainst/unix.rgs | sed 's/  */:/g' | cut -d: -f 6 | cut -c 2-4`
	test -z "$ORACLE_VERSION" && ORACLE_VERSION=7.3
  elif test -f $ORACLE_DIR/lib/libclntsh.s?.8.0; then
    ORACLE_VERSION=8.1
  elif test -f $ORACLE_DIR/lib/libclntsh.s?.1.0; then
    ORACLE_VERSION=8.0
  elif test -f $ORACLE_DIR/lib/libclntsh.a; then # AIX - XXX is this check still right for 8.1?
    ORACLE_VERSION=8.0
  else
  	{ echo "configure: error: Oracle needed libraries not found" 1>&2; exit 1; }
  fi
  echo "$ac_t""$ORACLE_VERSION" 1>&6

  case $ORACLE_VERSION in
	7.0|7.1)
	  if test -f $ORACLE_DIR/lib/liboracle.s?; then
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-loracle $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "oracle" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-loracle $LIBS"


  ;;
  esac



  fi


	  else
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "core" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcore $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcv6 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "cv6" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcv6 $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "nlsrtl" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lnlsrtl $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "core" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcore $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcv6 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "cv6" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcv6 $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "nlsrtl" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lnlsrtl $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "sqlnet" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsqlnet $LIBS"


  ;;
  esac



  fi


		

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lora $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ora" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lora $LIBS"


  ;;
  esac



  fi


		

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "sqlnet" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsqlnet $LIBS"


  ;;
  esac



  fi


		if test "$ext_shared" = "yes"; then
		  ORACLE_SHARED_LIBADD="$ORACLE_DIR/lib/osntab.o $ORACLE_SHARED_LIBADD";
		else
		  LIBS="$ORACLE_DIR/lib/osntab.o $LIBS";
		fi
		

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-locic $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ocic" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-locic $LIBS"


  ;;
  esac



  fi


		if test "`uname -s 2>/dev/null`" = "AIX"; then
		  if test "$ext_shared" = "yes"; then
		  	ORACLE_SHARED_LIBADD="$ORACLE_SHARED_LIBADD -bI:$ORACLE_DIR/lib/mili.exp"
		  else
		  	LIBS="$LIBS -bI:$ORACLE_DIR/lib/mili.exp"
		  fi
		fi
	  fi
	  ;;

	7.2)
	  if test -f $ORACLE_DIR/lib/libclntsh.s?; then
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclntsh $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "clntsh" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lclntsh $LIBS"


  ;;
  esac



  fi


	  else
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "core3" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcore3 $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "nlsrtl3" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lnlsrtl3 $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lc3v6 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "c3v6" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lc3v6 $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "nlsrtl3" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lnlsrtl3 $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lora $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ora" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lora $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "sqlnet" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsqlnet $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lora $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ora" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lora $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "sqlnet" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsqlnet $LIBS"


  ;;
  esac



  fi


		if test "$ext_shared" = "yes"; then
		  ORACLE_SHARED_LIBADD="$ORACLE_DIR/lib/osntab.o $ORACLE_SHARED_LIBADD";
		else
		  LIBS="$ORACLE_DIR/lib/osntab.o $LIBS";
		fi
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-locic $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ocic" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-locic $LIBS"


  ;;
  esac



  fi


	  fi
	  ;;

	7.3)
	  if test -f $ORACLE_DIR/lib/libclntsh.s?; then
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclntsh $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "clntsh" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lclntsh $LIBS"


  ;;
  esac



  fi


	  else
	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "core3" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcore3 $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "nlsrtl3" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lnlsrtl3 $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "core3" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcore3 $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lc3v6 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "c3v6" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lc3v6 $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl3 $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "nlsrtl3" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lnlsrtl3 $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lepc $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "epc" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lepc $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lgeneric $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "generic" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lgeneric $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcommon $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "common" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcommon $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclient $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "client" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lclient $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "sqlnet" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsqlnet $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lncr $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ncr" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lncr $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "sqlnet" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsqlnet $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lgeneric $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "generic" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lgeneric $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcommon $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "common" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcommon $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclient $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "client" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lclient $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "sqlnet" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsqlnet $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lncr $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ncr" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lncr $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lsqlnet $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "sqlnet" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsqlnet $LIBS"


  ;;
  esac



  fi


	    

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclient $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "client" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lclient $LIBS"


  ;;
  esac



  fi


	  fi
	  ;;
	  
	8.0)
  	  

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lnlsrtl3 $ORACLE_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R"" -L"" $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R"" -L"" $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "nlsrtl3" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lnlsrtl3 $LIBS"


  ;;
  esac



  fi


  	  

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lcore4 $ORACLE_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R"" -L"" $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R"" -L"" $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "core4" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcore4 $LIBS"


  ;;
  esac



  fi


  	  

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lpsa $ORACLE_SHARED_LIBADD"
    if test -n """"; then
      
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R"" -L"" $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n """"; then
    
  if test """" != "/usr/lib"; then
    
  if test -z """" || echo """" | grep '^/' >/dev/null ; then
    ai_p=""""
  else
    
    ep_dir="`echo ""|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"""\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R"" -L"" $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "psa" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpsa $LIBS"


  ;;
  esac



  fi


  	  

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclntsh $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "clntsh" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lclntsh $LIBS"


  ;;
  esac



  fi


	  ;;

	8.1)
  	  

  if test "$ext_shared" = "yes"; then
    ORACLE_SHARED_LIBADD="-lclntsh $ORACLE_SHARED_LIBADD"
    if test -n "$ORACLE_DIR/lib"; then
      
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ORACLE_SHARED_LIBADD"; then
      ORACLE_SHARED_LIBADD="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $ORACLE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ORACLE_DIR/lib"; then
    
  if test "$ORACLE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$ORACLE_DIR/lib" || echo "$ORACLE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$ORACLE_DIR/lib"
  else
    
    ep_dir="`echo $ORACLE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ORACLE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ORACLE_DIR/lib -L$ORACLE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "clntsh" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lclntsh $LIBS"


  ;;
  esac



  fi


	  ;;
	*)
      { echo "configure: error: Unsupported Oracle version!" 1>&2; exit 1; }
	  ;;
  esac

  
  EXT_SUBDIRS="$EXT_SUBDIRS oracle"
  
  if test -d "$abs_srcdir/ext/oracle"; then
    ext_builddir="ext/oracle"
    ext_srcdir="$abs_srcdir/ext/oracle"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/liboracle.la"
    EXT_STATIC="$EXT_STATIC oracle"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_ORACLE 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  cat >> confdefs.h <<\EOF
#define HAVE_ORACLE 1
EOF


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ORACLE_SHARED_LIBADD"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ORACLE_DIR"
  

  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ORACLE_VERSION"
  

fi





echo $ac_n "checking whether to include PCRE support""... $ac_c" 1>&6
echo "configure:30655: checking whether to include PCRE support" >&5
# Check whether --with-pcre-regex or --without-pcre-regex was given.
if test "${with_pcre_regex+set}" = set; then
  withval="$with_pcre_regex"
  PHP_PCRE_REGEX=$withval
else
  PHP_PCRE_REGEX=yes
fi


case "$PHP_PCRE_REGEX" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PCRE_REGEX=`echo $ac_n "$PHP_PCRE_REGEX$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PCRE_REGEX=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_PCRE_REGEX" = "no" && PHP_PCRE_REGEX=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PCRE_REGEX" != "no"; then
  
  EXT_SUBDIRS="$EXT_SUBDIRS pcre"
  
  if test -d "$abs_srcdir/ext/pcre"; then
    ext_builddir="ext/pcre"
    ext_srcdir="$abs_srcdir/ext/pcre"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libpcre.la"
    EXT_STATIC="$EXT_STATIC pcre"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_PCRE 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  if test "$PHP_PCRE_REGEX" = "yes"; then
    PCRE_LIBADD=pcrelib/libpcre.la
    PCRE_SHARED_LIBADD=pcrelib/libpcre.la
    PCRE_SUBDIRS=pcrelib
    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PCRE_LIBADD"
  

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST PCRE_SUBDIRS"
  

    cat >> confdefs.h <<\EOF
#define HAVE_BUNDLED_PCRE 1
EOF

    
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/pcrelib/Makefile"

    
  lib_makefile="$ext_builddir/pcrelib/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir/pcrelib
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
    lib_build_shared=yes
    if test -n "yes"; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

  else
    test -f $PHP_PCRE_REGEX/pcre.h && PCRE_INCDIR=$PHP_PCRE_REGEX
    test -f $PHP_PCRE_REGEX/include/pcre.h && PCRE_INCDIR=$PHP_PCRE_REGEX/include
    
    if test -z "$PCRE_INCDIR"; then
      echo "$ac_t""Could not find pcre.h in $PHP_PCRE_REGEX" 1>&6
    fi

    
    pcre_major=`grep PCRE_MAJOR $PCRE_INCDIR/pcre.h | sed -e 's/[^0-9]//g'`
    pcre_minor=`grep PCRE_MINOR $PCRE_INCDIR/pcre.h | sed -e 's/[^0-9]//g'`
    
    pcre_minor_length=`echo "$pcre_minor" | wc -c | sed -e 's/^0-9//g'`
    if test "$pcre_minor_length" -eq 2 ; then
      pcre_minor="$pcre_minor"0
    fi
    pcre_version=$pcre_major$pcre_minor
    if test "$pcre_version" -lt 208; then
      { echo "configure: error: The PCRE extension requires PCRE library version >= 2.08" 1>&2; exit 1; }
    fi

    test -f $PHP_PCRE_REGEX/libpcre.a && PCRE_LIBDIR="$PHP_PCRE_REGEX"
    test -f $PHP_PCRE_REGEX/lib/libpcre.a && PCRE_LIBDIR="$PHP_PCRE_REGEX/lib"

    if test -z "$PCRE_LIBDIR" ; then
      { echo "configure: error: Could not find libpcre.a in $PHP_PCRE_REGEX" 1>&2; exit 1; }
    fi

    

  if test "$ext_shared" = "yes"; then
    PCRE_SHARED_LIBADD="-lpcre $PCRE_SHARED_LIBADD"
    if test -n "$PCRE_LIBDIR"; then
      
  if test "$PCRE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PCRE_LIBDIR" || echo "$PCRE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$PCRE_LIBDIR"
  else
    
    ep_dir="`echo $PCRE_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PCRE_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "PCRE_SHARED_LIBADD"; then
      PCRE_SHARED_LIBADD="-R$PCRE_LIBDIR -L$PCRE_LIBDIR $PCRE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$PCRE_LIBDIR"; then
    
  if test "$PCRE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PCRE_LIBDIR" || echo "$PCRE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$PCRE_LIBDIR"
  else
    
    ep_dir="`echo $PCRE_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PCRE_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$PCRE_LIBDIR -L$PCRE_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "pcre" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpcre $LIBS"


  ;;
  esac



  fi


    
    
  if test "$PCRE_INCDIR" != "/usr/include"; then
    
  if test -z "$PCRE_INCDIR" || echo "$PCRE_INCDIR" | grep '^/' >/dev/null ; then
    ai_p="$PCRE_INCDIR"
  else
    
    ep_dir="`echo $PCRE_INCDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PCRE_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

    cat >> confdefs.h <<\EOF
#define HAVE_PCRE 1
EOF

  fi
fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST PCRE_SHARED_LIBADD"
  



echo $ac_n "checking for memmove""... $ac_c" 1>&6
echo "configure:31052: checking for memmove" >&5
if eval "test \"`echo '$''{'ac_cv_func_memmove'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 31057 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char memmove(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char memmove();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_memmove) || defined (__stub___memmove)
choke me
#else
memmove();
#endif

; return 0; }
EOF
if { (eval echo configure:31080: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_memmove=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_memmove=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'memmove`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
cat >> confdefs.h <<\EOF
#define USE_BCOPY 1
EOF

fi



echo $ac_n "checking whether to include Pdflib 3.x support""... $ac_c" 1>&6
echo "configure:31106: checking whether to include Pdflib 3.x support" >&5
# Check whether --with-pdflib or --without-pdflib was given.
if test "${with_pdflib+set}" = set; then
  withval="$with_pdflib"
  
echo $withval
  case "$withval" in
    no)
      echo "$ac_t""no" 1>&6 ;;
    yes)
      echo "$ac_t""yes" 1>&6
      
  EXT_SUBDIRS="$EXT_SUBDIRS pdf"
  
  if test -d "$abs_srcdir/ext/pdf"; then
    ext_builddir="ext/pdf"
    ext_srcdir="$abs_srcdir/ext/pdf"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libpdf.la"
    EXT_STATIC="$EXT_STATIC pdf"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_PDF 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


      old_LDFLAGS=$LDFLAGS
		  old_LIBS=$LIBS
		  LIBS="$LIBS -ltiff -ljpeg -lpng -lz"
      echo $ac_n "checking for PDF_show_boxed in -lpdf""... $ac_c" 1>&6
echo "configure:31244: checking for PDF_show_boxed in -lpdf" >&5
ac_lib_var=`echo pdf'_'PDF_show_boxed | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpdf  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31252 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PDF_show_boxed();

int main() {
PDF_show_boxed()
; return 0; }
EOF
if { (eval echo configure:31263: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PDFLIB 1
EOF

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: pdflib extension requires at least pdflib 3.x. You may also need libtiff and libjpeg. If so" 1>&2; exit 1; }
fi

      LIBS=$old_LIBS
      LDFLAGS=$old_LDFLAGS
      
 case "pdf" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpdf $LIBS"


  ;;
  esac

      
 case "tiff" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ltiff $LIBS"


  ;;
  esac

      
 case "png" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpng $LIBS"


  ;;
  esac

      
 case "jpeg" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ljpeg $LIBS"


  ;;
  esac

      
 case "z" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lz $LIBS"


  ;;
  esac

      ;;
    *)
      test -f $withval/include/pdflib.h && PDFLIB_INCLUDE="$withval/include"
      if test -n "$PDFLIB_INCLUDE" ; then
        echo "$ac_t""yes" 1>&6
        
  EXT_SUBDIRS="$EXT_SUBDIRS pdf"
  
  if test -d "$abs_srcdir/ext/pdf"; then
    ext_builddir="ext/pdf"
    ext_srcdir="$abs_srcdir/ext/pdf"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libpdf.la"
    EXT_STATIC="$EXT_STATIC pdf"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_PDF 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


        old_withval=$withval

        if test $HAVE_ZLIB; then
          echo $ac_n "checking for zlib (needed by pdflib 3.x)""... $ac_c" 1>&6
echo "configure:31481: checking for zlib (needed by pdflib 3.x)" >&5
          # Check whether --with-zlib-dir or --without-zlib-dir was given.
if test "${with_zlib_dir+set}" = set; then
  withval="$with_zlib_dir"
  
            if test -z $withval; then
              withval="/usr/local"
            fi
            old_LIBS=$LIBS
            LIBS="$LIBS -L$withval/lib"
            echo $ac_n "checking for deflate in -lz""... $ac_c" 1>&6
echo "configure:31492: checking for deflate in -lz" >&5
ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lz  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31500 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char deflate();

int main() {
deflate()
; return 0; }
EOF
if { (eval echo configure:31511: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  PDFLIB_LIBS="-L$withval/lib -lz"
else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

            LIBS=$old_LIBS
            

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "z" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lz $LIBS"


  ;;
  esac



          
else
  
            echo $ac_n "checking for deflate in -lz""... $ac_c" 1>&6
echo "configure:31588: checking for deflate in -lz" >&5
ac_lib_var=`echo z'_'deflate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lz  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31596 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char deflate();

int main() {
deflate()
; return 0; }
EOF
if { (eval echo configure:31607: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo z | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lz $LIBS"

else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

            
 case "z" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lz $LIBS"


  ;;
  esac

            LIBS="$LIBS -lz"
          
fi

        else
          echo "checking for libz needed by pdflib 3.x... already zlib support"
          PDFLIB_LIBS="$ZLIB_LIBS"
          LIBS="$LIBS -lz"
        fi

        # Check whether --with-jpeg-dir or --without-jpeg-dir was given.
if test "${with_jpeg_dir+set}" = set; then
  withval="$with_jpeg_dir"
  
          if test -z $withval; then
            withval="/usr/local"
          fi
          old_LIBS=$LIBS
          LIBS="$LIBS -L$withval/lib"
          echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
echo "configure:31667: checking for jpeg_read_header in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31675 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_read_header();

int main() {
jpeg_read_header()
; return 0; }
EOF
if { (eval echo configure:31686: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  PDFLIB_LIBS="$PDFLIB_LIBS -L$withval/lib -ljpeg"
else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          LIBS=$old_LIBS
          

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "jpeg" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ljpeg $LIBS"


  ;;
  esac



          LIBS="$LIBS -L$withval/lib -ljpeg"
        
else
  
          echo $ac_n "checking for jpeg_read_header in -ljpeg""... $ac_c" 1>&6
echo "configure:31764: checking for jpeg_read_header in -ljpeg" >&5
ac_lib_var=`echo jpeg'_'jpeg_read_header | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ljpeg  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31772 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char jpeg_read_header();

int main() {
jpeg_read_header()
; return 0; }
EOF
if { (eval echo configure:31783: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo jpeg | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-ljpeg $LIBS"

else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          
 case "jpeg" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ljpeg $LIBS"


  ;;
  esac

          LIBS="$LIBS -ljpeg"
        
fi
 

        # Check whether --with-png-dir or --without-png-dir was given.
if test "${with_png_dir+set}" = set; then
  withval="$with_png_dir"
  
          if test -z $withval; then
            withval="/usr/local"
          fi
          old_LIBS=$LIBS
          LIBS="$LIBS -L$withval/lib"
          echo $ac_n "checking for png_create_info_struct in -lpng""... $ac_c" 1>&6
echo "configure:31838: checking for png_create_info_struct in -lpng" >&5
ac_lib_var=`echo png'_'png_create_info_struct | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31846 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_create_info_struct();

int main() {
png_create_info_struct()
; return 0; }
EOF
if { (eval echo configure:31857: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  PDFLIB_LIBS="$PDFLIB_LIBS -L$withval/lib -lpng"
else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          LIBS=$old_LIBS
          

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "png" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpng $LIBS"


  ;;
  esac



          LIBS="$LIBS -L$withval/lib -lpng"
        
else
  
          echo $ac_n "checking for png_create_info_struct in -lpng""... $ac_c" 1>&6
echo "configure:31935: checking for png_create_info_struct in -lpng" >&5
ac_lib_var=`echo png'_'png_create_info_struct | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpng  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 31943 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char png_create_info_struct();

int main() {
png_create_info_struct()
; return 0; }
EOF
if { (eval echo configure:31954: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo png | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lpng $LIBS"

else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          
 case "png" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpng $LIBS"


  ;;
  esac

          LIBS="$LIBS -lpng"
        
fi
 

        # Check whether --with-tiff-dir or --without-tiff-dir was given.
if test "${with_tiff_dir+set}" = set; then
  withval="$with_tiff_dir"
  
          if test -z $withval; then
            withval="/usr/local"
          fi
          old_LIBS=$LIBS
          LIBS="$LIBS -L$withval/lib"
          echo $ac_n "checking for TIFFOpen in -ltiff""... $ac_c" 1>&6
echo "configure:32009: checking for TIFFOpen in -ltiff" >&5
ac_lib_var=`echo tiff'_'TIFFOpen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltiff  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32017 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char TIFFOpen();

int main() {
TIFFOpen()
; return 0; }
EOF
if { (eval echo configure:32028: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  PDFLIB_LIBS="$PDFLIB_LIBS -L$withval/lib -ltiff"
else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          LIBS=$old_LIBS
          

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "tiff" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ltiff $LIBS"


  ;;
  esac



          LIBS="$LIBS -L$withval/lib -ltiff"
        
else
  
          echo $ac_n "checking for TIFFOpen in -ltiff""... $ac_c" 1>&6
echo "configure:32106: checking for TIFFOpen in -ltiff" >&5
ac_lib_var=`echo tiff'_'TIFFOpen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltiff  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32114 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char TIFFOpen();

int main() {
TIFFOpen()
; return 0; }
EOF
if { (eval echo configure:32125: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo tiff | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-ltiff $LIBS"

else
  echo "$ac_t""no" 1>&6
echo "$ac_t""no" 1>&6
fi

          
 case "tiff" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ltiff $LIBS"


  ;;
  esac

          LIBS="$LIBS -ltiff"
        
fi
 
        withval=$old_withval

        old_LIBS=$LIBS
        LIBS="$LIBS -L$withval/lib"
        echo $ac_n "checking for PDF_show_boxed in -lpdf""... $ac_c" 1>&6
echo "configure:32174: checking for PDF_show_boxed in -lpdf" >&5
ac_lib_var=`echo pdf'_'PDF_show_boxed | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpdf  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32182 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PDF_show_boxed();

int main() {
PDF_show_boxed()
; return 0; }
EOF
if { (eval echo configure:32193: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PDFLIB 1
EOF
 PDFLIB_LIBS="$PDFLIB_LIBS -L$withval/lib -lpdf"
else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: pdflib extension requires pdflib 3.x." 1>&2; exit 1; }
fi

        LIBS=$old_LIBS
        

  if test -n "$withval/lib"; then
    
  if test "$withval/lib" != "/usr/lib"; then
    
  if test -z "$withval/lib" || echo "$withval/lib" | grep '^/' >/dev/null ; then
    ai_p="$withval/lib"
  else
    
    ep_dir="`echo $withval/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$withval/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$withval/lib -L$withval/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "pdf" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpdf $LIBS"


  ;;
  esac



        
  if test "$PDFLIB_INCLUDE" != "/usr/include"; then
    
  if test -z "$PDFLIB_INCLUDE" || echo "$PDFLIB_INCLUDE" | grep '^/' >/dev/null ; then
    ai_p="$PDFLIB_INCLUDE"
  else
    
    ep_dir="`echo $PDFLIB_INCLUDE|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PDFLIB_INCLUDE\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

      else
        echo "$ac_t""no" 1>&6
      fi ;;
  esac

else
  
  echo "$ac_t""no" 1>&6

fi





echo $ac_n "checking whether to include Verisign Payflow Pro support""... $ac_c" 1>&6
echo "configure:32312: checking whether to include Verisign Payflow Pro support" >&5
# Check whether --with-pfpro or --without-pfpro was given.
if test "${with_pfpro+set}" = set; then
  withval="$with_pfpro"
  PHP_PFPRO=$withval
else
  PHP_PFPRO=no
fi


case "$PHP_PFPRO" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PFPRO=`echo $ac_n "$PHP_PFPRO$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PFPRO=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_PFPRO" = "no" && PHP_PFPRO=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PFPRO" != "no"; then

  for i in /usr/local /usr $PHP_PFPRO; do
    if test -r $i/pfpro.h; then
      PFPRO_INC_DIR=$i
    elif test -r $i/include/pfpro.h; then
      PFPRO_INC_DIR=$i/include
    fi

    if test -r $i/libpfpro.so; then
      PFPRO_LIB_DIR=$i
    elif test -r $i/lib/libpfpro.so; then
      PFPRO_LIB_DIR=$i/lib
    fi
  done

  if test -z "$PFPRO_INC_DIR"; then
    { echo "configure: error: Could not find pfpro.h. Please make sure you have the
                 Verisign Payflow Pro SDK installed. Use
                 ./configure --with-pfpro=<pfpro-dir> if necessary" 1>&2; exit 1; }
  fi

  if test -z "$PFPRO_LIB_DIR"; then
    { echo "configure: error: Could not find libpfpro.so. Please make sure you have the
                 Verisign Payflow Pro SDK installed. Use
                 ./configure --with-pfpro=<pfpro-dir> if necessary" 1>&2; exit 1; }
  fi

  echo "$ac_t""found in $PFPRO_LIB_DIR" 1>&6

  
  if test "$PFPRO_INC_DIR" != "/usr/include"; then
    
  if test -z "$PFPRO_INC_DIR" || echo "$PFPRO_INC_DIR" | grep '^/' >/dev/null ; then
    ai_p="$PFPRO_INC_DIR"
  else
    
    ep_dir="`echo $PFPRO_INC_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PFPRO_INC_DIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST PFPRO_SHARED_LIBADD"
  

  

  if test "$ext_shared" = "yes"; then
    PFPRO_SHARED_LIBADD="-lpfpro $PFPRO_SHARED_LIBADD"
    if test -n "$PFPRO_LIB_DIR"; then
      
  if test "$PFPRO_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$PFPRO_LIB_DIR" || echo "$PFPRO_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p="$PFPRO_LIB_DIR"
  else
    
    ep_dir="`echo $PFPRO_LIB_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PFPRO_LIB_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "PFPRO_SHARED_LIBADD"; then
      PFPRO_SHARED_LIBADD="-R$PFPRO_LIB_DIR -L$PFPRO_LIB_DIR $PFPRO_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$PFPRO_LIB_DIR"; then
    
  if test "$PFPRO_LIB_DIR" != "/usr/lib"; then
    
  if test -z "$PFPRO_LIB_DIR" || echo "$PFPRO_LIB_DIR" | grep '^/' >/dev/null ; then
    ai_p="$PFPRO_LIB_DIR"
  else
    
    ep_dir="`echo $PFPRO_LIB_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PFPRO_LIB_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$PFPRO_LIB_DIR -L$PFPRO_LIB_DIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "pfpro" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpfpro $LIBS"


  ;;
  esac



  fi



  cat >> confdefs.h <<\EOF
#define HAVE_PFPRO 1
EOF


  
  EXT_SUBDIRS="$EXT_SUBDIRS pfpro"
  
  if test -d "$abs_srcdir/ext/pfpro"; then
    ext_builddir="ext/pfpro"
    ext_srcdir="$abs_srcdir/ext/pfpro"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libpfpro.la"
    EXT_STATIC="$EXT_STATIC pfpro"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_PFPRO 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi






echo $ac_n "checking for PostgreSQL support""... $ac_c" 1>&6
echo "configure:32647: checking for PostgreSQL support" >&5
# Check whether --with-pgsql or --without-pgsql was given.
if test "${with_pgsql+set}" = set; then
  withval="$with_pgsql"
  PHP_PGSQL=$withval
else
  PHP_PGSQL=no
fi


case "$PHP_PGSQL" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PGSQL=`echo $ac_n "$PHP_PGSQL$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PGSQL=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_PGSQL" = "no" && PHP_PGSQL=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PGSQL" != "no"; then
  for i in /usr /usr/local /usr/local/pgsql $PHP_PGSQL; do
    if test -r $i/include/libpq-fe.h; then PGSQL_DIR=$i; PGSQL_INCDIR=$i/include
    elif test -r $i/include/pgsql/libpq-fe.h; then PGSQL_DIR=$i; PGSQL_INCDIR=$i/include/pgsql
    elif test -r $i/include/postgresql/libpq-fe.h; then PGSQL_DIR=$i; PGSQL_INCDIR=$i/include/postgresql
    fi
  done
  
  if test -z "$PGSQL_DIR"; then
    echo "$ac_t""Cannot find libpq-fe.h. Please specify the installation path of PostgreSQL" 1>&6
  fi

  PGSQL_INCLUDE="-I$PGSQL_INCDIR"

  PGSQL_LIBDIR=$PGSQL_DIR/lib
  test -d $PGSQL_DIR/lib/pgsql && PGSQL_LIBDIR=$PGSQL_DIR/lib/pgsql

  old_LIBS="$LIBS"
  old_LDFLAGS="$LDFLAGS"
  LDFLAGS="$LDFLAGS -L$PGSQL_LIBDIR"
  echo $ac_n "checking for PQcmdTuples in -lpq""... $ac_c" 1>&6
echo "configure:32710: checking for PQcmdTuples in -lpq" >&5
ac_lib_var=`echo pq'_'PQcmdTuples | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32718 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQcmdTuples();

int main() {
PQcmdTuples()
; return 0; }
EOF
if { (eval echo configure:32729: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQCMDTUPLES 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQoidValue in -lpq""... $ac_c" 1>&6
echo "configure:32753: checking for PQoidValue in -lpq" >&5
ac_lib_var=`echo pq'_'PQoidValue | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32761 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQoidValue();

int main() {
PQoidValue()
; return 0; }
EOF
if { (eval echo configure:32772: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQOIDVALUE 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for PQclientEncoding in -lpq""... $ac_c" 1>&6
echo "configure:32796: checking for PQclientEncoding in -lpq" >&5
ac_lib_var=`echo pq'_'PQclientEncoding | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32804 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char PQclientEncoding();

int main() {
PQclientEncoding()
; return 0; }
EOF
if { (eval echo configure:32815: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PQCLIENTENCODING 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  echo $ac_n "checking for pg_encoding_to_char in -lpq""... $ac_c" 1>&6
echo "configure:32839: checking for pg_encoding_to_char in -lpq" >&5
ac_lib_var=`echo pq'_'pg_encoding_to_char | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpq  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 32847 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pg_encoding_to_char();

int main() {
pg_encoding_to_char()
; return 0; }
EOF
if { (eval echo configure:32858: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_PGSQL_WITH_MULTIBYTE_SUPPORT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

  LIBS="$old_LIBS"
  LDFLAGS="$old_LDFLAGS"
  
  cat >> confdefs.h <<\EOF
#define HAVE_PGSQL 1
EOF


  

  if test "$ext_shared" = "yes"; then
    PGSQL_SHARED_LIBADD="-lpq $PGSQL_SHARED_LIBADD"
    if test -n "$PGSQL_LIBDIR"; then
      
  if test "$PGSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$PGSQL_LIBDIR"
  else
    
    ep_dir="`echo $PGSQL_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "PGSQL_SHARED_LIBADD"; then
      PGSQL_SHARED_LIBADD="-R$PGSQL_LIBDIR -L$PGSQL_LIBDIR $PGSQL_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$PGSQL_LIBDIR"; then
    
  if test "$PGSQL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PGSQL_LIBDIR" || echo "$PGSQL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$PGSQL_LIBDIR"
  else
    
    ep_dir="`echo $PGSQL_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PGSQL_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$PGSQL_LIBDIR -L$PGSQL_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "pq" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpq $LIBS"


  ;;
  esac



  fi


  
  
  EXT_SUBDIRS="$EXT_SUBDIRS pgsql"
  
  if test -d "$abs_srcdir/ext/pgsql"; then
    ext_builddir="ext/pgsql"
    ext_srcdir="$abs_srcdir/ext/pgsql"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libpgsql.la"
    EXT_STATIC="$EXT_STATIC pgsql"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_PGSQL 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi


  PHP_VAR_SUBST="$PHP_VAR_SUBST PGSQL_INCLUDE"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PGSQL_SHARED_LIBADD"
  





echo $ac_n "checking whether to include POSIX-like functions""... $ac_c" 1>&6
echo "configure:33122: checking whether to include POSIX-like functions" >&5
# Check whether --enable-posix or --disable-posix was given.
if test "${enable_posix+set}" = set; then
  enableval="$enable_posix"
  PHP_POSIX=$enableval
else
  PHP_POSIX=yes
fi


case "$PHP_POSIX" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_POSIX=`echo $ac_n "$PHP_POSIX$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_POSIX=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_POSIX" = "no" && PHP_POSIX=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_POSIX" = "yes"; then
  cat >> confdefs.h <<\EOF
#define HAVE_POSIX 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS posix"
  
  if test -d "$abs_srcdir/ext/posix"; then
    ext_builddir="ext/posix"
    ext_srcdir="$abs_srcdir/ext/posix"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libposix.la"
    EXT_STATIC="$EXT_STATIC posix"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_POSIX 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"



  for ac_func in seteuid setegid setsid getsid setpgid ctermid mkfifo getrlimit
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:33296: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 33301 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:33324: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

fi




echo $ac_n "checking whether to include pspell support""... $ac_c" 1>&6
echo "configure:33354: checking whether to include pspell support" >&5
# Check whether --with-pspell or --without-pspell was given.
if test "${with_pspell+set}" = set; then
  withval="$with_pspell"
  PHP_PSPELL=$withval
else
  PHP_PSPELL=no
fi


case "$PHP_PSPELL" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PSPELL=`echo $ac_n "$PHP_PSPELL$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_PSPELL=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_PSPELL" = "no" && PHP_PSPELL=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_PSPELL" != "no"; then
	
  EXT_SUBDIRS="$EXT_SUBDIRS pspell"
  
  if test -d "$abs_srcdir/ext/pspell"; then
    ext_builddir="ext/pspell"
    ext_srcdir="$abs_srcdir/ext/pspell"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libpspell.la"
    EXT_STATIC="$EXT_STATIC pspell"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_PSPELL 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


	for i in /usr/local /usr $PHP_PSPELL; do
		if test -f $i/include/pspell/pspell.h; then
			PSPELL_DIR=$i
			PSPELL_INCDIR=$i/include/pspell
		elif test -f $i/include/pspell.h; then
			PSPELL_DIR=$i
			PSPELL_INCDIR=$i
		fi
	done

	if test -z "$PSPELL_DIR"; then
		{ echo "configure: error: Cannot find pspell" 1>&2; exit 1; }
	fi

	PSPELL_LIBDIR=$PSPELL_DIR/lib

	cat >> confdefs.h <<\EOF
#define HAVE_PSPELL 1
EOF

	
  PHP_VAR_SUBST="$PHP_VAR_SUBST PSPELL_SHARED_LIBADD"
  

	

  if test "$ext_shared" = "yes"; then
    PSPELL_SHARED_LIBADD="-lpspell $PSPELL_SHARED_LIBADD"
    if test -n "$PSPELL_LIBDIR"; then
      
  if test "$PSPELL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$PSPELL_LIBDIR"
  else
    
    ep_dir="`echo $PSPELL_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "PSPELL_SHARED_LIBADD"; then
      PSPELL_SHARED_LIBADD="-R$PSPELL_LIBDIR -L$PSPELL_LIBDIR $PSPELL_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$PSPELL_LIBDIR"; then
    
  if test "$PSPELL_LIBDIR" != "/usr/lib"; then
    
  if test -z "$PSPELL_LIBDIR" || echo "$PSPELL_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$PSPELL_LIBDIR"
  else
    
    ep_dir="`echo $PSPELL_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PSPELL_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$PSPELL_LIBDIR -L$PSPELL_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "pspell" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lpspell $LIBS"


  ;;
  esac



  fi


	
  if test "$PSPELL_INCDIR" != "/usr/include"; then
    
  if test -z "$PSPELL_INCDIR" || echo "$PSPELL_INCDIR" | grep '^/' >/dev/null ; then
    ai_p="$PSPELL_INCDIR"
  else
    
    ep_dir="`echo $PSPELL_INCDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$PSPELL_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

fi





echo $ac_n "checking for readline support""... $ac_c" 1>&6
echo "configure:33672: checking for readline support" >&5
# Check whether --with-readline or --without-readline was given.
if test "${with_readline+set}" = set; then
  withval="$with_readline"
  PHP_READLINE=$withval
else
  PHP_READLINE=no
fi


case "$PHP_READLINE" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_READLINE=`echo $ac_n "$PHP_READLINE$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_READLINE=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_READLINE" = "no" && PHP_READLINE=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_READLINE" != "no"; then
  for i in /usr/local /usr $PHP_READLINE; do
    if test -f $i/include/readline/readline.h; then
      READLINE_DIR=$i
    fi
  done

  if test -z "$READLINE_DIR"; then
    { echo "configure: error: Please reinstall readline - I cannot find readline.h" 1>&2; exit 1; }
  fi
  
  if test "$READLINE_DIR/include" != "/usr/include"; then
    
  if test -z "$READLINE_DIR/include" || echo "$READLINE_DIR/include" | grep '^/' >/dev/null ; then
    ai_p="$READLINE_DIR/include"
  else
    
    ep_dir="`echo $READLINE_DIR/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi


  echo $ac_n "checking for tgetent in -lncurses""... $ac_c" 1>&6
echo "configure:33753: checking for tgetent in -lncurses" >&5
ac_lib_var=`echo ncurses'_'tgetent | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lncurses  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 33761 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:33772: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
    

  if test "$ext_shared" = "yes"; then
    READLINE_SHARED_LIBADD="-lncurses $READLINE_SHARED_LIBADD"
    if test -n ""; then
      
  if test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo |sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "READLINE_SHARED_LIBADD"; then
      READLINE_SHARED_LIBADD="-R -L $READLINE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n ""; then
    
  if test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo |sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R -L $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "ncurses" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lncurses $LIBS"


  ;;
  esac



  fi


else
  echo "$ac_t""no" 1>&6

    echo $ac_n "checking for tgetent in -ltermcap""... $ac_c" 1>&6
echo "configure:33886: checking for tgetent in -ltermcap" >&5
ac_lib_var=`echo termcap'_'tgetent | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltermcap  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 33894 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char tgetent();

int main() {
tgetent()
; return 0; }
EOF
if { (eval echo configure:33905: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
      

  if test "$ext_shared" = "yes"; then
    READLINE_SHARED_LIBADD="-ltermcap $READLINE_SHARED_LIBADD"
    if test -n ""; then
      
  if test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo |sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "READLINE_SHARED_LIBADD"; then
      READLINE_SHARED_LIBADD="-R -L $READLINE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n ""; then
    
  if test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo |sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R -L $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "termcap" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ltermcap $LIBS"


  ;;
  esac



  fi


else
  echo "$ac_t""no" 1>&6
fi

  
fi


  

  if test "$ext_shared" = "yes"; then
    READLINE_SHARED_LIBADD="-lhistory $READLINE_SHARED_LIBADD"
    if test -n "$READLINE_DIR/lib"; then
      
  if test "$READLINE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$READLINE_DIR/lib" || echo "$READLINE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$READLINE_DIR/lib"
  else
    
    ep_dir="`echo $READLINE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "READLINE_SHARED_LIBADD"; then
      READLINE_SHARED_LIBADD="-R$READLINE_DIR/lib -L$READLINE_DIR/lib $READLINE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$READLINE_DIR/lib"; then
    
  if test "$READLINE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$READLINE_DIR/lib" || echo "$READLINE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$READLINE_DIR/lib"
  else
    
    ep_dir="`echo $READLINE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$READLINE_DIR/lib -L$READLINE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "history" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lhistory $LIBS"


  ;;
  esac



  fi


  

  if test "$ext_shared" = "yes"; then
    READLINE_SHARED_LIBADD="-lreadline $READLINE_SHARED_LIBADD"
    if test -n "$READLINE_DIR/lib"; then
      
  if test "$READLINE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$READLINE_DIR/lib" || echo "$READLINE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$READLINE_DIR/lib"
  else
    
    ep_dir="`echo $READLINE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "READLINE_SHARED_LIBADD"; then
      READLINE_SHARED_LIBADD="-R$READLINE_DIR/lib -L$READLINE_DIR/lib $READLINE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$READLINE_DIR/lib"; then
    
  if test "$READLINE_DIR/lib" != "/usr/lib"; then
    
  if test -z "$READLINE_DIR/lib" || echo "$READLINE_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$READLINE_DIR/lib"
  else
    
    ep_dir="`echo $READLINE_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$READLINE_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$READLINE_DIR/lib -L$READLINE_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "readline" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lreadline $LIBS"


  ;;
  esac



  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST READLINE_SHARED_LIBADD"
  


  cat >> confdefs.h <<\EOF
#define HAVE_LIBREADLINE 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS readline"
  
  if test -d "$abs_srcdir/ext/readline"; then
    ext_builddir="ext/readline"
    ext_srcdir="$abs_srcdir/ext/readline"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libreadline.la"
    EXT_STATIC="$EXT_STATIC readline"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_READLINE 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi





echo $ac_n "checking for recode support""... $ac_c" 1>&6
echo "configure:34350: checking for recode support" >&5
# Check whether --with-recode or --without-recode was given.
if test "${with_recode+set}" = set; then
  withval="$with_recode"
  PHP_RECODE=$withval
else
  PHP_RECODE=no
fi


case "$PHP_RECODE" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_RECODE=`echo $ac_n "$PHP_RECODE$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_RECODE=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_RECODE" = "no" && PHP_RECODE=yes
fi

echo "$ac_t""$ext_output" 1>&6




	if test "$PHP_RECODE" != "no"; then
		RECODE_LIST="$PHP_RECODE /usr /usr/local /opt"

		for i in $RECODE_LIST; do
			if test -f $i/include/recode.h; then
				RECODE_DIR=$i
				RECODE_INC=include
				RECODE_LIB=lib
			fi
			if test -f $i/include/recode/recode.h; then
				RECODE_DIR=$i
				RECODE_INC=include/recode
				RECODE_LIB=lib/recode
			fi
			if test -f $i/recode/include/recode.h; then
				RECODE_DIR=$i/recode
				RECODE_INC=include
				RECODE_LIB=lib
			fi
		done
		if test "$RECODE_DIR" = ""; then
			{ echo "configure: error: I cannot find recode.h anywhere below $RECODE_LIST. Is it installed?" 1>&2; exit 1; }
		fi

		old_LDFLAGS="$LDFLAGS"
		old_LIBS="$LIBS"
		LDFLAGS="$LDFLAGS -L$RECODE_DIR/$RECODE_LIB"
		LIBS="$LIBS -lrecode"
		cat > conftest.$ac_ext <<EOF
#line 34421 "configure"
#include "confdefs.h"

char *program_name;

int main() {

recode_format_table();

; return 0; }
EOF
if { (eval echo configure:34432: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
				{ echo "configure: error: I cannot link librecode (-L$RECODE_DIR/$RECODE_LIB -lrecode). Is it installed?" 1>&2; exit 1; }

fi
rm -f conftest*
		LIBS="$old_LIBS"
		LDFLAGS="$old_LDFLAGS"

		if test "$RECODE_LIB" = ""; then
			{ echo "configure: error: Please reinstall recode - I cannot find librecode.a" 1>&2; exit 1; }
		fi

		
  if test "$RECODE_DIR/$RECODE_INC" != "/usr/include"; then
    
  if test -z "$RECODE_DIR/$RECODE_INC" || echo "$RECODE_DIR/$RECODE_INC" | grep '^/' >/dev/null ; then
    ai_p="$RECODE_DIR/$RECODE_INC"
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_INC|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_INC\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

		if test "$ext_shared" = "yes"; then
			

  if test "$ext_shared" = "yes"; then
    RECODE_SHARED_LIBADD="-lrecode $RECODE_SHARED_LIBADD"
    if test -n "$RECODE_DIR/$RECODE_LIB"; then
      
  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
    
  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p="$RECODE_DIR/$RECODE_LIB"
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "RECODE_SHARED_LIBADD"; then
      RECODE_SHARED_LIBADD="-R$RECODE_DIR/$RECODE_LIB -L$RECODE_DIR/$RECODE_LIB $RECODE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$RECODE_DIR/$RECODE_LIB"; then
    
  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
    
  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p="$RECODE_DIR/$RECODE_LIB"
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$RECODE_DIR/$RECODE_LIB -L$RECODE_DIR/$RECODE_LIB $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "recode" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lrecode $LIBS"


  ;;
  esac



  fi


			
  PHP_VAR_SUBST="$PHP_VAR_SUBST RECODE_SHARED_LIBADD"
  

		else
			
  
  if test "$RECODE_DIR/$RECODE_LIB" != "/usr/lib"; then
    
  if test -z "$RECODE_DIR/$RECODE_LIB" || echo "$RECODE_DIR/$RECODE_LIB" | grep '^/' >/dev/null ; then
    ai_p="$RECODE_DIR/$RECODE_LIB"
  else
    
    ep_dir="`echo $RECODE_DIR/$RECODE_LIB|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$RECODE_DIR/$RECODE_LIB\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$RECODE_DIR/$RECODE_LIB -L$RECODE_DIR/$RECODE_LIB $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  
  DLIBS="-lrecode $DLIBS"


		fi

		cat >> confdefs.h <<\EOF
#define HAVE_LIBRECODE 1
EOF


		for ac_hdr in stdbool.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:34626: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 34631 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:34636: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


		
  EXT_SUBDIRS="$EXT_SUBDIRS recode"
  
  if test -d "$abs_srcdir/ext/recode"; then
    ext_builddir="ext/recode"
    ext_srcdir="$abs_srcdir/ext/recode"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/librecode.la"
    EXT_STATIC="$EXT_STATIC recode"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_RECODE 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


	fi




echo $ac_n "checking for mm support""... $ac_c" 1>&6
echo "configure:34792: checking for mm support" >&5
# Check whether --with-mm or --without-mm was given.
if test "${with_mm+set}" = set; then
  withval="$with_mm"
  PHP_MM=$withval
else
  PHP_MM=no
fi


case "$PHP_MM" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MM=`echo $ac_n "$PHP_MM$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_MM=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_MM" = "no" && PHP_MM=yes
fi

echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking whether to enable transparent session id propagation""... $ac_c" 1>&6
echo "configure:34837: checking whether to enable transparent session id propagation" >&5
# Check whether --enable-trans-sid or --disable-trans-sid was given.
if test "${enable_trans_sid+set}" = set; then
  enableval="$enable_trans_sid"
  PHP_TRANS_SID=$enableval
else
  PHP_TRANS_SID=no
fi


case "$PHP_TRANS_SID" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_TRANS_SID=`echo $ac_n "$PHP_TRANS_SID$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_TRANS_SID=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_TRANS_SID" = "no" && PHP_TRANS_SID=yes
fi

echo "$ac_t""$ext_output" 1>&6






echo $ac_n "checking whether to enable session support""... $ac_c" 1>&6
echo "configure:34882: checking whether to enable session support" >&5
# Check whether --enable-session or --disable-session was given.
if test "${enable_session+set}" = set; then
  enableval="$enable_session"
  PHP_SESSION=$enableval
else
  PHP_SESSION=yes
fi


case "$PHP_SESSION" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SESSION=`echo $ac_n "$PHP_SESSION$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SESSION=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_SESSION" = "no" && PHP_SESSION=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_MM" != "no"; then
  for i in /usr/local /usr $PHP_MM; do
    if test -f "$i/include/mm.h"; then
      MM_DIR="$i"
    fi
  done

  if test -z "$MM_DIR" ; then
    { echo "configure: error: cannot find mm library" 1>&2; exit 1; }
  fi
  
  

  if test "$ext_shared" = "yes"; then
    SESSION_SHARED_LIBADD="-lmm $SESSION_SHARED_LIBADD"
    if test -n "$MM_DIR/lib"; then
      
  if test "$MM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MM_DIR/lib" || echo "$MM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$MM_DIR/lib"
  else
    
    ep_dir="`echo $MM_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MM_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "SESSION_SHARED_LIBADD"; then
      SESSION_SHARED_LIBADD="-R$MM_DIR/lib -L$MM_DIR/lib $SESSION_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$MM_DIR/lib"; then
    
  if test "$MM_DIR/lib" != "/usr/lib"; then
    
  if test -z "$MM_DIR/lib" || echo "$MM_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$MM_DIR/lib"
  else
    
    ep_dir="`echo $MM_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MM_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$MM_DIR/lib -L$MM_DIR/lib $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "mm" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lmm $LIBS"


  ;;
  esac



  fi


  
  if test "$MM_DIR/include" != "/usr/include"; then
    
  if test -z "$MM_DIR/include" || echo "$MM_DIR/include" | grep '^/' >/dev/null ; then
    ai_p="$MM_DIR/include"
  else
    
    ep_dir="`echo $MM_DIR/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$MM_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  cat >> confdefs.h <<\EOF
#define HAVE_LIBMM 1
EOF

  
  EXTRA_MODULE_PTRS="$EXTRA_MODULE_PTRS phpext_ps_mm_ptr,"

fi

if test "$PHP_TRANS_SID" = "yes"; then
  cat >> confdefs.h <<\EOF
#define TRANS_SID 1
EOF

fi

if test "$PHP_SESSION" != "no"; then
  
  EXT_SUBDIRS="$EXT_SUBDIRS session"
  
  if test -d "$abs_srcdir/ext/session"; then
    ext_builddir="ext/session"
    ext_srcdir="$abs_srcdir/ext/session"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libsession.la"
    EXT_STATIC="$EXT_STATIC session"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_SESSION 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SESSION_SHARED_LIBADD"
  

fi





echo $ac_n "checking for OpenSSL support in SNMP""... $ac_c" 1>&6
echo "configure:35207: checking for OpenSSL support in SNMP" >&5
# Check whether --with-openssl or --without-openssl was given.
if test "${with_openssl+set}" = set; then
  withval="$with_openssl"
  PHP_OPENSSL=$withval
else
  PHP_OPENSSL=no
fi


case "$PHP_OPENSSL" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_OPENSSL=`echo $ac_n "$PHP_OPENSSL$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_OPENSSL=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_OPENSSL" = "no" && PHP_OPENSSL=yes
fi

echo "$ac_t""$ext_output" 1>&6








echo $ac_n "checking for SNMP support""... $ac_c" 1>&6
echo "configure:35254: checking for SNMP support" >&5
# Check whether --with-snmp or --without-snmp was given.
if test "${with_snmp+set}" = set; then
  withval="$with_snmp"
  PHP_SNMP=$withval
else
  PHP_SNMP=no
fi


case "$PHP_SNMP" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SNMP=`echo $ac_n "$PHP_SNMP$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SNMP=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_SNMP" = "no" && PHP_SNMP=yes
fi

echo "$ac_t""$ext_output" 1>&6




  if test "$PHP_SNMP" != "no"; then
    if test "$PHP_SNMP" = "yes"; then
      SNMP_INCDIR=/usr/local/include
      SNMP_LIBDIR=/usr/local/lib
      test -f /usr/local/include/ucd-snmp/snmp.h && SNMP_INCDIR=/usr/local/include/ucd-snmp
	  test -f /usr/include/ucd-snmp/snmp.h && SNMP_INCDIR=/usr/include/ucd-snmp
	  test -f /usr/include/snmp/snmp.h && SNMP_INCDIR=/usr/include/snmp
	  test -f /usr/include/snmp/include/ucd-snmp/snmp.h && SNMP_INCDIR=/usr/include/snmp/include/ucd-snmp
	  test -f /usr/lib/libsnmp.a && SNMP_LIBDIR=/usr/lib
	  test -f /usr/lib/libsnmp.so && SNMP_LIBDIR=/usr/lib
	  test -f /usr/local/lib/libsnmp.a && SNMP_LIBDIR=/usr/local/lib
	  test -f /usr/local/lib/libsnmp.so && SNMP_LIBDIR=/usr/local/lib
	  test -f /usr/local/snmp/lib/libsnmp.a && SNMP_LIBDIR=/usr/local/snmp/lib
	  test -f /usr/local/snmp/lib/libsnmp.so && SNMP_LIBDIR=/usr/local/snmp/lib
    else
      SNMP_INCDIR=$PHP_SNMP/include
      test -d $PHP_SNMP/include/ucd-snmp && SNMP_INCDIR=$withval/include/ucd-snmp
      SNMP_LIBDIR=$PHP_SNMP/lib
    fi
    cat >> confdefs.h <<\EOF
#define HAVE_SNMP 1
EOF

    
  if test "$SNMP_INCDIR" != "/usr/include"; then
    
  if test -z "$SNMP_INCDIR" || echo "$SNMP_INCDIR" | grep '^/' >/dev/null ; then
    ai_p="$SNMP_INCDIR"
  else
    
    ep_dir="`echo $SNMP_INCDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SNMP_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

    

  if test "$ext_shared" = "yes"; then
    SNMP_SHARED_LIBADD="-lsnmp $SNMP_SHARED_LIBADD"
    if test -n "$SNMP_LIBDIR"; then
      
  if test "$SNMP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$SNMP_LIBDIR"
  else
    
    ep_dir="`echo $SNMP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "SNMP_SHARED_LIBADD"; then
      SNMP_SHARED_LIBADD="-R$SNMP_LIBDIR -L$SNMP_LIBDIR $SNMP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$SNMP_LIBDIR"; then
    
  if test "$SNMP_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SNMP_LIBDIR" || echo "$SNMP_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$SNMP_LIBDIR"
  else
    
    ep_dir="`echo $SNMP_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SNMP_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$SNMP_LIBDIR -L$SNMP_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "snmp" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsnmp $LIBS"


  ;;
  esac



  fi


	old_CPPFLAGS="$CPPFLAGS"
	CPPFLAGS="$INCLUDES $CPPFLAGS"
	for ac_hdr in default_store.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:35446: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 35451 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:35456: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

	if test "$ac_cv_header_default_store_h" = "yes"; then
				if test "$cross_compiling" = yes; then
  
			SNMP_SSL=no
		
else
  cat > conftest.$ac_ext <<EOF
#line 35489 "configure"
#include "confdefs.h"

#include <ucd-snmp-config.h>
main() { exit(USE_OPENSSL != 1); }
		
EOF
if { (eval echo configure:35496: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
			SNMP_SSL=yes
		
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
			SNMP_SSL=no
		
fi
rm -fr conftest*
fi

		if test "$SNMP_SSL" = "yes"; then
			
  for i in /usr/local/ssl /usr/local /usr /usr/local/openssl $PHP_OPENSSL; do
    if test -r $i/include/openssl/evp.h; then
      OPENSSL_DIR=$i
      OPENSSL_INC=$i/include/openssl
    elif test -r $i/include/evp.h; then
      OPENSSL_DIR=$i
      OPENSSL_INC=$i/include
    fi
  done

  if test -z "$OPENSSL_DIR"; then
    { echo "configure: error: Cannot find OpenSSL's <evp.h>" 1>&2; exit 1; }
  fi

  
  if test "$OPENSSL_DIR/lib" != "/usr/lib"; then
    
  if test -z "$OPENSSL_DIR/lib" || echo "$OPENSSL_DIR/lib" | grep '^/' >/dev/null ; then
    ai_p="$OPENSSL_DIR/lib"
  else
    
    ep_dir="`echo $OPENSSL_DIR/lib|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_DIR/lib\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "SNMP_SHARED_LIBADD"; then
      SNMP_SHARED_LIBADD="-R$OPENSSL_DIR/lib -L$OPENSSL_DIR/lib $SNMP_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  
 case "ssl" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -lssl"

   else
     
 case "ssl" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="$LIBS -lssl"


  ;;
  esac

   fi

  ;;
  esac

  
 case "crypto" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  SNMP_SHARED_LIBADD="$SNMP_SHARED_LIBADD -lcrypto"

   else
     
 case "crypto" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="$LIBS -lcrypto"


  ;;
  esac

   fi

  ;;
  esac

  
  if test "$OPENSSL_INC" != "/usr/include"; then
    
  if test -z "$OPENSSL_INC" || echo "$OPENSSL_INC" | grep '^/' >/dev/null ; then
    ai_p="$OPENSSL_INC"
  else
    
    ep_dir="`echo $OPENSSL_INC|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$OPENSSL_INC\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi


		fi
	fi
	CPPFLAGS="$old_CPPFLAGS"
	
  EXT_SUBDIRS="$EXT_SUBDIRS snmp"
  
  if test -d "$abs_srcdir/ext/snmp"; then
    ext_builddir="ext/snmp"
    ext_srcdir="$abs_srcdir/ext/snmp"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libsnmp.la"
    EXT_STATIC="$EXT_STATIC snmp"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_SNMP 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


	
  PHP_VAR_SUBST="$PHP_VAR_SUBST SNMP_SHARED_LIBADD"
  

	echo $ac_n "checking for kstat_read in -lkstat""... $ac_c" 1>&6
echo "configure:35774: checking for kstat_read in -lkstat" >&5
ac_lib_var=`echo kstat'_'kstat_read | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lkstat  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 35782 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char kstat_read();

int main() {
kstat_read()
; return 0; }
EOF
if { (eval echo configure:35793: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
	  
 case "kstat" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="$LIBS -lkstat"


  ;;
  esac

        
else
  echo "$ac_t""no" 1>&6
fi

    SNMP_INCLUDE="-I$SNMP_INCDIR"
  fi

  PHP_VAR_SUBST="$PHP_VAR_SUBST SNMP_LIBDIR"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST SNMP_INCLUDE"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST KSTAT_LIBS"
  


echo $ac_n "checking whether to enable UCD SNMP hack""... $ac_c" 1>&6
echo "configure:35842: checking whether to enable UCD SNMP hack" >&5
# Check whether --enable-ucd-snmp-hack or --disable-ucd-snmp-hack was given.
if test "${enable_ucd_snmp_hack+set}" = set; then
  enableval="$enable_ucd_snmp_hack"
  
  if test "$enableval" = "yes" ; then
    cat >> confdefs.h <<\EOF
#define UCD_SNMP_HACK 1
EOF

    echo "$ac_t""yes" 1>&6
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi









echo $ac_n "checking whether to enable sockets support""... $ac_c" 1>&6
echo "configure:35872: checking whether to enable sockets support" >&5
# Check whether --enable-sockets or --disable-sockets was given.
if test "${enable_sockets+set}" = set; then
  enableval="$enable_sockets"
  PHP_SOCKETS=$enableval
else
  PHP_SOCKETS=no
fi


case "$PHP_SOCKETS" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SOCKETS=`echo $ac_n "$PHP_SOCKETS$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SOCKETS=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_SOCKETS" = "no" && PHP_SOCKETS=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SOCKETS" != "no"; then
        
      
  echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
echo "configure:35918: checking for ANSI C header files" >&5
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 35923 "configure"
#include "confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:35931: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 35948 "configure"
#include "confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > conftest.$ac_ext <<EOF
#line 35966 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf conftest*
  ac_cv_header_stdc=no
fi
rm -f conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
  cat > conftest.$ac_ext <<EOF
#line 35987 "configure"
#include "confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
if { (eval echo configure:35998: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  :
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_header_stdc=no
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi

  for ac_hdr in unistd.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:36025: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 36030 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:36035: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  for ac_hdr in sys/types.h sys/socket.h netdb.h netinet/in.h netinet/tcp.h sys/un.h arpa/inet.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:36065: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 36070 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:36075: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done

  for ac_hdr in sys/time.h errno.h fcntl.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:36105: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 36110 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:36115: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  cat >> confdefs.h <<\EOF
#define HAVE_SOCKETS 1
EOF

    
  EXT_SUBDIRS="$EXT_SUBDIRS sockets"
  
  if test -d "$abs_srcdir/ext/sockets"; then
    ext_builddir="ext/sockets"
    ext_srcdir="$abs_srcdir/ext/sockets"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libsockets.la"
    EXT_STATIC="$EXT_STATIC sockets"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_SOCKETS 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi





echo $ac_n "checking for dlopen""... $ac_c" 1>&6
echo "configure:36276: checking for dlopen" >&5
if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 36281 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dlopen(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dlopen) || defined (__stub___dlopen)
choke me
#else
dlopen();
#endif

; return 0; }
EOF
if { (eval echo configure:36304: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_dlopen=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dlopen=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'dlopen`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_LIBDL 1
EOF

else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for pam_start in -lpam""... $ac_c" 1>&6
echo "configure:36328: checking for pam_start in -lpam" >&5
ac_lib_var=`echo pam'_'pam_start | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpam  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 36336 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char pam_start();

int main() {
pam_start()
; return 0; }
EOF
if { (eval echo configure:36347: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
  EXTRA_LIBS="$EXTRA_LIBS -lpam"
  cat >> confdefs.h <<\EOF
#define HAVE_LIBPAM 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
 

for ac_func in getcwd getwd
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:36376: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 36381 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:36404: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done




  echo $ac_n "checking for standard DES crypt""... $ac_c" 1>&6
echo "configure:36432: checking for standard DES crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_des'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
    ac_cv_crypt_des=yes
  
else
  cat > conftest.$ac_ext <<EOF
#line 36443 "configure"
#include "confdefs.h"

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    exit (strcmp((char *)crypt("rasmuslerdorf","rl"),"rl.3StKT.4T8M"));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:36458: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_crypt_des=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_crypt_des=no
  
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_crypt_des" 1>&6
  if test "$ac_cv_crypt_des" = "yes"; then
    ac_result=1
  else
    ac_result=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_STD_DES_CRYPT $ac_result
EOF


  echo $ac_n "checking for extended DES crypt""... $ac_c" 1>&6
echo "configure:36489: checking for extended DES crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_ext_des'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
    ac_cv_crypt_ext_des=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 36500 "configure"
#include "confdefs.h"

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    exit (strcmp((char *)crypt("rasmuslerdorf","_J9..rasm"),"_J9..rasmBYk8r9AiWNc"));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:36515: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_crypt_ext_des=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_crypt_ext_des=no
  
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_crypt_ext_des" 1>&6
  if test "$ac_cv_crypt_ext_des" = "yes"; then
    ac_result=1
  else
    ac_result=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_EXT_DES_CRYPT $ac_result
EOF


  echo $ac_n "checking for MD5 crypt""... $ac_c" 1>&6
echo "configure:36546: checking for MD5 crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_md5'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
    ac_cv_crypt_md5=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 36557 "configure"
#include "confdefs.h"

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[15], answer[40];

    salt[0]='$'; salt[1]='1'; salt[2]='$'; 
    salt[3]='r'; salt[4]='a'; salt[5]='s';
    salt[6]='m'; salt[7]='u'; salt[8]='s';
    salt[9]='l'; salt[10]='e'; salt[11]='$';
    salt[12]='\0';
    strcpy(answer,salt);
    strcat(answer,"rISCgZzpwk3UhDidwXvin0");
    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:36581: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_crypt_md5=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_crypt_md5=no
  
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_crypt_md5" 1>&6
  if test "$ac_cv_crypt_md5" = "yes"; then
    ac_result=1
  else
    if test "$ac_cv_crypt_des" != "yes"; then
      
  DEBUG_LOG="debug.log"
  cat >debug.log <<X
CONFIGURE:  $CONFIGURE_COMMAND
CC:         $CC
CFLAGS:     $CFLAGS
CPPFLAGS:   $CPPFLAGS
CXX:        $CXX
CXXFLAGS:   $CXXFLAGS
INCLUDES:   $INCLUDES
LDFLAGS:    $LDFLAGS
LIBS:       $LIBS
DLIBS:      $DLIBS
SAPI:       $PHP_SAPI
PHP_RPATHS: $PHP_RPATHS
uname -a:   `uname -a`

X
    cat >conftest.$ac_ext <<X
main()
{
  exit(0);
}
X
    (eval echo \"$ac_link\"; eval $ac_link && ./conftest) >>debug.log 2>&1
    rm -fr conftest*

    fi
    ac_result=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_MD5_CRYPT $ac_result
EOF


  echo $ac_n "checking for Blowfish crypt""... $ac_c" 1>&6
echo "configure:36641: checking for Blowfish crypt" >&5
if eval "test \"`echo '$''{'ac_cv_crypt_blowfish'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
  if test "$cross_compiling" = yes; then
  
    ac_cv_crypt_blowfish=no
  
else
  cat > conftest.$ac_ext <<EOF
#line 36652 "configure"
#include "confdefs.h"

#if HAVE_CRYPT_H
#include <crypt.h>
#endif

main() {
#if HAVE_CRYPT
    char salt[25], answer[70];
    
    salt[0]='$'; salt[1]='2'; salt[2]='a'; salt[3]='$'; salt[4]='0'; salt[5]='7'; salt[6]='$'; salt[7]='\0';
    strcat(salt,"rasmuslerd");
    strcpy(answer,salt);
    strcpy(&answer[16],"O............gl95GkTKn53Of.H4YchXl5PwvvW.5ri");
    exit (strcmp((char *)crypt("rasmuslerdorf",salt),answer));
#else
	exit(0);
#endif
}
EOF
if { (eval echo configure:36673: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
    ac_cv_crypt_blowfish=yes
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
    ac_cv_crypt_blowfish=no
  
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_crypt_blowfish" 1>&6
  if test "$ac_cv_crypt_blowfish" = "yes"; then
    ac_result=1
  else
    ac_result=0
  fi
  cat >> confdefs.h <<EOF
#define PHP_BLOWFISH_CRYPT $ac_result
EOF




# Check whether --with-regex or --without-regex was given.
if test "${with_regex+set}" = set; then
  withval="$with_regex"
  
  REGEX_TYPE=$withval

else
  
  REGEX_TYPE=php

fi

	
# Check whether --with-system-regex or --without-system-regex was given.
if test "${with_system_regex+set}" = set; then
  withval="$with_system_regex"
  
  if test "$withval" = "yes"; then
    REGEX_TYPE=system
  else
    REGEX_TYPE=php
  fi

fi



  EXT_SUBDIRS="$EXT_SUBDIRS standard"
  
  if test -d "$abs_srcdir/ext/standard"; then
    ext_builddir="ext/standard"
    ext_srcdir="$abs_srcdir/ext/standard"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libstandard.la"
    EXT_STATIC="$EXT_STATIC standard"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_STANDARD 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"







echo $ac_n "checking for libswf support""... $ac_c" 1>&6
echo "configure:36860: checking for libswf support" >&5
# Check whether --with-swf or --without-swf was given.
if test "${with_swf+set}" = set; then
  withval="$with_swf"
  PHP_SWF=$withval
else
  PHP_SWF=no
fi


case "$PHP_SWF" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SWF=`echo $ac_n "$PHP_SWF$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SWF=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_SWF" = "no" && PHP_SWF=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SWF" != "no"; then
  if test -r $PHP_SWF/lib/libswf.a; then
    SWF_DIR=$PHP_SWF
  else
    echo $ac_n "checking for libswf in default path""... $ac_c" 1>&6
echo "configure:36907: checking for libswf in default path" >&5
    for i in /usr/local /usr; do
      if test -r $i/lib/libswf.a; then
        SWF_DIR=$i
        echo "$ac_t""found in $i" 1>&6
      fi
    done
  fi

  if test -z "$SWF_DIR"; then
    echo "$ac_t""not found" 1>&6
    { echo "configure: error: Please reinstall the libswf distribution -
   swf.h should be <swf-dir>/include and
   libswf.a should be in <swf-dir>/lib" 1>&2; exit 1; }
  fi

  
  if test "$SWF_DIR/include" != "/usr/include"; then
    
  if test -z "$SWF_DIR/include" || echo "$SWF_DIR/include" | grep '^/' >/dev/null ; then
    ai_p="$SWF_DIR/include"
  else
    
    ep_dir="`echo $SWF_DIR/include|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SWF_DIR/include\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST SWF_SHARED_LIBADD"
  

  

  if test "$ext_shared" = "yes"; then
    SWF_SHARED_LIBADD="-lswf $SWF_SHARED_LIBADD"
    if test -n "$SWF_DIR"; then
      
  if test "$SWF_DIR" != "/usr/lib"; then
    
  if test -z "$SWF_DIR" || echo "$SWF_DIR" | grep '^/' >/dev/null ; then
    ai_p="$SWF_DIR"
  else
    
    ep_dir="`echo $SWF_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SWF_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "SWF_SHARED_LIBADD"; then
      SWF_SHARED_LIBADD="-R$SWF_DIR -L$SWF_DIR $SWF_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$SWF_DIR"; then
    
  if test "$SWF_DIR" != "/usr/lib"; then
    
  if test -z "$SWF_DIR" || echo "$SWF_DIR" | grep '^/' >/dev/null ; then
    ai_p="$SWF_DIR"
  else
    
    ep_dir="`echo $SWF_DIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SWF_DIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$SWF_DIR -L$SWF_DIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "swf" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lswf $LIBS"


  ;;
  esac



  fi


  cat >> confdefs.h <<\EOF
#define HAVE_SWF 1
EOF


  
  EXT_SUBDIRS="$EXT_SUBDIRS swf"
  
  if test -d "$abs_srcdir/ext/swf"; then
    ext_builddir="ext/swf"
    ext_srcdir="$abs_srcdir/ext/swf"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libswf.la"
    EXT_STATIC="$EXT_STATIC swf"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_SWF 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi




echo $ac_n "checking for Sybase support""... $ac_c" 1>&6
echo "configure:37183: checking for Sybase support" >&5
# Check whether --with-sybase or --without-sybase was given.
if test "${with_sybase+set}" = set; then
  withval="$with_sybase"
  PHP_SYBASE=$withval
else
  PHP_SYBASE=no
fi


case "$PHP_SYBASE" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SYBASE=`echo $ac_n "$PHP_SYBASE$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SYBASE=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_SYBASE" = "no" && PHP_SYBASE=yes
fi

echo "$ac_t""$ext_output" 1>&6





if test "$PHP_SYBASE" != "no"; then
  if test "$PHP_SYBASE" = "yes"; then
    SYBASE_INCDIR=/home/sybase/include
    SYBASE_LIBDIR=/home/sybase/lib
  else
    SYBASE_INCDIR=$PHP_SYBASE/include
    SYBASE_LIBDIR=$PHP_SYBASE/lib
  fi
  
  if test "$SYBASE_INCDIR" != "/usr/include"; then
    
  if test -z "$SYBASE_INCDIR" || echo "$SYBASE_INCDIR" | grep '^/' >/dev/null ; then
    ai_p="$SYBASE_INCDIR"
  else
    
    ep_dir="`echo $SYBASE_INCDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  

  if test "$ext_shared" = "yes"; then
    SYBASE_SHARED_LIBADD="-lsybdb $SYBASE_SHARED_LIBADD"
    if test -n "$SYBASE_LIBDIR"; then
      
  if test "$SYBASE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SYBASE_LIBDIR" || echo "$SYBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$SYBASE_LIBDIR"
  else
    
    ep_dir="`echo $SYBASE_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "SYBASE_SHARED_LIBADD"; then
      SYBASE_SHARED_LIBADD="-R$SYBASE_LIBDIR -L$SYBASE_LIBDIR $SYBASE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$SYBASE_LIBDIR"; then
    
  if test "$SYBASE_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SYBASE_LIBDIR" || echo "$SYBASE_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$SYBASE_LIBDIR"
  else
    
    ep_dir="`echo $SYBASE_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$SYBASE_LIBDIR -L$SYBASE_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "sybdb" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsybdb $LIBS"


  ;;
  esac



  fi


  
  EXT_SUBDIRS="$EXT_SUBDIRS sybase"
  
  if test -d "$abs_srcdir/ext/sybase"; then
    ext_builddir="ext/sybase"
    ext_srcdir="$abs_srcdir/ext/sybase"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libsybase.la"
    EXT_STATIC="$EXT_STATIC sybase"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_SYBASE 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  echo $ac_n "checking for dnet_addr in -ldnet_stub""... $ac_c" 1>&6
echo "configure:37479: checking for dnet_addr in -ldnet_stub" >&5
ac_lib_var=`echo dnet_stub'_'dnet_addr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldnet_stub  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 37487 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dnet_addr();

int main() {
dnet_addr()
; return 0; }
EOF
if { (eval echo configure:37498: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   

  if test "$ext_shared" = "yes"; then
    SYBASE_SHARED_LIBADD="-ldnet_stub $SYBASE_SHARED_LIBADD"
    if test -n ""; then
      
  if test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo |sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "SYBASE_SHARED_LIBADD"; then
      SYBASE_SHARED_LIBADD="-R -L $SYBASE_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n ""; then
    
  if test "" != "/usr/lib"; then
    
  if test -z "" || echo "" | grep '^/' >/dev/null ; then
    ai_p=""
  else
    
    ep_dir="`echo |sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R -L $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "dnet_stub" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ldnet_stub $LIBS"


  ;;
  esac



  fi


        cat >> confdefs.h <<\EOF
#define HAVE_LIBDNET_STUB 1
EOF

     
else
  echo "$ac_t""no" 1>&6
fi

  cat >> confdefs.h <<\EOF
#define HAVE_SYBASE 1
EOF

fi


echo $ac_n "checking for Sybase-CT support""... $ac_c" 1>&6
echo "configure:37624: checking for Sybase-CT support" >&5
# Check whether --with-sybase-ct or --without-sybase-ct was given.
if test "${with_sybase_ct+set}" = set; then
  withval="$with_sybase_ct"
  
  if test "$withval" != "no"; then
    echo "$ac_t""yes" 1>&6
    if test -z "$SYBASE_LIBS"; then
      
  EXT_SUBDIRS="$EXT_SUBDIRS sybase_ct"
  
  if test -d "$abs_srcdir/ext/sybase_ct"; then
    ext_builddir="ext/sybase_ct"
    ext_srcdir="$abs_srcdir/ext/sybase_ct"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libsybase_ct.la"
    EXT_STATIC="$EXT_STATIC sybase_ct"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_SYBASE_CT 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


    fi
    cat >> confdefs.h <<\EOF
#define HAVE_SYBASE_CT 1
EOF

    if test "$withval" = "yes"; then
      SYBASE_CT_INCDIR=/home/sybase/include
      SYBASE_CT_LIBDIR=/home/sybase/lib
    else
      SYBASE_CT_INCDIR=$withval/include
      SYBASE_CT_LIBDIR=$withval/lib
    fi
	
  if test "$SYBASE_CT_INCDIR" != "/usr/include"; then
    
  if test -z "$SYBASE_CT_INCDIR" || echo "$SYBASE_CT_INCDIR" | grep '^/' >/dev/null ; then
    ai_p="$SYBASE_CT_INCDIR"
  else
    
    ep_dir="`echo $SYBASE_CT_INCDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_CT_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

	
  if test "$SYBASE_CT_LIBDIR" != "/usr/lib"; then
    
  if test -z "$SYBASE_CT_LIBDIR" || echo "$SYBASE_CT_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$SYBASE_CT_LIBDIR"
  else
    
    ep_dir="`echo $SYBASE_CT_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$SYBASE_CT_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$SYBASE_CT_LIBDIR -L$SYBASE_CT_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

	
 case "cs" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcs $LIBS"


  ;;
  esac

	
 case "ct" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lct $LIBS"


  ;;
  esac

	
 case "comn" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lcomn $LIBS"


  ;;
  esac

	
 case "intl" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lintl $LIBS"


  ;;
  esac

	SYBASE_CT_LIBS="-lcs -lct -lcomn -lintl"
    old_LDFLAGS=$LDFLAGS
    LDFLAGS="$LDFLAGS -L$SYBASE_CT_LIBDIR"
    echo $ac_n "checking for netg_errstr in -ltcl""... $ac_c" 1>&6
echo "configure:37879: checking for netg_errstr in -ltcl" >&5
ac_lib_var=`echo tcl'_'netg_errstr | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltcl  $SYBASE_CT_LIBS  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 37887 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char netg_errstr();

int main() {
netg_errstr()
; return 0; }
EOF
if { (eval echo configure:37898: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   
 case "tcl" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-ltcl $LIBS"


  ;;
  esac
 
else
  echo "$ac_t""no" 1>&6
 
 case "sybtcl" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lsybtcl $LIBS"


  ;;
  esac
 
fi

    echo $ac_n "checking for insck__getVdate in -linsck""... $ac_c" 1>&6
echo "configure:37942: checking for insck__getVdate in -linsck" >&5
ac_lib_var=`echo insck'_'insck__getVdate | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-linsck  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 37950 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char insck__getVdate();

int main() {
insck__getVdate()
; return 0; }
EOF
if { (eval echo configure:37961: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   
 case "insck" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-linsck $LIBS"


  ;;
  esac
 
else
  echo "$ac_t""no" 1>&6
fi

    echo $ac_n "checking for bsd_tcp in -linsck""... $ac_c" 1>&6
echo "configure:37993: checking for bsd_tcp in -linsck" >&5
ac_lib_var=`echo insck'_'bsd_tcp | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-linsck  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 38001 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char bsd_tcp();

int main() {
bsd_tcp()
; return 0; }
EOF
if { (eval echo configure:38012: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   
 case "insck" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-linsck $LIBS"


  ;;
  esac
 
else
  echo "$ac_t""no" 1>&6
fi

      LDFLAGS=$old_LDFLAGS
  else
    echo "$ac_t""no" 1>&6
  fi

else
  
  echo "$ac_t""no" 1>&6

fi





echo $ac_n "checking whether to enable System V semaphore support""... $ac_c" 1>&6
echo "configure:38059: checking whether to enable System V semaphore support" >&5
# Check whether --enable-sysvsem or --disable-sysvsem was given.
if test "${enable_sysvsem+set}" = set; then
  enableval="$enable_sysvsem"
  PHP_SYSVSEM=$enableval
else
  PHP_SYSVSEM=no
fi


case "$PHP_SYSVSEM" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SYSVSEM=`echo $ac_n "$PHP_SYSVSEM$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SYSVSEM=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_SYSVSEM" = "no" && PHP_SYSVSEM=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SYSVSEM" != "no"; then
 
  EXT_SUBDIRS="$EXT_SUBDIRS sysvsem"
  
  if test -d "$abs_srcdir/ext/sysvsem"; then
    ext_builddir="ext/sysvsem"
    ext_srcdir="$abs_srcdir/ext/sysvsem"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libsysvsem.la"
    EXT_STATIC="$EXT_STATIC sysvsem"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_SYSVSEM 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


 cat >> confdefs.h <<\EOF
#define HAVE_SYSVSEM 1
EOF

 echo $ac_n "checking for union semun""... $ac_c" 1>&6
echo "configure:38230: checking for union semun" >&5
if eval "test \"`echo '$''{'php_cv_semun'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 38235 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/sem.h>
   
int main() {
union semun x;
; return 0; }
EOF
if { (eval echo configure:38246: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
     php_cv_semun=yes
   
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
     php_cv_semun=no
   
fi
rm -f conftest*
 
fi

echo "$ac_t""$php_cv_semun" 1>&6
 if test "$php_cv_semun" = "yes"; then
   cat >> confdefs.h <<\EOF
#define HAVE_SEMUN 1
EOF

 else
   cat >> confdefs.h <<\EOF
#define HAVE_SEMUN 0
EOF

 fi
fi




echo $ac_n "checking whether to enable System V shared memory support""... $ac_c" 1>&6
echo "configure:38281: checking whether to enable System V shared memory support" >&5
# Check whether --enable-sysvshm or --disable-sysvshm was given.
if test "${enable_sysvshm+set}" = set; then
  enableval="$enable_sysvshm"
  PHP_SYSVSHM=$enableval
else
  PHP_SYSVSHM=no
fi


case "$PHP_SYSVSHM" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SYSVSHM=`echo $ac_n "$PHP_SYSVSHM$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_SYSVSHM=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_SYSVSHM" = "no" && PHP_SYSVSHM=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_SYSVSHM" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_SYSVSHM 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS sysvshm"
  
  if test -d "$abs_srcdir/ext/sysvshm"; then
    ext_builddir="ext/sysvshm"
    ext_srcdir="$abs_srcdir/ext/sysvshm"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libsysvshm.la"
    EXT_STATIC="$EXT_STATIC sysvshm"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_SYSVSHM 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi




echo $ac_n "checking whether to enable WDDX support""... $ac_c" 1>&6
echo "configure:38457: checking whether to enable WDDX support" >&5
# Check whether --enable-wddx or --disable-wddx was given.
if test "${enable_wddx+set}" = set; then
  enableval="$enable_wddx"
  PHP_WDDX=$enableval
else
  PHP_WDDX=no
fi


case "$PHP_WDDX" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_WDDX=`echo $ac_n "$PHP_WDDX$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_WDDX=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_WDDX" = "no" && PHP_WDDX=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_WDDX" = "yes"; then
  if test "$enable_xml" = "no"; then
    echo "configure: warning: Activating XML" 1>&2
    enable_xml=yes
  fi
  cat >> confdefs.h <<\EOF
#define HAVE_WDDX 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS wddx"
  
  if test -d "$abs_srcdir/ext/wddx"; then
    ext_builddir="ext/wddx"
    ext_srcdir="$abs_srcdir/ext/wddx"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "" != "shared" && test "" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libwddx.la"
    EXT_STATIC="$EXT_STATIC wddx"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_WDDX 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


fi

# $Source: /repository/php4/ext/xml/config.m4,v $
# $Id: config.m4,v 1.22 2000/05/01 02:42:27 sas Exp $

# Check whether --with-xml or --without-xml was given.
if test "${with_xml+set}" = set; then
  withval="$with_xml"
  enable_xml=$withval
fi


echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
echo "configure:38644: checking whether byte ordering is bigendian" >&5
if eval "test \"`echo '$''{'ac_cv_c_bigendian'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_cv_c_bigendian=unknown
# See if sys/param.h defines the BYTE_ORDER macro.
cat > conftest.$ac_ext <<EOF
#line 38651 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() {

#if !BYTE_ORDER || !BIG_ENDIAN || !LITTLE_ENDIAN
 bogus endian macros
#endif
; return 0; }
EOF
if { (eval echo configure:38662: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  # It does; now see whether it defined to BIG_ENDIAN or not.
cat > conftest.$ac_ext <<EOF
#line 38666 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() {

#if BYTE_ORDER != BIG_ENDIAN
 not big endian
#endif
; return 0; }
EOF
if { (eval echo configure:38677: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_bigendian=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_c_bigendian=no
fi
rm -f conftest*
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
if test $ac_cv_c_bigendian = unknown; then
if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
  cat > conftest.$ac_ext <<EOF
#line 38697 "configure"
#include "confdefs.h"
main () {
  /* Are we little or big endian?  From Harbison&Steele.  */
  union
  {
    long l;
    char c[sizeof (long)];
  } u;
  u.l = 1;
  exit (u.c[sizeof (long) - 1] == 1);
}
EOF
if { (eval echo configure:38710: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_bigendian=no
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_bigendian=yes
fi
rm -fr conftest*
fi

fi
fi

echo "$ac_t""$ac_cv_c_bigendian" 1>&6
if test $ac_cv_c_bigendian = yes; then
  cat >> confdefs.h <<\EOF
#define WORDS_BIGENDIAN 1
EOF

fi


if test "$ac_cv_c_bigendian" = "yes"; then
  order=21
else
  order=12
fi



echo $ac_n "checking for XML support""... $ac_c" 1>&6
echo "configure:38743: checking for XML support" >&5
# Check whether --enable-xml or --disable-xml was given.
if test "${enable_xml+set}" = set; then
  enableval="$enable_xml"
  PHP_XML=$enableval
else
  PHP_XML=yes
fi


case "$PHP_XML" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_XML=`echo $ac_n "$PHP_XML$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_XML=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_XML" = "no" && PHP_XML=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_XML" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_LIBEXPAT 1
EOF

  CPPFLAGS="$CPPFLAGS -DXML_BYTE_ORDER=$order"
  
  EXT_SUBDIRS="$EXT_SUBDIRS xml"
  
  if test -d "$abs_srcdir/ext/xml"; then
    ext_builddir="ext/xml"
    ext_srcdir="$abs_srcdir/ext/xml"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libxml.la"
    EXT_STATIC="$EXT_STATIC xml"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_XML 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  
  lib_makefile="$ext_builddir/expat/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir/expat
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
    lib_build_shared=yes
    if test -n "yes"; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

  
  lib_makefile="$ext_builddir/expat/xmlparse/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir/expat/xmlparse
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
    lib_build_shared=yes
    if test -n "yes"; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

  
  lib_makefile="$ext_builddir/expat/xmltok/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir/expat/xmltok
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "$ext_shared" = "shared" || test "$ext_shared" = "yes"; then
    lib_build_shared=yes
    if test -n "yes"; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

  
  if test "$ext_srcdir/expat/xmltok" != "/usr/include"; then
    
  if test -z "$ext_srcdir/expat/xmltok" || echo "$ext_srcdir/expat/xmltok" | grep '^/' >/dev/null ; then
    ai_p="$ext_srcdir/expat/xmltok"
  else
    
    ep_dir="`echo $ext_srcdir/expat/xmltok|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ext_srcdir/expat/xmltok\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  
  if test "$ext_srcdir/expat/xmlparse" != "/usr/include"; then
    
  if test -z "$ext_srcdir/expat/xmlparse" || echo "$ext_srcdir/expat/xmlparse" | grep '^/' >/dev/null ; then
    ai_p="$ext_srcdir/expat/xmlparse"
  else
    
    ep_dir="`echo $ext_srcdir/expat/xmlparse|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ext_srcdir/expat/xmlparse\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/expat/Makefile $ext_builddir/expat/xmlparse/Makefile $ext_builddir/expat/xmltok/Makefile"

fi




echo $ac_n "checking for YAZ support""... $ac_c" 1>&6
echo "configure:39124: checking for YAZ support" >&5
# Check whether --with-yaz or --without-yaz was given.
if test "${with_yaz+set}" = set; then
  withval="$with_yaz"
  PHP_YAZ=$withval
else
  PHP_YAZ=no
fi


case "$PHP_YAZ" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_YAZ=`echo $ac_n "$PHP_YAZ$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_YAZ=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_YAZ" = "no" && PHP_YAZ=yes
fi

echo "$ac_t""$ext_output" 1>&6





if test "$PHP_YAZ" != "no"; then
  yazconfig=NONE
  if test "$PHP_YAZ" = "yes"; then
    # Extract the first word of "yaz-config", so it can be a program name with args.
set dummy yaz-config; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:39173: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_path_yazconfig'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  case "$yazconfig" in
  /*)
  ac_cv_path_yazconfig="$yazconfig" # Let the user override the test with a path.
  ;;
  ?:/*)			 
  ac_cv_path_yazconfig="$yazconfig" # Let the user override the test with a dos path.
  ;;
  *)
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do 
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_path_yazconfig="$ac_dir/$ac_word"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_yazconfig" && ac_cv_path_yazconfig="NONE"
  ;;
esac
fi
yazconfig="$ac_cv_path_yazconfig"
if test -n "$yazconfig"; then
  echo "$ac_t""$yazconfig" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  else
    if test -r ${PHP_YAZ}/yaz-config; then
      yazconfig=${PHP_YAZ}/yaz-config
    else
      yazconfig=${PHP_YAZ}/bin/yaz-config
    fi
  fi

  if test -f $yazconfig; then
    cat >> confdefs.h <<\EOF
#define HAVE_YAZ 1
EOF

    . $yazconfig
    
  for ac_i in $YAZLIB; do
    case "$ac_i" in
    -l*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
 case "$ac_ii" in
 c|c_r|pthread*) ;;
 *)

   if test "$ext_shared" = "yes"; then
     
  YAZ_SHARED_LIBADD="-l$ac_ii $YAZ_SHARED_LIBADD"

   else
     
 case "$ac_ii" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-l$ac_ii $LIBS"


  ;;
  esac

   fi

  ;;
  esac

    ;;
    -L*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/lib"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p="$ac_ii"
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "YAZ_SHARED_LIBADD"; then
      YAZ_SHARED_LIBADD="-R$ac_ii -L$ac_ii $YAZ_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    ;;
    esac
  done

    
  for ac_i in $YAZINC; do
    case "$ac_i" in
    -I*)
      ac_ii=`echo $ac_i|cut -c 3-`
      
  if test "$ac_ii" != "/usr/include"; then
    
  if test -z "$ac_ii" || echo "$ac_ii" | grep '^/' >/dev/null ; then
    ai_p="$ac_ii"
  else
    
    ep_dir="`echo $ac_ii|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ac_ii\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

    ;;
    esac
  done

    
  PHP_VAR_SUBST="$PHP_VAR_SUBST YAZ_SHARED_LIBADD"
  

    
  EXT_SUBDIRS="$EXT_SUBDIRS yaz"
  
  if test -d "$abs_srcdir/ext/yaz"; then
    ext_builddir="ext/yaz"
    ext_srcdir="$abs_srcdir/ext/yaz"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libyaz.la"
    EXT_STATIC="$EXT_STATIC yaz"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_YAZ 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  fi
fi




echo $ac_n "checking whether to include YP support""... $ac_c" 1>&6
echo "configure:39462: checking whether to include YP support" >&5
# Check whether --enable-yp or --disable-yp was given.
if test "${enable_yp+set}" = set; then
  enableval="$enable_yp"
  PHP_YP=$enableval
else
  PHP_YP=no
fi


case "$PHP_YP" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_YP=`echo $ac_n "$PHP_YP$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_YP=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_YP" = "no" && PHP_YP=yes
fi

echo "$ac_t""$ext_output" 1>&6




if test "$PHP_YP" != "no"; then
  cat >> confdefs.h <<\EOF
#define HAVE_YP 1
EOF

  
  EXT_SUBDIRS="$EXT_SUBDIRS yp"
  
  if test -d "$abs_srcdir/ext/yp"; then
    ext_builddir="ext/yp"
    ext_srcdir="$abs_srcdir/ext/yp"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libyp.la"
    EXT_STATIC="$EXT_STATIC yp"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_YP 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  case "$host_alias" in
  *solaris*)
    cat >> confdefs.h <<\EOF
#define SOLARIS_YP 1
EOF
 ;;
  esac
fi






echo $ac_n "checking whether to include zlib support""... $ac_c" 1>&6
echo "configure:39647: checking whether to include zlib support" >&5
# Check whether --with-zlib or --without-zlib was given.
if test "${with_zlib+set}" = set; then
  withval="$with_zlib"
  PHP_ZLIB=$withval
else
  PHP_ZLIB=no
fi


case "$PHP_ZLIB" in
shared,*)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_ZLIB=`echo $ac_n "$PHP_ZLIB$ac_c"|sed s/^shared,//`
  ;;
shared)
  ext_output="yes, shared"
  ext_shared=yes
  PHP_ZLIB=yes
  ;;
no)
  ext_output="no"
  ext_shared=no
  ;;
*)
  ext_output="yes"
  ext_shared=no
  ;;
esac

if test "$php_always_shared" = "yes"; then
  ext_output="yes, shared"
  ext_shared=yes
  test "$PHP_ZLIB" = "no" && PHP_ZLIB=yes
fi

echo "$ac_t""$ext_output" 1>&6






if test "$PHP_ZLIB" != "no"; then
  
  EXT_SUBDIRS="$EXT_SUBDIRS zlib"
  
  if test -d "$abs_srcdir/ext/zlib"; then
    ext_builddir="ext/zlib"
    ext_srcdir="$abs_srcdir/ext/zlib"
  else
    ext_builddir="."
    ext_srcdir="$abs_srcdir"
  fi

  if test "$ext_shared" != "shared" && test "$ext_shared" != "yes"; then
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "" = "shared" || test "" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    EXT_LTLIBS="$EXT_LTLIBS $ext_builddir/libzlib.la"
    EXT_STATIC="$EXT_STATIC zlib"
  else 
    
  lib_makefile="$ext_builddir/libs.mk"
  lib_target=""
  
  $php_shtool mkdir -p $ext_builddir
  cat >$lib_makefile<<EOF
LTLIBRARY_OBJECTS = \$(LTLIBRARY_SOURCES:.c=.lo) \$(LTLIBRARY_OBJECTS_X)
LTLIBRARY_SHARED_OBJECTS = \$(LTLIBRARY_OBJECTS:.lo=.slo)
EOF

  if test "yes" = "shared" || test "yes" = "yes"; then
    lib_build_shared=yes
    if test -n ""; then
      
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)

EOF

    else
      
  lib_target="\$(LTLIBRARY_SHARED_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_SHARED_NAME): \$(LTLIBRARY_SHARED_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(SHARED_LIBTOOL) --mode=link \$(COMPILE) \$(LDFLAGS) -o \$@ -avoid-version -module -rpath \$(phplibdir) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_SHARED_LIBADD)
	\$(SHARED_LIBTOOL) --mode=install cp \$@ \$(phplibdir)

EOF

    fi
  else
    
  lib_target="\$(LTLIBRARY_NAME)"
  cat >>$lib_makefile<<EOF
\$(LTLIBRARY_NAME): \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_DEPENDENCIES)
	\$(LINK) \$(LTLIBRARY_LDFLAGS) \$(LTLIBRARY_OBJECTS) \$(LTLIBRARY_LIBADD)

EOF

  fi

  if test -n "$lib_target"; then
    cat >>$lib_makefile<<EOF
targets = $lib_target
EOF
  fi

    cat >> confdefs.h <<EOF
#define COMPILE_DL_ZLIB 1
EOF

  fi

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES $ext_builddir/Makefile"


  for i in /usr/local /usr $PHP_ZLIB; do
    if test -f $i/include/zlib/zlib.h; then
      ZLIB_DIR=$i
      ZLIB_INCDIR=$i/include/zlib
    elif test -f $i/include/zlib.h; then
      ZLIB_DIR=$i
      ZLIB_INCDIR=$i/include
    fi
  done

  if test -z "$ZLIB_DIR"; then
    { echo "configure: error: Cannot find libz" 1>&2; exit 1; }
  fi

  ZLIB_LIBDIR=$ZLIB_DIR/lib

  
  old_LDFLAGS="$LDFLAGS"
  LDFLAGS="-L$ZLIB_LIBDIR $LDFLAGS"
  
  echo $ac_n "checking for gzgets in -lz""... $ac_c" 1>&6
echo "configure:39836: checking for gzgets in -lz" >&5
ac_lib_var=`echo z'_'gzgets | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lz  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 39844 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gzgets();

int main() {
gzgets()
; return 0; }
EOF
if { (eval echo configure:39855: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_ZLIB 1
EOF

else
  echo "$ac_t""no" 1>&6
{ echo "configure: error: Zlib module requires zlib >= 1.0.9." 1>&2; exit 1; }
fi

  
  LDFLAGS="$old_LDFLAGS"


  
  PHP_VAR_SUBST="$PHP_VAR_SUBST ZLIB_SHARED_LIBADD"
  

  

  if test "$ext_shared" = "yes"; then
    ZLIB_SHARED_LIBADD="-lz $ZLIB_SHARED_LIBADD"
    if test -n "$ZLIB_LIBDIR"; then
      
  if test "$ZLIB_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ZLIB_LIBDIR" || echo "$ZLIB_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$ZLIB_LIBDIR"
  else
    
    ep_dir="`echo $ZLIB_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZLIB_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n "ZLIB_SHARED_LIBADD"; then
      ZLIB_SHARED_LIBADD="-R$ZLIB_LIBDIR -L$ZLIB_LIBDIR $ZLIB_SHARED_LIBADD"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

    fi
  else
    

  if test -n "$ZLIB_LIBDIR"; then
    
  if test "$ZLIB_LIBDIR" != "/usr/lib"; then
    
  if test -z "$ZLIB_LIBDIR" || echo "$ZLIB_LIBDIR" | grep '^/' >/dev/null ; then
    ai_p="$ZLIB_LIBDIR"
  else
    
    ep_dir="`echo $ZLIB_LIBDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZLIB_LIBDIR\"`"
  fi

    if test "$ext_shared" = "yes" && test -n ""; then
      ="-R$ZLIB_LIBDIR -L$ZLIB_LIBDIR $"
    else
      
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$LIBPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "LIBPATH$unique=set"
    
        test -n "$ld_runpath_switch" && LDFLAGS="$LDFLAGS $ld_runpath_switch$ai_p"
        LDFLAGS="$LDFLAGS -L$ai_p"
        PHP_RPATHS="$PHP_RPATHS $ai_p"
      
  fi

    fi
  fi

  fi
  
 case "z" in
 c|c_r|pthread*) ;;
 *)

   
  LIBS="-lz $LIBS"


  ;;
  esac



  fi


  
  
  if test "$ZLIB_INCDIR" != "/usr/include"; then
    
  if test -z "$ZLIB_INCDIR" || echo "$ZLIB_INCDIR" | grep '^/' >/dev/null ; then
    ai_p="$ZLIB_INCDIR"
  else
    
    ep_dir="`echo $ZLIB_INCDIR|sed 's%/*[^/][^/]*$%%'`"
    
    ep_realdir="`(cd \"$ep_dir\" && pwd)`"
    ai_p="$ep_realdir/`basename \"$ZLIB_INCDIR\"`"
  fi

    
  
  unique=`echo $ai_p|sed 's/[^a-zA-Z0-9]/_/g'`
  
  cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
  if test -n "$unique" && test "`eval $cmd`" = "" ; then
    eval "INCLUDEPATH$unique=set"
    
      INCLUDES="$INCLUDES -I$ai_p"
    
  fi

  fi

fi




  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES sapi/$PHP_SAPI/Makefile"


echo $ac_n "checking whether to enable versioning""... $ac_c" 1>&6
echo "configure:40018: checking whether to enable versioning" >&5
# Check whether --enable-versioning or --disable-versioning was given.
if test "${enable_versioning+set}" = set; then
  enableval="$enable_versioning"
  
  PHP_VERSIONING=$enableval

else
  
  PHP_VERSIONING=no

fi

echo "$ac_t""$PHP_VERSIONING" 1>&6

if test "$PHP_VERSIONING" = "yes"; then
  test -z "$PHP_SYM_FILE" && PHP_SYM_FILE="$abs_srcdir/sapi/$PHP_SAPI/php.sym"
  if test -f "$PHP_SYM_FILE"; then
    EXTRA_LDFLAGS="-export-symbols $PHP_SYM_FILE"
  fi
fi



enable_shared=yes
enable_static=yes

case "$php_build_target" in
program)
    enable_shared=no
;;
shared)
    enable_static=no
    EXTRA_LDFLAGS="$EXTRA_LDFLAGS -avoid-version"
;;
static)
    enable_shared=no
;;
esac

if test "$PHP_SAPI" = "cgi"; then
  PHP_PROGRAM=php
fi



if test "$REGEX_TYPE" = "php"; then
  REGEX_LIB=regex/libregex.la
  REGEX_DIR=regex
  cat >> confdefs.h <<\EOF
#define HSREGEX 1
EOF

  cat >> confdefs.h <<\EOF
#define REGEX 1
EOF

  
  PHP_FAST_OUTPUT_FILES="$PHP_FAST_OUTPUT_FILES regex/Makefile"

elif test "$REGEX_TYPE" = "system"; then
  cat >> confdefs.h <<\EOF
#define REGEX 0
EOF

fi

echo $ac_n "checking which regex library to use""... $ac_c" 1>&6
echo "configure:40086: checking which regex library to use" >&5
echo "$ac_t""$REGEX_TYPE" 1>&6


  PHP_VAR_SUBST="$PHP_VAR_SUBST REGEX_DIR"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST REGEX_LIB"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST HSREGEX"
  




  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring Zend${T_ME}" 1>&6











if test "$YACC" != "bison -y"; then
    echo "configure: warning: You will need bison if you want to regenerate the Zend parser." 1>&2
else
    echo $ac_n "checking bison version""... $ac_c" 1>&6
echo "configure:40121: checking bison version" >&5
    set `bison --version| sed -e 's/^GNU Bison version //' -e 's/\./ /'`
    if test "${1}" = "1" -a "${2}" -lt "25"; then
        echo "configure: warning: You will need bison 1.25 if you want to regenerate the Zend parser (found ${1}.${2})." 1>&2
    fi
    echo "$ac_t""${1}.${2} (ok)" 1>&6
fi



if test "$CC" = "gcc" -a "$ac_cv_prog_cc_g" = "yes" -a \
   "`uname -sv`" = "AIX 4"; then
	CFLAGS=`echo $CFLAGS | sed -e 's/-g//'`
fi

if test "$ac_cv_prog_gcc" = "yes" -a "`uname -s`" = "Rhapsody"; then
        CPPFLAGS="$CPPFLAGS -traditional-cpp"
fi

for ac_hdr in limits.h \
malloc.h \
string.h \
unistd.h \
stdarg.h \
sys/types.h \
signal.h \
unix.h \
dlfcn.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:40152: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40157 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:40162: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking for size_t""... $ac_c" 1>&6
echo "configure:40190: checking for size_t" >&5
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40195 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])size_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_size_t=yes
else
  rm -rf conftest*
  ac_cv_type_size_t=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
echo "configure:40223: checking return type of signal handlers" >&5
if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40228 "configure"
#include "confdefs.h"
#include <sys/types.h>
#include <signal.h>
#ifdef signal
#undef signal
#endif
#ifdef __cplusplus
extern "C" void (*signal (int, void (*)(int)))(int);
#else
void (*signal ()) ();
#endif

int main() {
int i;
; return 0; }
EOF
if { (eval echo configure:40245: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_type_signal=void
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_type_signal=int
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_type_signal" 1>&6
cat >> confdefs.h <<EOF
#define RETSIGTYPE $ac_cv_type_signal
EOF



echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
echo "configure:40265: checking for dlopen in -ldl" >&5
ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldl  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 40273 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:40284: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  LIBS="-ldl $LIBS"
else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for dlopen""... $ac_c" 1>&6
echo "configure:40305: checking for dlopen" >&5
if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40310 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char dlopen(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_dlopen) || defined (__stub___dlopen)
choke me
#else
dlopen();
#endif

; return 0; }
EOF
if { (eval echo configure:40333: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_dlopen=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_dlopen=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'dlopen`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_LIBDL 1
EOF

else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for uint""... $ac_c" 1>&6
echo "configure:40357: checking for uint" >&5
if eval "test \"`echo '$''{'ac_cv_type_uint'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40362 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])uint[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_uint=yes
else
  rm -rf conftest*
  ac_cv_type_uint=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_uint" 1>&6
if test $ac_cv_type_uint = no; then
  cat >> confdefs.h <<\EOF
#define uint unsigned int 
EOF

fi

echo $ac_n "checking for ulong""... $ac_c" 1>&6
echo "configure:40390: checking for ulong" >&5
if eval "test \"`echo '$''{'ac_cv_type_ulong'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40395 "configure"
#include "confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#include <stddef.h>
#endif
EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "(^|[^a-zA-Z_0-9])ulong[^a-zA-Z_0-9]" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_type_ulong=yes
else
  rm -rf conftest*
  ac_cv_type_ulong=no
fi
rm -f conftest*

fi
echo "$ac_t""$ac_cv_type_ulong" 1>&6
if test $ac_cv_type_ulong = no; then
  cat >> confdefs.h <<\EOF
#define ulong unsigned long 
EOF

fi



echo $ac_n "checking for vprintf""... $ac_c" 1>&6
echo "configure:40425: checking for vprintf" >&5
if eval "test \"`echo '$''{'ac_cv_func_vprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40430 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char vprintf(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char vprintf();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_vprintf) || defined (__stub___vprintf)
choke me
#else
vprintf();
#endif

; return 0; }
EOF
if { (eval echo configure:40453: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_vprintf=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_vprintf=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'vprintf`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_VPRINTF 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

if test "$ac_cv_func_vprintf" != yes; then
echo $ac_n "checking for _doprnt""... $ac_c" 1>&6
echo "configure:40477: checking for _doprnt" >&5
if eval "test \"`echo '$''{'ac_cv_func__doprnt'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40482 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char _doprnt(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char _doprnt();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub__doprnt) || defined (__stub____doprnt)
choke me
#else
_doprnt();
#endif

; return 0; }
EOF
if { (eval echo configure:40505: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func__doprnt=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func__doprnt=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'_doprnt`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<\EOF
#define HAVE_DOPRNT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

fi

echo $ac_n "checking for 8-bit clean memcmp""... $ac_c" 1>&6
echo "configure:40530: checking for 8-bit clean memcmp" >&5
if eval "test \"`echo '$''{'ac_cv_func_memcmp_clean'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_func_memcmp_clean=no
else
  cat > conftest.$ac_ext <<EOF
#line 40538 "configure"
#include "confdefs.h"

main()
{
  char c0 = 0x40, c1 = 0x80, c2 = 0x81;
  exit(memcmp(&c0, &c2, 1) < 0 && memcmp(&c1, &c2, 1) < 0 ? 0 : 1);
}

EOF
if { (eval echo configure:40548: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_func_memcmp_clean=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_func_memcmp_clean=no
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_func_memcmp_clean" 1>&6
test $ac_cv_func_memcmp_clean = no && LIBOBJS="$LIBOBJS memcmp.${ac_objext}"

# The Ultrix 4.2 mips builtin alloca declared by alloca.h only works
# for constant arguments.  Useless!
echo $ac_n "checking for working alloca.h""... $ac_c" 1>&6
echo "configure:40568: checking for working alloca.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_alloca_h'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40573 "configure"
#include "confdefs.h"
#include <alloca.h>
int main() {
char *p = alloca(2 * sizeof(int));
; return 0; }
EOF
if { (eval echo configure:40580: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_header_alloca_h=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_header_alloca_h=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_header_alloca_h" 1>&6
if test $ac_cv_header_alloca_h = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA_H 1
EOF

fi

echo $ac_n "checking for alloca""... $ac_c" 1>&6
echo "configure:40601: checking for alloca" >&5
if eval "test \"`echo '$''{'ac_cv_func_alloca_works'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40606 "configure"
#include "confdefs.h"

#ifdef __GNUC__
# define alloca __builtin_alloca
#else
# ifdef _MSC_VER
#  include <malloc.h>
#  define alloca _alloca
# else
#  if HAVE_ALLOCA_H
#   include <alloca.h>
#  else
#   ifdef _AIX
 #pragma alloca
#   else
#    ifndef alloca /* predefined by HP cc +Olibcalls */
char *alloca ();
#    endif
#   endif
#  endif
# endif
#endif

int main() {
char *p = (char *) alloca(1);
; return 0; }
EOF
if { (eval echo configure:40634: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  ac_cv_func_alloca_works=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  ac_cv_func_alloca_works=no
fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_func_alloca_works" 1>&6
if test $ac_cv_func_alloca_works = yes; then
  cat >> confdefs.h <<\EOF
#define HAVE_ALLOCA 1
EOF

fi

if test $ac_cv_func_alloca_works = no; then
  # The SVR3 libPW and SVR4 libucb both contain incompatible functions
  # that cause trouble.  Some versions do not even contain alloca or
  # contain a buggy version.  If you still want to use their alloca,
  # use ar to extract alloca.o from them instead of compiling alloca.c.
  ALLOCA=alloca.${ac_objext}
  cat >> confdefs.h <<\EOF
#define C_ALLOCA 1
EOF


echo $ac_n "checking whether alloca needs Cray hooks""... $ac_c" 1>&6
echo "configure:40666: checking whether alloca needs Cray hooks" >&5
if eval "test \"`echo '$''{'ac_cv_os_cray'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40671 "configure"
#include "confdefs.h"
#if defined(CRAY) && ! defined(CRAY2)
webecray
#else
wenotbecray
#endif

EOF
if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
  egrep "webecray" >/dev/null 2>&1; then
  rm -rf conftest*
  ac_cv_os_cray=yes
else
  rm -rf conftest*
  ac_cv_os_cray=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_os_cray" 1>&6
if test $ac_cv_os_cray = yes; then
for ac_func in _getb67 GETB67 getb67; do
  echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:40696: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40701 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:40724: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> confdefs.h <<EOF
#define CRAY_STACKSEG_END $ac_func
EOF

  break
else
  echo "$ac_t""no" 1>&6
fi

done
fi

echo $ac_n "checking stack direction for C alloca""... $ac_c" 1>&6
echo "configure:40751: checking stack direction for C alloca" >&5
if eval "test \"`echo '$''{'ac_cv_c_stack_direction'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_c_stack_direction=0
else
  cat > conftest.$ac_ext <<EOF
#line 40759 "configure"
#include "confdefs.h"
find_stack_direction ()
{
  static char *addr = 0;
  auto char dummy;
  if (addr == 0)
    {
      addr = &dummy;
      return find_stack_direction ();
    }
  else
    return (&dummy > addr) ? 1 : -1;
}
main ()
{
  exit (find_stack_direction() < 0);
}
EOF
if { (eval echo configure:40778: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  ac_cv_c_stack_direction=1
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  ac_cv_c_stack_direction=-1
fi
rm -fr conftest*
fi

fi

echo "$ac_t""$ac_cv_c_stack_direction" 1>&6
cat >> confdefs.h <<EOF
#define STACK_DIRECTION $ac_cv_c_stack_direction
EOF

fi

for ac_func in memcpy strdup getpid kill strtod strtol finite
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:40802: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40807 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:40830: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


  echo $ac_n "checking whether sprintf is broken""... $ac_c" 1>&6
echo "configure:40856: checking whether sprintf is broken" >&5
if eval "test \"`echo '$''{'ac_cv_broken_sprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    if test "$cross_compiling" = yes; then
  
      ac_cv_broken_sprintf=no
    
else
  cat > conftest.$ac_ext <<EOF
#line 40867 "configure"
#include "confdefs.h"
main() {char buf[20];exit(sprintf(buf,"testing 123")!=11); }
EOF
if { (eval echo configure:40871: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
  
      ac_cv_broken_sprintf=no
    
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
      ac_cv_broken_sprintf=yes
    
fi
rm -fr conftest*
fi

  
fi

echo "$ac_t""$ac_cv_broken_sprintf" 1>&6
  if test "$ac_cv_broken_sprintf" = "yes"; then
    ac_result=1
  else
    ac_result=0
  fi
  cat >> confdefs.h <<EOF
#define ZEND_BROKEN_SPRINTF $ac_result
EOF



for ac_func in finite isfinite isinf isnan
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
echo "configure:40905: checking for $ac_func" >&5
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 40910 "configure"
#include "confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:40933: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f conftest*
fi

if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



  echo $ac_n "checking whether fp_except is defined""... $ac_c" 1>&6
echo "configure:40960: checking whether fp_except is defined" >&5
if eval "test \"`echo '$''{'ac_cv_type_fp_except'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    cat > conftest.$ac_ext <<EOF
#line 40966 "configure"
#include "confdefs.h"

#include <floatingpoint.h>

int main() {

fp_except x = (fp_except) 0;

; return 0; }
EOF
if { (eval echo configure:40977: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
     ac_cv_type_fp_except=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
     ac_cv_type_fp_except=no

fi
rm -f conftest*
fi

echo "$ac_t""$ac_cv_type_fp_except" 1>&6
  if test "$ac_cv_type_fp_except" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_FP_EXCEPT 1
EOF

  fi

	





# Check whether --enable-c9x-inline or --disable-c9x-inline was given.
if test "${enable_c9x_inline+set}" = set; then
  enableval="$enable_c9x_inline"
  
  ZEND_C9X_INLINE=$enableval

else
  
  ZEND_C9X_INLINE=no

fi


# Check whether --enable-experimental-zts or --disable-experimental-zts was given.
if test "${enable_experimental_zts+set}" = set; then
  enableval="$enable_experimental_zts"
  
  ZEND_EXPERIMENTAL_ZTS=$enableval

else
  
  ZEND_EXPERIMENTAL_ZTS=no

fi
  

# Check whether --enable-inline-optimization or --disable-inline-optimization was given.
if test "${enable_inline_optimization+set}" = set; then
  enableval="$enable_inline_optimization"
  
  ZEND_INLINE_OPTIMIZATION=$enableval

else
  
  ZEND_INLINE_OPTIMIZATION=no

fi


# Check whether --enable-memory-limit or --disable-memory-limit was given.
if test "${enable_memory_limit+set}" = set; then
  enableval="$enable_memory_limit"
  
  ZEND_MEMORY_LIMIT=$enableval

else
  
  ZEND_MEMORY_LIMIT=no

fi


echo $ac_n "checking whether to enable C9x-inline semantics""... $ac_c" 1>&6
echo "configure:41060: checking whether to enable C9x-inline semantics" >&5
echo "$ac_t""$ZEND_C9X_INLINE" 1>&6

echo $ac_n "checking whether to enable experimental ZTS""... $ac_c" 1>&6
echo "configure:41064: checking whether to enable experimental ZTS" >&5
echo "$ac_t""$ZEND_EXPERIMENTAL_ZTS" 1>&6

echo $ac_n "checking whether to enable inline optimization for GCC""... $ac_c" 1>&6
echo "configure:41068: checking whether to enable inline optimization for GCC" >&5
echo "$ac_t""$ZEND_INLINE_OPTIMIZATION" 1>&6

echo $ac_n "checking whether to enable a memory limit""... $ac_c" 1>&6
echo "configure:41072: checking whether to enable a memory limit" >&5
echo "$ac_t""$ZEND_MEMORY_LIMIT" 1>&6

echo $ac_n "checking whether to enable Zend debugging""... $ac_c" 1>&6
echo "configure:41076: checking whether to enable Zend debugging" >&5
echo "$ac_t""$ZEND_DEBUG" 1>&6
	
if test "$ZEND_DEBUG" = "yes"; then
  cat >> confdefs.h <<\EOF
#define ZEND_DEBUG 1
EOF

  echo " $CFLAGS" | grep ' -g' >/dev/null || DEBUG_CFLAGS="-g"
  test -n "$GCC" && DEBUG_CFLAGS="$DEBUG_CFLAGS -Wall"
  test -n "$GCC" && test "$USE_MAINTAINER_MODE" = "yes" && \
    DEBUG_CFLAGS="$DEBUG_CFLAGS -Wmissing-prototypes -Wstrict-prototypes -Wmissing-declarations"
else
  cat >> confdefs.h <<\EOF
#define ZEND_DEBUG 0
EOF

fi

test -n "$DEBUG_CFLAGS" && CFLAGS="$CFLAGS $DEBUG_CFLAGS"

if test "$ZEND_EXPERIMENTAL_ZTS" = "yes"; then
  cat >> confdefs.h <<\EOF
#define ZTS 1
EOF

  ZEND_SCANNER_TYPE=cc
  CPPFLAGS="$CPPFLAGS -I../TSRM"
  

		
if test "$ZEND_EXPERIMENTAL_ZTS" = "yes"; then
for ac_prog in $CCC c++ g++ gcc CC cxx cc++ cl
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
echo "configure:41113: checking for $ac_word" >&5
if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CXX"; then
  ac_cv_prog_CXX="$CXX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS=":"
  ac_dummy="$PATH"
  for ac_dir in $ac_dummy; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CXX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CXX="$ac_cv_prog_CXX"
if test -n "$CXX"; then
  echo "$ac_t""$CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CXX" && break
done
test -n "$CXX" || CXX="gcc"


echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
echo "configure:41145: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

cat > conftest.$ac_ext << EOF

#line 41156 "configure"
#include "confdefs.h"

int main(){return(0);}
EOF
if { (eval echo configure:41161: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  ac_cv_prog_cxx_works=yes
  # If we can't run a trivial program, we are probably using a cross compiler.
  if (./conftest; exit) 2>/dev/null; then
    ac_cv_prog_cxx_cross=no
  else
    ac_cv_prog_cxx_cross=yes
  fi
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  ac_cv_prog_cxx_works=no
fi
rm -fr conftest*
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

echo "$ac_t""$ac_cv_prog_cxx_works" 1>&6
if test $ac_cv_prog_cxx_works = no; then
  { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
fi
echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
echo "configure:41187: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
cross_compiling=$ac_cv_prog_cxx_cross

echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
echo "configure:41192: checking whether we are using GNU C++" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.C <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:41201: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gxx=yes
else
  ac_cv_prog_gxx=no
fi
fi

echo "$ac_t""$ac_cv_prog_gxx" 1>&6

if test $ac_cv_prog_gxx = yes; then
  GXX=yes
else
  GXX=
fi

ac_test_CXXFLAGS="${CXXFLAGS+set}"
ac_save_CXXFLAGS="$CXXFLAGS"
CXXFLAGS=
echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
echo "configure:41220: checking whether ${CXX-g++} accepts -g" >&5
if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > conftest.cc
if test -z "`${CXX-g++} -g -c conftest.cc 2>&1`"; then
  ac_cv_prog_cxx_g=yes
else
  ac_cv_prog_cxx_g=no
fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_prog_cxx_g" 1>&6
if test "$ac_test_CXXFLAGS" = set; then
  CXXFLAGS="$ac_save_CXXFLAGS"
elif test $ac_cv_prog_cxx_g = yes; then
  if test "$GXX" = yes; then
    CXXFLAGS="-g -O2"
  else
    CXXFLAGS="-g"
  fi
else
  if test "$GXX" = yes; then
    CXXFLAGS="-O2"
  else
    CXXFLAGS=
  fi
fi
		
echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
echo "configure:41252: checking how to run the C++ preprocessor" >&5
if test -z "$CXXCPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross
  CXXCPP="${CXX-g++} -E"
  cat > conftest.$ac_ext <<EOF
#line 41265 "configure"
#include "confdefs.h"
#include <stdlib.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:41270: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  CXXCPP=/lib/cpp
fi
rm -f conftest*
  ac_cv_prog_CXXCPP="$CXXCPP"
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross
fi
fi
CXXCPP="$ac_cv_prog_CXXCPP"
echo "$ac_t""$CXXCPP" 1>&6

ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o conftest${ac_exeext} $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cxx_cross

ac_safe=`echo "stdiostream.h" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for stdiostream.h""... $ac_c" 1>&6
echo "configure:41303: checking for stdiostream.h" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 41308 "configure"
#include "confdefs.h"
#include <stdiostream.h>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:41313: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
   cat >> confdefs.h <<\EOF
#define HAVE_STDIOSTREAM_H 
EOF
 
else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for cin in -lC""... $ac_c" 1>&6
echo "configure:41339: checking for cin in -lC" >&5
ac_lib_var=`echo C'_'cin | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lC  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41347 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cin();

int main() {
cin()
; return 0; }
EOF
if { (eval echo configure:41361: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo C | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lC $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for cin in -lg++""... $ac_c" 1>&6
echo "configure:41389: checking for cin in -lg++" >&5
ac_lib_var=`echo g++'_'cin | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lg++  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41397 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cin();

int main() {
cin()
; return 0; }
EOF
if { (eval echo configure:41411: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo g++ | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lg++ $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for cin in -lstdc++""... $ac_c" 1>&6
echo "configure:41439: checking for cin in -lstdc++" >&5
ac_lib_var=`echo stdc++'_'cin | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lstdc++  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41447 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cin();

int main() {
cin()
; return 0; }
EOF
if { (eval echo configure:41461: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo stdc++ | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lstdc++ $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for cin in -lcxx""... $ac_c" 1>&6
echo "configure:41489: checking for cin in -lcxx" >&5
ac_lib_var=`echo cxx'_'cin | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcxx  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41497 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char cin();

int main() {
cin()
; return 0; }
EOF
if { (eval echo configure:41511: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo cxx | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lcxx $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for __array_delete in -lcxxstd""... $ac_c" 1>&6
echo "configure:41539: checking for __array_delete in -lcxxstd" >&5
ac_lib_var=`echo cxxstd'_'__array_delete | sed 'y%./+-%__p_%'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lcxxstd  $LIBS"
cat > conftest.$ac_ext <<EOF
#line 41547 "configure"
#include "confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char __array_delete();

int main() {
__array_delete()
; return 0; }
EOF
if { (eval echo configure:41561: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo cxxstd | sed -e 's/[^a-zA-Z0-9_]/_/g' \
    -e 'y/abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ/'`
  cat >> confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lcxxstd $LIBS"

else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for class istdiostream""... $ac_c" 1>&6
echo "configure:41590: checking for class istdiostream" >&5
if eval "test \"`echo '$''{'ac_cv_class_istdiostream'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
cat > conftest.$ac_ext <<EOF
#line 41596 "configure"
#include "confdefs.h"

#include <sys/types.h>
#include <unistd.h>
#include <fstream.h>
#include <stdiostream.h>

int main() {

istdiostream *foo = new istdiostream((FILE *) 0);

; return 0; }
EOF
if { (eval echo configure:41610: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  
  ac_cv_class_istdiostream=yes

else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  
  ac_cv_class_istdiostream=no

fi
rm -f conftest*

fi

echo "$ac_t""$ac_cv_class_istdiostream" 1>&6
  if test "$ac_cv_class_istdiostream" = "yes"; then
    cat >> confdefs.h <<\EOF
#define HAVE_CLASS_ISTDIOSTREAM 1
EOF

  fi
ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
cross_compiling=$ac_cv_prog_cc_cross

fi

else
  ZEND_SCANNER_TYPE=c
fi  

if test "$ZEND_C9X_INLINE" = "yes"; then
  cat >> confdefs.h <<\EOF
#define C9X_INLINE_SEMANTICS 1
EOF

else
  ZEND_GCC=libZend_gcc.la
  
fi

ZEND_SCANNER="libZend_${ZEND_SCANNER_TYPE}.la"

if test "$ZEND_MEMORY_LIMIT" = "yes"; then
  cat >> confdefs.h <<\EOF
#define MEMORY_LIMIT 1
EOF

else
  cat >> confdefs.h <<\EOF
#define MEMORY_LIMIT 0
EOF

fi


if test -n "$GCC" && test "$ZEND_INLINE_OPTIMIZATION" != "yes"; then
  INLINE_CFLAGS=`echo $ac_n "$CFLAGS $ac_c" | sed s/-O[0-9]*//`
else
  INLINE_CFLAGS="$CFLAGS"
fi


echo $ac_n "checking for inline""... $ac_c" 1>&6
echo "configure:41680: checking for inline" >&5
if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_cv_c_inline=no
for ac_kw in inline __inline__ __inline; do
  cat > conftest.$ac_ext <<EOF
#line 41687 "configure"
#include "confdefs.h"

int main() {
} $ac_kw foo() {
; return 0; }
EOF
if { (eval echo configure:41694: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf conftest*
  ac_cv_c_inline=$ac_kw; break
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
fi
rm -f conftest*
done

fi

echo "$ac_t""$ac_cv_c_inline" 1>&6
case "$ac_cv_c_inline" in
  inline | yes) ;;
  no) cat >> confdefs.h <<\EOF
#define inline 
EOF
 ;;
  *)  cat >> confdefs.h <<EOF
#define inline $ac_cv_c_inline
EOF
 ;;
esac






if test "$ZEND_EXPERIMENTAL_ZTS" = "yes"; then
  TSRM_LIB='TSRM/libtsrm.la'
  TSRM_DIR=TSRM
  cat >> confdefs.h <<\EOF
#define ZTS 1
EOF

  INCLUDES="$INCLUDES -I\$(top_builddir)/TSRM"
  PHP_THREAD_SAFETY=yes
else
  PHP_THREAD_SAFETY=no
fi

if test "$abs_srcdir" != "$abs_builddir"; then
  INCLUDES="$INCLUDES -I\$(top_srcdir)/main -I\$(top_srcdir)/Zend"
  if test "$PHP_THREAD_SAFETY" = "yes"; then
    INCLUDES="$INCLUDES -I\$(top_srcdir)/TSRM"
  fi
fi

EXTRA_LIBS="$EXTRA_LIBS $DLIBS $LIBS"
LIBS=""
LDFLAGS=""
if test "$PHP_THREAD_SAFETY" = "yes"; then
  
  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring TSRM${T_ME}" 1>&6

  


for ac_hdr in stdarg.h
do
ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
echo "configure:41759: checking for $ac_hdr" >&5
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 41764 "configure"
#include "confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
{ (eval echo configure:41769: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
if test -z "$ac_err"; then
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
  cat >> confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done



  


# Check whether --with-tsrm-pth or --without-tsrm-pth was given.
if test "${with_tsrm_pth+set}" = set; then
  withval="$with_tsrm_pth"
  
  TSRM_PTH=$withval

else
  
  TSRM_PTH=no

fi


# Check whether --with-tsrm-pthreads or --without-tsrm-pthreads was given.
if test "${with_tsrm_pthreads+set}" = set; then
  withval="$with_tsrm_pthreads"
  
  TSRM_PTHREADS=$withval

else
  
  TSRM_PTHREADS=yes

fi


test "$TSRM_PTH" = "yes" && TSRM_PTH=pth-config

if test "$TSRM_PTH" != "no"; then
  

echo $ac_n "checking for GNU Pth""... $ac_c" 1>&6
echo "configure:41832: checking for GNU Pth" >&5
PTH_PREFIX="`$TSRM_PTH --prefix`"
if test -z "$PTH_PREFIX"; then
  echo "$ac_t""Please check your Pth installation" 1>&6
fi

CPPFLAGS="$CPPFLAGS `$TSRM_PTH --cflags`"
LDFLAGS="$LDFLAGS `$TSRM_PTH --ldflags`"
LIBS="$LIBS `$TSRM_PTH --libs`"

cat >> confdefs.h <<\EOF
#define GNUPTH 1
EOF

echo "$ac_t""yes - installed in $PTH_PREFIX" 1>&6


elif test "$TSRM_PTHREADS" != "no"; then
  
		


save_CFLAGS="$CFLAGS"
save_LIBS="$LIBS"

if test -n "$ac_cv_pthreads_lib"; then
  LIBS="$LIBS -l$ac_cv_pthreads_lib"
fi

if test -n "$ac_cv_pthreads_cflags"; then
  CFLAGS="$CFLAGS $ac_cv_pthreads_cflags"
fi


if test "$cross_compiling" = yes; then
  pthreads_working="no" 
else
  cat > conftest.$ac_ext <<EOF
#line 41870 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:41888: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
   
  pthreads_working="yes"
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working="no"
  
fi
rm -fr conftest*
fi
  
LIBS="$save_LIBS"
CFLAGS="$save_CFLAGS"

echo $ac_n "checking for pthreads_cflags""... $ac_c" 1>&6
echo "configure:41908: checking for pthreads_cflags" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_cflags'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_cv_pthreads_cflags=""
if test "$pthreads_working" != "yes"; then
  for flag in -kthread -pthread -pthreads -mthreads -Kthread -threads -mt -qthreaded; do 
    ac_save="$CFLAGS"
    CFLAGS="$CFLAGS $flag"
    
if test "$cross_compiling" = yes; then
  pthreads_working="no" 
else
  cat > conftest.$ac_ext <<EOF
#line 41923 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:41941: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
   
  pthreads_working="yes"
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working="no"
  
fi
rm -fr conftest*
fi
  
    CFLAGS="$ac_save"
    if test "$pthreads_working" = "yes"; then
      ac_cv_pthreads_cflags="$flag"
      break
    fi
  done
fi

fi

echo "$ac_t""$ac_cv_pthreads_cflags" 1>&6

echo $ac_n "checking for pthreads_lib""... $ac_c" 1>&6
echo "configure:41970: checking for pthreads_lib" >&5
if eval "test \"`echo '$''{'ac_cv_pthreads_lib'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
ac_cv_pthreads_lib=""
if test "$pthreads_working" != "yes"; then
  for lib in pthread pthreads c_r; do
    ac_save="$LIBS"
    LIBS="$LIBS -l$lib"
    
if test "$cross_compiling" = yes; then
  pthreads_working="no" 
else
  cat > conftest.$ac_ext <<EOF
#line 41985 "configure"
#include "confdefs.h"

#include <pthread.h>
#include <stddef.h>

void *thread_routine(void *data) {
    return data;
}

int main() {
    pthread_t thd;
    pthread_mutexattr_t mattr;
    int data = 1;
    pthread_mutexattr_init(&mattr);
    return pthread_create(&thd, NULL, thread_routine, &data);
} 
EOF
if { (eval echo configure:42003: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
then
   
  pthreads_working="yes"
  
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -fr conftest*
  
  pthreads_working="no"
  
fi
rm -fr conftest*
fi
  
    LIBS="$ac_save"
    if test "$pthreads_working" = "yes"; then
      ac_cv_pthreads_lib="$lib"
      break
    fi
  done
fi

fi

echo "$ac_t""$ac_cv_pthreads_lib" 1>&6

if test "$pthreads_working" = "yes"; then
  threads_result="POSIX Threads found"
else
  threads_result="POSIX Threads not found"
fi

		
if test "$pthreads_working" != "yes"; then
  { echo "configure: error: Your system seems to lack POSIX threads." 1>&2; exit 1; }
fi
		
cat >> confdefs.h <<\EOF
#define PTHREADS 1
EOF


echo $ac_n "checking for POSIX threads""... $ac_c" 1>&6
echo "configure:42048: checking for POSIX threads" >&5
echo "$ac_t""yes" 1>&6

fi


  EXTRA_LDFLAGS="$EXTRA_LDFLAGS $LDFLAGS"
  EXTRA_LIBS="$EXTRA_LIBS $LIBS"
  LDFLAGS=""
  LIBS=""
  
  PHP_OUTPUT_FILES="$PHP_OUTPUT_FILES TSRM/Makefile"

fi


phplibdir="`pwd`/modules"
$php_shtool mkdir -p $phplibdir
phptempdir="`pwd`/libs"

test "$prefix" = "NONE" && prefix="/usr/local"
test "$exec_prefix" = "NONE" && exec_prefix='$(prefix)'


if test "$PHP_DEBUG" = "1"; then
  PART1=debug
else
  PART1=no-debug
fi

if test "$enable_experimental_zts" = "yes"; then
  PART2=zts
else
  PART2=non-zts
fi

ZEND_MODULE_API_NO=`egrep '#define ZEND_MODULE_API_NO ' $srcdir/Zend/modules.h|sed 's/#define ZEND_MODULE_API_NO //'`

EXTENSION_DIR="$prefix/lib/php/extensions/$PART1-$PART2-$ZEND_MODULE_API_NO"

PEAR_INSTALLDIR="$prefix/lib/php"

INCLUDE_PATH=".:$PEAR_INSTALLDIR"


  if test "$PHP_RPATH" = "yes" && test -n "$PHP_RPATHS"; then
    OLD_RPATHS="$PHP_RPATHS"
    PHP_RPATHS=""
    for i in $OLD_RPATHS; do
      PHP_LDFLAGS="$PHP_LDFLAGS -L$i"
      PHP_RPATHS="$PHP_RPATHS -R $i"
      NATIVE_RPATHS="$NATIVE_RPATHS ${ld_runpath_switch}$i"
    done
  fi


EXTRA_LDFLAGS="$EXTRA_LDFLAGS $PHP_LDFLAGS"

PHP_BUILD_DATE=`date '+%Y-%m-%d'`
cat >> confdefs.h <<EOF
#define PHP_BUILD_DATE "$PHP_BUILD_DATE"
EOF

PHP_UNAME=`uname -a`
cat >> confdefs.h <<EOF
#define PHP_UNAME "$PHP_UNAME"
EOF

PHP_OS=`uname`
cat >> confdefs.h <<EOF
#define PHP_OS "$PHP_OS"
EOF



	

  PHP_VAR_SUBST="$PHP_VAR_SUBST abs_builddir"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST abs_srcdir"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST bindir"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST exec_prefix"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST includedir"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST libdir"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST phplibdir"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST phptempdir"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST prefix"
  



  PHP_VAR_SUBST="$PHP_VAR_SUBST AWK"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST CC"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST CFLAGS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST CONFIGURE_COMMAND"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST CPP"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST CPPFLAGS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXX"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXXFLAGS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST CXX_PHP_COMPILE"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST DEBUG_CFLAGS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST DEFS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTENSION_DIR"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_LDFLAGS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST EXTRA_LIBS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST INCLUDES"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST INCLUDE_PATH"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST INSTALL_IT"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST LEX"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST LEX_OUTPUT_ROOT"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST LFLAGS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST LIBTOOL"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST LN_S"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST NATIVE_RPATHS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PEAR_DIR"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PEAR_INSTALLDIR"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_BUILD_DATE"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_COMPILE"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_LDFLAGS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_LIBS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_PROGRAM"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_RPATHS"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_SAPI"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PHP_VERSION"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST PROG_SENDMAIL"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST SHELL"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST SHARED_LIBTOOL"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST TSRM_DIR"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST TSRM_LIB"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST WARNING_LEVEL"
  


  PHP_VAR_SUBST="$PHP_VAR_SUBST YACC"
  



  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring libtool${T_ME}" 1>&6


old_CC="$CC"

if test "$PHP_THREAD_SAFETY" = "yes" && test -n "$ac_cv_pthreads_cflags"; then
  CXXFLAGS="$CXXFLAGS $ac_cv_pthreads_cflags"
  INLINE_CFLAGS="$INLINE_CFLAGS $ac_cv_pthreads_cflags"
  cat >meta_ccld<<EOF
#! /bin/sh
exec $CC $ac_cv_pthreads_cflags \$@
EOF
  CC="$abs_builddir/meta_ccld"
  chmod +x meta_ccld
fi

if test "$PHP_THREAD_SAFETY" = "yes" && test "$PHP_MYSQL" = "yes"; then
  CPPFLAGS="$CPPFLAGS -DTHREAD=1"
fi

# Check whether --enable-shared or --disable-shared was given.
if test "${enable_shared+set}" = set; then
  enableval="$enable_shared"
  p=${PACKAGE-default}
case "$enableval" in
yes) enable_shared=yes ;;
no) enable_shared=no ;;
*)
  enable_shared=no
  # Look at the argument we got.  We use all the common list separators.
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:,"
  for pkg in $enableval; do
    if test "X$pkg" = "X$p"; then
      enable_shared=yes
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
else
  enable_shared=yes
fi

# Check whether --enable-static or --disable-static was given.
if test "${enable_static+set}" = set; then
  enableval="$enable_static"
  p=${PACKAGE-default}
case "$enableval" in
yes) enable_static=yes ;;
no) enable_static=no ;;
*)
  enable_static=no
  # Look at the argument we got.  We use all the common list separators.
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:,"
  for pkg in $enableval; do
    if test "X$pkg" = "X$p"; then
      enable_static=yes
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
else
  enable_static=yes
fi

# Check whether --enable-fast-install or --disable-fast-install was given.
if test "${enable_fast_install+set}" = set; then
  enableval="$enable_fast_install"
  p=${PACKAGE-default}
case "$enableval" in
yes) enable_fast_install=yes ;;
no) enable_fast_install=no ;;
*)
  enable_fast_install=no
  # Look at the argument we got.  We use all the common list separators.
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:,"
  for pkg in $enableval; do
    if test "X$pkg" = "X$p"; then
      enable_fast_install=yes
    fi
  done
  IFS="$ac_save_ifs"
  ;;
esac
else
  enable_fast_install=yes
fi

echo $ac_n "checking build system type""... $ac_c" 1>&6
echo "configure:42414: checking build system type" >&5

build_alias=$build
case "$build_alias" in
NONE)
  case $nonopt in
  NONE) build_alias=$host_alias ;;
  *) build_alias=$nonopt ;;
  esac ;;
esac

build=`${CONFIG_SHELL-/bin/sh} $ac_config_sub $build_alias`
build_cpu=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
build_vendor=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
build_os=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
echo "$ac_t""$build" 1>&6

# Check whether --with-gnu-ld or --without-gnu-ld was given.
if test "${with_gnu_ld+set}" = set; then
  withval="$with_gnu_ld"
  test "$withval" = no || with_gnu_ld=yes
else
  with_gnu_ld=no
fi

ac_prog=ld
if test "$ac_cv_prog_gcc" = yes; then
  # Check if gcc -print-prog-name=ld gives a path.
  echo $ac_n "checking for ld used by GCC""... $ac_c" 1>&6
echo "configure:42443: checking for ld used by GCC" >&5
  ac_prog=`($CC -print-prog-name=ld) 2>&5`
  case "$ac_prog" in
    # Accept absolute paths.
    [\\/]* | [A-Za-z]:[\\/]*)
      re_direlt='/[^/][^/]*/\.\./'
      # Canonicalize the path of ld
      ac_prog=`echo $ac_prog| sed 's%\\\\%/%g'`
      while echo $ac_prog | grep "$re_direlt" > /dev/null 2>&1; do
	ac_prog=`echo $ac_prog| sed "s%$re_direlt%/%"`
      done
      test -z "$LD" && LD="$ac_prog"
      ;;
  "")
    # If it fails, then pretend we aren't using GCC.
    ac_prog=ld
    ;;
  *)
    # If it is relative, then search for the first ld in PATH.
    with_gnu_ld=unknown
    ;;
  esac
elif test "$with_gnu_ld" = yes; then
  echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
echo "configure:42467: checking for GNU ld" >&5
else
  echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
echo "configure:42470: checking for non-GNU ld" >&5
fi
if eval "test \"`echo '$''{'ac_cv_path_LD'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -z "$LD"; then
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}${PATH_SEPARATOR-:}"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f "$ac_dir/$ac_prog" || test -f "$ac_dir/$ac_prog$ac_exeext"; then
      ac_cv_path_LD="$ac_dir/$ac_prog"
      # Check to see if the program is GNU ld.  I'd rather use --version,
      # but apparently some GNU ld's only accept -v.
      # Break only if it was the GNU/non-GNU ld that we prefer.
      if "$ac_cv_path_LD" -v 2>&1 < /dev/null | egrep '(GNU|with BFD)' > /dev/null; then
	test "$with_gnu_ld" != no && break
      else
	test "$with_gnu_ld" != yes && break
      fi
    fi
  done
  IFS="$ac_save_ifs"
else
  ac_cv_path_LD="$LD" # Let the user override the test with a path.
fi
fi

LD="$ac_cv_path_LD"
if test -n "$LD"; then
  echo "$ac_t""$LD" 1>&6
else
  echo "$ac_t""no" 1>&6
fi
test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }

echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
echo "configure:42506: checking if the linker ($LD) is GNU ld" >&5
if eval "test \"`echo '$''{'ac_cv_prog_gnu_ld'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # I'd rather use --version here, but apparently some GNU ld's only accept -v.
if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then
  ac_cv_prog_gnu_ld=yes
else
  ac_cv_prog_gnu_ld=no
fi
fi

echo "$ac_t""$ac_cv_prog_gnu_ld" 1>&6


echo $ac_n "checking for BSD-compatible nm""... $ac_c" 1>&6
echo "configure:42522: checking for BSD-compatible nm" >&5
if eval "test \"`echo '$''{'ac_cv_path_NM'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$NM"; then
  # Let the user override the test.
  ac_cv_path_NM="$NM"
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}${PATH_SEPARATOR-:}"
  for ac_dir in $PATH /usr/ccs/bin /usr/ucb /bin; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/nm || test -f $ac_dir/nm$ac_exeext ; then
      # Check to see if the nm accepts a BSD-compat flag.
      # Adding the `sed 1q' prevents false positives on HP-UX, which says:
      #   nm: unknown option "B" ignored
      if ($ac_dir/nm -B /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then
	ac_cv_path_NM="$ac_dir/nm -B"
	break
      elif ($ac_dir/nm -p /dev/null 2>&1 | sed '1q'; exit 0) | egrep /dev/null >/dev/null; then
	ac_cv_path_NM="$ac_dir/nm -p"
	break
      else
	ac_cv_path_NM=${ac_cv_path_NM="$ac_dir/nm"} # keep the first match, but
	continue # so that we can try to find one that supports BSD flags
      fi
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_path_NM" && ac_cv_path_NM=nm
fi
fi

NM="$ac_cv_path_NM"
echo "$ac_t""$NM" 1>&6



# Check for any special flags to pass to ltconfig.
#
# the following will cause an existing older ltconfig to fail, so
# we ignore this at the expense of the cache file... Checking this 
# will just take longer ... bummer!
#libtool_flags="--cache-file=$cache_file"
#
test "$enable_shared" = no && libtool_flags="$libtool_flags --disable-shared"
test "$enable_static" = no && libtool_flags="$libtool_flags --disable-static"
test "$enable_fast_install" = no && libtool_flags="$libtool_flags --disable-fast-install"
test "$ac_cv_prog_gcc" = yes && libtool_flags="$libtool_flags --with-gcc"
test "$ac_cv_prog_gnu_ld" = yes && libtool_flags="$libtool_flags --with-gnu-ld"


# Check whether --enable-libtool-lock or --disable-libtool-lock was given.
if test "${enable_libtool_lock+set}" = set; then
  enableval="$enable_libtool_lock"
  :
fi

test "x$enable_libtool_lock" = xno && libtool_flags="$libtool_flags --disable-lock"
test x"$silent" = xyes && libtool_flags="$libtool_flags --silent"

# Some flags need to be propagated to the compiler or linker for good
# libtool support.
case "$host" in
*-*-irix6*)
  # Find out which ABI we are using.
  echo '#line 42587 "configure"' > conftest.$ac_ext
  if { (eval echo configure:42588: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    case "`/usr/bin/file conftest.o`" in
    *32-bit*)
      LD="${LD-ld} -32"
      ;;
    *N32*)
      LD="${LD-ld} -n32"
      ;;
    *64-bit*)
      LD="${LD-ld} -64"
      ;;
    esac
  fi
  rm -rf conftest*
  ;;

*-*-sco3.2v5*)
  # On SCO OpenServer 5, we need -belf to get full-featured binaries.
  SAVE_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS -belf"
  echo $ac_n "checking whether the C compiler needs -belf""... $ac_c" 1>&6
echo "configure:42609: checking whether the C compiler needs -belf" >&5
if eval "test \"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > conftest.$ac_ext <<EOF
#line 42614 "configure"
#include "confdefs.h"

int main() {

; return 0; }
EOF
if { (eval echo configure:42621: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
  rm -rf conftest*
  lt_cv_cc_needs_belf=yes
else
  echo "configure: failed program was:" >&5
  cat conftest.$ac_ext >&5
  rm -rf conftest*
  lt_cv_cc_needs_belf=no
fi
rm -f conftest*
fi

echo "$ac_t""$lt_cv_cc_needs_belf" 1>&6
  if test x"$lt_cv_cc_needs_belf" != x"yes"; then
    # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
    CFLAGS="$SAVE_CFLAGS"
  fi
  ;;


esac


# Save cache, so that ltconfig can load it
cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache


# Actually configure libtool.  ac_aux_dir is where install-sh is found.
CC="$CC" CFLAGS="$CFLAGS" CPPFLAGS="$CPPFLAGS" \
LD="$LD" LDFLAGS="$LDFLAGS" LIBS="$LIBS" \
LN_S="$LN_S" NM="$NM" RANLIB="$RANLIB" \
DLLTOOL="$DLLTOOL" AS="$AS" OBJDUMP="$OBJDUMP" \
${CONFIG_SHELL-/bin/sh} $ac_aux_dir/ltconfig --no-reexec \
$libtool_flags --no-verify $ac_aux_dir/ltmain.sh $host \
|| { echo "configure: error: libtool configure failed" 1>&2; exit 1; }

# Reload cache, that may have been modified by ltconfig
if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi


# This can be used to rebuild libtool when needed
LIBTOOL_DEPS="$ac_aux_dir/ltconfig $ac_aux_dir/ltmain.sh"

# Always use our own libtool.
LIBTOOL='$(SHELL) $(top_builddir)/libtool'

# Redirect the config.log output again, so that the ltconfig log is not
# clobbered by the next message.
exec 5>>./config.log

if test "$enable_debug" != "yes"; then
  
  LIBTOOL='$(SHELL) $(top_builddir)/libtool --silent'

fi

PHP_COMPILE='$(LIBTOOL) --mode=compile $(COMPILE) -c $<'
CXX_PHP_COMPILE='$(LIBTOOL) --mode=compile $(CXX_COMPILE) -c $<'

if test "$enable_shared" = "yes"; then
  SHARED_LIBTOOL='$(LIBTOOL)'
else
  if test "$lib_build_shared" = "yes"; then
    
  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Configuring shared libtool${T_ME}" 1>&6

    $SHELL $srcdir/ltconfig --output=shlibtool --disable-static --srcdir=$srcdir --cache-file=./config.cache $srcdir/ltmain.sh
    SHARED_LIBTOOL='$(SHELL) $(top_builddir)/shlibtool'
  else
    PHP_COMPILE='$(COMPILE) -c $< && touch $@'
    CXX_PHP_COMPILE='$(CXX_COMPILE) -c $< && touch $@'
  fi
fi

CC="$old_CC"


if test "$PHP_PIC" = "no"; then
  cat >meta_cc<<EOF
#! /bin/sh
cmd="$CC \`echo \$@|sed s/-[fFD]PIC//g\`"
exec \$cmd
EOF
  chmod +x meta_cc
  CC="$abs_builddir/meta_cc"
fi



  echo "$ac_t""" 1>&6
  echo "$ac_t""${T_MD}Generating files${T_ME}" 1>&6



  
  echo $ac_n "checking for working mkdir -p""... $ac_c" 1>&6
echo "configure:42769: checking for working mkdir -p" >&5
if eval "test \"`echo '$''{'ac_cv_mkdir_p'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
    test -d conftestdir && rm -rf conftestdir
    mkdir -p conftestdir/somedir >/dev/null 2>&1
    if test -d conftestdir/somedir; then
      ac_cv_mkdir_p=yes
    else
      ac_cv_mkdir_p=no
    fi
    rm -rf conftestdir
  
fi

echo "$ac_t""$ac_cv_mkdir_p" 1>&6

  echo creating config_vars.mk
  > config_vars.mk
  for i in $PHP_VAR_SUBST; do
    eval echo "$i = \$$i" >> config_vars.mk
  done

touch .deps

ALL_OUTPUT_FILES="php4.spec Zend/Makefile build-defs.h $PHP_OUTPUT_FILES"

trap '' 1 2 15
cat > confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# The following way of writing the cache mishandles newlines in values,
# but we know of no workaround that is simple, portable, and efficient.
# So, don't put newlines in cache variables' values.
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  case `(ac_space=' '; set | grep ac_space) 2>&1` in
  *ac_space=\ *)
    # `set' does not quote correctly, so add quotes (double-quote substitution
    # turns \\\\ into \\, and sed turns \\ into \).
    sed -n \
      -e "s/'/'\\\\''/g" \
      -e "s/^\\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\\)=\\(.*\\)/\\1=\${\\1='\\2'}/p"
    ;;
  *)
    # `set' quotes correctly as required by POSIX, so do not add quotes.
    sed -n -e 's/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=${\1=\2}/p'
    ;;
  esac >> confcache
if cmp -s $cache_file confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f confcache

trap 'rm -fr conftest* confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

# Any assignment to VPATH causes Sun make to only execute
# the first set of double-colon rules, so remove it if not needed.
# If there is a colon in the path, we need to keep it.
if test "x$srcdir" = x.; then
  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
fi

trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15

DEFS=-DHAVE_CONFIG_H

# Without the "./", some shells look in PATH for config.status.
: ${CONFIG_STATUS=./config.status}

echo creating $CONFIG_STATUS
rm -f $CONFIG_STATUS
cat > $CONFIG_STATUS <<EOF
#! /bin/sh
# Generated automatically by configure.
# Run this file to recreate the current configuration.
# This directory was configured as follows,
# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
#
# $0 $ac_configure_args
#
# Compiler output produced by configure, useful for debugging
# configure, is in ./config.log if it exists.

ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
for ac_option
do
  case "\$ac_option" in
  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
    echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
    exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
    echo "$CONFIG_STATUS generated by autoconf version 2.13"
    exit 0 ;;
  -help | --help | --hel | --he | --h)
    echo "\$ac_cs_usage"; exit 0 ;;
  *) echo "\$ac_cs_usage"; exit 1 ;;
  esac
done

ac_given_srcdir=$srcdir
ac_given_INSTALL="$INSTALL"

trap 'rm -fr `echo "$ALL_OUTPUT_FILES php_config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
EOF
cat >> $CONFIG_STATUS <<EOF

# Protect against being on the right side of a sed subst in config.status.
sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
 s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > conftest.subs <<\\CEOF
$ac_vpsub
$extrasub
s%@EXT_SUBDIRS@%$EXT_SUBDIRS%g
s%@EXT_STATIC@%$EXT_STATIC%g
s%@EXT_SHARED@%$EXT_SHARED%g
s%@EXT_LIBS@%$EXT_LIBS%g
s%@EXT_LTLIBS@%$EXT_LTLIBS%g
s%@SHELL@%$SHELL%g
s%@CFLAGS@%$CFLAGS%g
s%@CPPFLAGS@%$CPPFLAGS%g
s%@CXXFLAGS@%$CXXFLAGS%g
s%@FFLAGS@%$FFLAGS%g
s%@DEFS@%$DEFS%g
s%@LDFLAGS@%$LDFLAGS%g
s%@LIBS@%$LIBS%g
s%@exec_prefix@%$exec_prefix%g
s%@prefix@%$prefix%g
s%@program_transform_name@%$program_transform_name%g
s%@bindir@%$bindir%g
s%@sbindir@%$sbindir%g
s%@libexecdir@%$libexecdir%g
s%@datadir@%$datadir%g
s%@sysconfdir@%$sysconfdir%g
s%@sharedstatedir@%$sharedstatedir%g
s%@localstatedir@%$localstatedir%g
s%@libdir@%$libdir%g
s%@includedir@%$includedir%g
s%@oldincludedir@%$oldincludedir%g
s%@infodir@%$infodir%g
s%@mandir@%$mandir%g
s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
s%@INSTALL_SCRIPT@%$INSTALL_SCRIPT%g
s%@INSTALL_DATA@%$INSTALL_DATA%g
s%@PACKAGE@%$PACKAGE%g
s%@VERSION@%$VERSION%g
s%@ACLOCAL@%$ACLOCAL%g
s%@AUTOCONF@%$AUTOCONF%g
s%@AUTOMAKE@%$AUTOMAKE%g
s%@AUTOHEADER@%$AUTOHEADER%g
s%@MAKEINFO@%$MAKEINFO%g
s%@SET_MAKE@%$SET_MAKE%g
s%@MAINTAINER_MODE_TRUE@%$MAINTAINER_MODE_TRUE%g
s%@MAINTAINER_MODE_FALSE@%$MAINTAINER_MODE_FALSE%g
s%@MAINT@%$MAINT%g
s%@host@%$host%g
s%@host_alias@%$host_alias%g
s%@host_cpu@%$host_cpu%g
s%@host_vendor@%$host_vendor%g
s%@host_os@%$host_os%g
s%@AWK@%$AWK%g
s%@YACC@%$YACC%g
s%@CC@%$CC%g
s%@CPP@%$CPP%g
s%@RANLIB@%$RANLIB%g
s%@LN_S@%$LN_S%g
s%@LEX@%$LEX%g
s%@LEXLIB@%$LEXLIB%g
s%@LEX_OUTPUT_ROOT@%$LEX_OUTPUT_ROOT%g
s%@SHLIB_SUFFIX_NAME@%$SHLIB_SUFFIX_NAME%g
s%@APXS_EXP@%$APXS_EXP%g
s%@APACHE_INCLUDE@%$APACHE_INCLUDE%g
s%@APACHE_TARGET@%$APACHE_TARGET%g
s%@APXS@%$APXS%g
s%@APXS_LDFLAGS@%$APXS_LDFLAGS%g
s%@APACHE_INSTALL@%$APACHE_INSTALL%g
s%@STRONGHOLD@%$STRONGHOLD%g
s%@FHTTPD_LIB@%$FHTTPD_LIB%g
s%@FHTTPD_TARGET@%$FHTTPD_TARGET%g
s%@SERVLET_CLASSPATH@%$SERVLET_CLASSPATH%g
s%@PROG_SENDMAIL@%$PROG_SENDMAIL%g
s%@LIBOBJS@%$LIBOBJS%g
s%@ALLOCA@%$ALLOCA%g
s%@CURL_SHARED_LIBADD@%$CURL_SHARED_LIBADD%g
s%@DBM_LIB@%$DBM_LIB%g
s%@DBM_TYPE@%$DBM_TYPE%g
s%@DBA_SHARED_LIBADD@%$DBA_SHARED_LIBADD%g
s%@GD_LFLAGS@%$GD_LFLAGS%g
s%@GD_LIBS@%$GD_LIBS%g
s%@GETTEXT_SHARED_LIBADD@%$GETTEXT_SHARED_LIBADD%g
s%@ICAP_SHARED_LIBADD@%$ICAP_SHARED_LIBADD%g
s%@IMAP_SHARED_LIBADD@%$IMAP_SHARED_LIBADD%g
s%@IFX_ESQL_FLAGS@%$IFX_ESQL_FLAGS%g
s%@INFORMIX_SHARED_LIBADD@%$INFORMIX_SHARED_LIBADD%g
s%@INFORMIXDIR@%$INFORMIXDIR%g
s%@IFX_LIBS@%$IFX_LIBS%g
s%@II_SHARED_LIBADD@%$II_SHARED_LIBADD%g
s%@INTERBASE_SHARED_LIBADD@%$INTERBASE_SHARED_LIBADD%g
s%@JAVA_CFLAGS@%$JAVA_CFLAGS%g
s%@JAVA_CLASSPATH@%$JAVA_CLASSPATH%g
s%@JAVA_INCLUDE@%$JAVA_INCLUDE%g
s%@JAVA_SHARED@%$JAVA_SHARED%g
s%@JAVA_JAR@%$JAVA_JAR%g
s%@LDAP_SHARED_LIBADD@%$LDAP_SHARED_LIBADD%g
s%@MCAL_SHARED_LIBADD@%$MCAL_SHARED_LIBADD%g
s%@MCRYPT_SHARED_LIBADD@%$MCRYPT_SHARED_LIBADD%g
s%@MHASH_SHARED_LIBADD@%$MHASH_SHARED_LIBADD%g
s%@MSQL_SHARED_LIBADD@%$MSQL_SHARED_LIBADD%g
s%@MYSQL_LIBADD@%$MYSQL_LIBADD%g
s%@MYSQL_SUBDIRS@%$MYSQL_SUBDIRS%g
s%@MYSQL_SHARED_LIBADD@%$MYSQL_SHARED_LIBADD%g
s%@OCI8_SHARED_LIBADD@%$OCI8_SHARED_LIBADD%g
s%@OCI8_DIR@%$OCI8_DIR%g
s%@OCI8_VERSION@%$OCI8_VERSION%g
s%@ODBC_INCDIR@%$ODBC_INCDIR%g
s%@ODBC_INCLUDE@%$ODBC_INCLUDE%g
s%@ODBC_LIBDIR@%$ODBC_LIBDIR%g
s%@ODBC_LIBS@%$ODBC_LIBS%g
s%@ODBC_LFLAGS@%$ODBC_LFLAGS%g
s%@ODBC_TYPE@%$ODBC_TYPE%g
s%@ORACLE_SHARED_LIBADD@%$ORACLE_SHARED_LIBADD%g
s%@ORACLE_DIR@%$ORACLE_DIR%g
s%@ORACLE_VERSION@%$ORACLE_VERSION%g
s%@PCRE_LIBADD@%$PCRE_LIBADD%g
s%@PCRE_SUBDIRS@%$PCRE_SUBDIRS%g
s%@PCRE_SHARED_LIBADD@%$PCRE_SHARED_LIBADD%g
s%@PFPRO_SHARED_LIBADD@%$PFPRO_SHARED_LIBADD%g
s%@PGSQL_INCLUDE@%$PGSQL_INCLUDE%g
s%@PGSQL_SHARED_LIBADD@%$PGSQL_SHARED_LIBADD%g
s%@PSPELL_SHARED_LIBADD@%$PSPELL_SHARED_LIBADD%g
s%@READLINE_SHARED_LIBADD@%$READLINE_SHARED_LIBADD%g
s%@RECODE_SHARED_LIBADD@%$RECODE_SHARED_LIBADD%g
s%@SESSION_SHARED_LIBADD@%$SESSION_SHARED_LIBADD%g
s%@SNMP_SHARED_LIBADD@%$SNMP_SHARED_LIBADD%g
s%@SNMP_LIBDIR@%$SNMP_LIBDIR%g
s%@SNMP_INCLUDE@%$SNMP_INCLUDE%g
s%@KSTAT_LIBS@%$KSTAT_LIBS%g
s%@SWF_SHARED_LIBADD@%$SWF_SHARED_LIBADD%g
s%@yazconfig@%$yazconfig%g
s%@YAZ_SHARED_LIBADD@%$YAZ_SHARED_LIBADD%g
s%@ZLIB_SHARED_LIBADD@%$ZLIB_SHARED_LIBADD%g
s%@REGEX_DIR@%$REGEX_DIR%g
s%@REGEX_LIB@%$REGEX_LIB%g
s%@HSREGEX@%$HSREGEX%g
s%@ZEND_SCANNER@%$ZEND_SCANNER%g
s%@CXX@%$CXX%g
s%@CXXCPP@%$CXXCPP%g
s%@ZEND_GCC@%$ZEND_GCC%g
s%@INLINE_CFLAGS@%$INLINE_CFLAGS%g
s%@abs_builddir@%$abs_builddir%g
s%@abs_srcdir@%$abs_srcdir%g
s%@phplibdir@%$phplibdir%g
s%@phptempdir@%$phptempdir%g
s%@CONFIGURE_COMMAND@%$CONFIGURE_COMMAND%g
s%@CXX_PHP_COMPILE@%$CXX_PHP_COMPILE%g
s%@DEBUG_CFLAGS@%$DEBUG_CFLAGS%g
s%@EXTENSION_DIR@%$EXTENSION_DIR%g
s%@EXTRA_LDFLAGS@%$EXTRA_LDFLAGS%g
s%@EXTRA_LIBS@%$EXTRA_LIBS%g
s%@INCLUDES@%$INCLUDES%g
s%@INCLUDE_PATH@%$INCLUDE_PATH%g
s%@INSTALL_IT@%$INSTALL_IT%g
s%@LFLAGS@%$LFLAGS%g
s%@LIBTOOL@%$LIBTOOL%g
s%@NATIVE_RPATHS@%$NATIVE_RPATHS%g
s%@PEAR_DIR@%$PEAR_DIR%g
s%@PEAR_INSTALLDIR@%$PEAR_INSTALLDIR%g
s%@PHP_BUILD_DATE@%$PHP_BUILD_DATE%g
s%@PHP_COMPILE@%$PHP_COMPILE%g
s%@PHP_LDFLAGS@%$PHP_LDFLAGS%g
s%@PHP_LIBS@%$PHP_LIBS%g
s%@PHP_PROGRAM@%$PHP_PROGRAM%g
s%@PHP_RPATHS@%$PHP_RPATHS%g
s%@PHP_SAPI@%$PHP_SAPI%g
s%@PHP_VERSION@%$PHP_VERSION%g
s%@SHARED_LIBTOOL@%$SHARED_LIBTOOL%g
s%@TSRM_DIR@%$TSRM_DIR%g
s%@TSRM_LIB@%$TSRM_LIB%g
s%@WARNING_LEVEL@%$WARNING_LEVEL%g
s%@build@%$build%g
s%@build_alias@%$build_alias%g
s%@build_cpu@%$build_cpu%g
s%@build_vendor@%$build_vendor%g
s%@build_os@%$build_os%g
s%@LD@%$LD%g
s%@NM@%$NM%g

CEOF
EOF

cat >> $CONFIG_STATUS <<\EOF

# Split the substitutions into bite-sized pieces for seds with
# small command number limits, like on Digital OSF/1 and HP-UX.
ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
ac_file=1 # Number of current file.
ac_beg=1 # First line for current file.
ac_end=$ac_max_sed_cmds # Line after last line for current file.
ac_more_lines=:
ac_sed_cmds=""
while $ac_more_lines; do
  if test $ac_beg -gt 1; then
    sed "1,${ac_beg}d; ${ac_end}q" conftest.subs > conftest.s$ac_file
  else
    sed "${ac_end}q" conftest.subs > conftest.s$ac_file
  fi
  if test ! -s conftest.s$ac_file; then
    ac_more_lines=false
    rm -f conftest.s$ac_file
  else
    if test -z "$ac_sed_cmds"; then
      ac_sed_cmds="sed -f conftest.s$ac_file"
    else
      ac_sed_cmds="$ac_sed_cmds | sed -f conftest.s$ac_file"
    fi
    ac_file=`expr $ac_file + 1`
    ac_beg=$ac_end
    ac_end=`expr $ac_end + $ac_max_sed_cmds`
  fi
done
if test -z "$ac_sed_cmds"; then
  ac_sed_cmds=cat
fi
EOF

cat >> $CONFIG_STATUS <<EOF

CONFIG_FILES=\${CONFIG_FILES-"$ALL_OUTPUT_FILES"}
EOF
cat >> $CONFIG_STATUS <<\EOF
for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  # Adjust a relative srcdir, top_srcdir, and INSTALL for subdirectories.

  # Remove last slash and all that follows it.  Not all systems have dirname.
  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
    # The file is in a subdirectory.
    test ! -d "$ac_dir" && mkdir "$ac_dir"
    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
    # A "../" for each directory in $ac_dir_suffix.
    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
  else
    ac_dir_suffix= ac_dots=
  fi

  case "$ac_given_srcdir" in
  .)  srcdir=.
      if test -z "$ac_dots"; then top_srcdir=.
      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
  *) # Relative path.
    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
    top_srcdir="$ac_dots$ac_given_srcdir" ;;
  esac

  case "$ac_given_INSTALL" in
  [/$]*) INSTALL="$ac_given_INSTALL" ;;
  *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
  esac

  echo creating "$ac_file"
  rm -f "$ac_file"
  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
  case "$ac_file" in
  *Makefile*) ac_comsub="1i\\
# $configure_input" ;;
  *) ac_comsub= ;;
  esac

  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  sed -e "$ac_comsub
s%@configure_input@%$configure_input%g
s%@srcdir@%$srcdir%g
s%@top_srcdir@%$top_srcdir%g
s%@INSTALL@%$INSTALL%g
" $ac_file_inputs | (eval "$ac_sed_cmds") > $ac_file
fi; done
rm -f conftest.s*

# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
# NAME is the cpp macro being defined and VALUE is the value it is being given.
#
# ac_d sets the value in "#define NAME VALUE" lines.
ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
ac_dC='\3'
ac_dD='%g'
# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_uB='\([ 	]\)%\1#\2define\3'
ac_uC=' '
ac_uD='\4%g'
# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_eB='$%\1#\2define\3'
ac_eC=' '
ac_eD='%g'

if test "${CONFIG_HEADERS+set}" != set; then
EOF
cat >> $CONFIG_STATUS <<EOF
  CONFIG_HEADERS="php_config.h"
EOF
cat >> $CONFIG_STATUS <<\EOF
fi
for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile[:infile...]]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%[^:]*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  echo creating $ac_file

  rm -f conftest.frag conftest.in conftest.out
  ac_file_inputs=`echo $ac_file_in|sed -e "s%^%$ac_given_srcdir/%" -e "s%:% $ac_given_srcdir/%g"`
  cat $ac_file_inputs > conftest.in

EOF

# Transform confdefs.h into a sed script conftest.vals that substitutes
# the proper values into config.h.in to produce config.h.  And first:
# Protect against being on the right side of a sed subst in config.status.
# Protect against being in an unquoted here document in config.status.
rm -f conftest.vals
cat > conftest.hdr <<\EOF
s/[\\&%]/\\&/g
s%[\\$`]%\\&%g
s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
s%ac_d%ac_u%gp
s%ac_u%ac_e%gp
EOF
sed -n -f conftest.hdr confdefs.h > conftest.vals
rm -f conftest.hdr

# This sed command replaces #undef with comments.  This is necessary, for
# example, in the case of _POSIX_SOURCE, which is predefined and required
# on some systems where configure will not decide to define it.
cat >> conftest.vals <<\EOF
s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
EOF

# Break up conftest.vals because some shells have a limit on
# the size of here documents, and old seds have small limits too.

rm -f conftest.tail
while :
do
  ac_lines=`grep -c . conftest.vals`
  # grep -c gives empty output for an empty file on some AIX systems.
  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
  # Write a limited-size here document to conftest.frag.
  echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
  sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
  echo 'CEOF
  sed -f conftest.frag conftest.in > conftest.out
  rm -f conftest.in
  mv conftest.out conftest.in
' >> $CONFIG_STATUS
  sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
  rm -f conftest.vals
  mv conftest.tail conftest.vals
done
rm -f conftest.vals

cat >> $CONFIG_STATUS <<\EOF
  rm -f conftest.frag conftest.h
  echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
  cat conftest.in >> conftest.h
  rm -f conftest.in
  if cmp -s $ac_file conftest.h 2>/dev/null; then
    echo "$ac_file is unchanged"
    rm -f conftest.h
  else
    # Remove last slash and all that follows it.  Not all systems have dirname.
      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
      if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
      # The file is in a subdirectory.
      test ! -d "$ac_dir" && mkdir "$ac_dir"
    fi
    rm -f $ac_file
    mv conftest.h $ac_file
  fi
fi; done

EOF
cat >> $CONFIG_STATUS <<EOF



if test "\$CONFIG_FILES" = "$ALL_OUTPUT_FILES"; then
  REDO_ALL=yes
fi

if test -n "\$REDO_ALL"; then
  
  $SHELL $srcdir/build/fastgen.sh $srcdir $ac_cv_mkdir_p $PHP_FAST_OUTPUT_FILES

fi
		   
if test ! -f $srcdir/ext/bcmath/number.c; then
	echo "creating number.c"
	echo "/* Dummy File */" > $srcdir/ext/bcmath/number.c
	echo "creating number.h"
	echo "/* Dummy File */" > $srcdir/ext/bcmath/number.h
fi

################################################################
# Create configuration headers
#

if test -d TSRM; then
  echo '#include "../php_config.h"' > TSRM/tsrm_config.h
fi

cat >Zend/zend_config.h <<FEO
#include "../php_config.h"
#if defined(APACHE) && defined(PHP_API_VERSION)
#undef HAVE_DLFCN_H
#endif
FEO

# run this only when generating all the files?
if test -n "\$REDO_ALL"; then
  # Hacking while airborne considered harmful.
  #
  echo "creating main/internal_functions.c"
  extensions=\`grep '^s.@EXT_STATIC@' \$0|sed -e 's/^.*@% *//' -e 's/%.*$//'\`
  mv -f main/internal_functions.c main/internal_functions.c.old 2>/dev/null
  sh $srcdir/genif.sh $srcdir/main/internal_functions.c.in $srcdir "$EXTRA_MODULE_PTRS" \$extensions > main/internal_functions.c
  if cmp main/internal_functions.c.old main/internal_functions.c > /dev/null 2>&1; then
      echo "main/internal_functions.c is unchanged"
      mv main/internal_functions.c.old main/internal_functions.c
  else
      rm -f main/internal_functions.c.old
  fi

  if test -n "$PHP_APXS_BROKEN"; then
    echo "+--------------------------------------------------------------------+"
    echo "| WARNING: Your $APXS script is most likely broken."
    echo "|                                                                    |"
    echo "| Please go read http://www.php.net/FAQ.php#6.11 and make the        |"
    echo "| changes described there and try again.                             |"
  fi

  # Warn about CGI version with no extra security options.
  if test "$PHP_SAPI" = "cgi"; then
    if test "$REDIRECT" = "0"; then
      if test "$DISCARD_PATH" = "0"; then
        echo "+--------------------------------------------------------------------+"
        echo "|                        *** WARNING ***                             |"
        echo "|                                                                    |"
        echo "| You will be compiling the CGI version of PHP without any           |"
        echo "| redirection checking.  By putting this cgi binary somewhere in     |"
        echo "| your web space, users may be able to circumvent existing .htaccess |"
        echo "| security by loading files directly through the parser.  See        |"
        echo "| http://www.php.net/manual/security.php for more details.           |"
      fi
    fi
  fi


  if test -n "$DEBUG_LOG"; then
    rm -f config.cache
cat <<X
+--------------------------------------------------------------------+
|                       *** ATTENTION ***                            |
|                                                                    |
| Something is likely to be messed up here, because the configure    |
| script was not able to detect a simple feature on your platform.   |
| This is often caused by incorrect configuration parameters. Please |
| see the file debug.log for error messages.                         |
|                                                                    |
| If you are unable to fix this, send the file debug.log to the      |
| php-install@lists.php.net mailing list and include appropiate      |
| information about your setup.                                      |
X
  fi

  if test "$MYSQL_MODULE_TYPE" = "builtin" ; then
cat <<X
+--------------------------------------------------------------------+
|                        *** WARNING ***                             |
|                                                                    |
| You chose to compile PHP with the built-in MySQL support.  If you  |
| are compiling a server module, and intend to use other server      |
| modules that also use MySQL (e.g, mod_auth_mysql, PHP 3.0,         |
| mod_perl) you must NOT rely on PHP's built-in MySQL support, and   |
| instead build it with your local MySQL support files, by adding    |
| --with-mysql=/path/to/mysql to your configure line.                |
X
  fi

  echo "+--------------------------------------------------------------------+"
  echo "| License:                                                           |"
  echo "| This software is subject to the PHP License, available in this     |"
  echo "| distribution in the file LICENSE.  By continuing this installation |"
  echo "| process, you are bound by the terms of this license agreement.     |"
  echo "| If you do not agree with the terms of this license, you must abort |"
  echo "| the installation process at this point.                            |"
  echo "+--------------------------------------------------------------------+"

cat<<X

Thank you for using PHP.

X

fi

EOF
cat >> $CONFIG_STATUS <<\EOF
test -z "$CONFIG_HEADERS" || echo timestamp > stamp-h

exit 0
EOF
chmod +x $CONFIG_STATUS
rm -fr confdefs* $ac_clean_files
test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1


